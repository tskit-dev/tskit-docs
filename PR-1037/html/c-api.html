

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>C API &mdash; tskit 0.3.3.dev1 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Command line interface" href="cli.html" />
    <link rel="prev" title="Statistics" href="stats.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> tskit
          

          
            
            <img src="_static/tskit_logo_pale.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="python-api.html">Python API</a></li>
<li class="toctree-l1"><a class="reference internal" href="stats.html">Statistics</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">C API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#do-i-need-the-c-api">Do I need the C API?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#api-structure">API structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="#error-handling">Error handling</a></li>
<li class="toctree-l3"><a class="reference internal" href="#using-tskit-in-your-project">Using tskit in your project</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#basic-types">Basic Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="#common-options">Common options</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tables-api">Tables API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#table-collections">Table collections</a></li>
<li class="toctree-l3"><a class="reference internal" href="#individuals">Individuals</a></li>
<li class="toctree-l3"><a class="reference internal" href="#nodes">Nodes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#edges">Edges</a></li>
<li class="toctree-l3"><a class="reference internal" href="#migrations">Migrations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sites">Sites</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mutations">Mutations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#populations">Populations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#provenances">Provenances</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#table-indexes">Table indexes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tree-sequences">Tree sequences</a></li>
<li class="toctree-l2"><a class="reference internal" href="#trees">Trees</a></li>
<li class="toctree-l2"><a class="reference internal" href="#low-level-sorting">Low-level sorting</a></li>
<li class="toctree-l2"><a class="reference internal" href="#miscellaneous-functions">Miscellaneous functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#constants">Constants</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#api-version">API Version</a></li>
<li class="toctree-l3"><a class="reference internal" href="#generic-errors">Generic Errors</a></li>
<li class="toctree-l3"><a class="reference internal" href="#file-format-errors">File format errors</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#examples">Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#basic-forwards-simulator">Basic forwards simulator</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tree-iteration">Tree iteration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tree-traversals">Tree traversals</a></li>
<li class="toctree-l3"><a class="reference internal" href="#file-streaming">File streaming</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">Command line interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="data-model.html">Data model</a></li>
<li class="toctree-l1"><a class="reference internal" href="metadata.html">Metadata</a></li>
<li class="toctree-l1"><a class="reference internal" href="combinatorics.html">Combinatorics</a></li>
<li class="toctree-l1"><a class="reference internal" href="provenance.html">Provenance</a></li>
<li class="toctree-l1"><a class="reference internal" href="development.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelogs.html">Changelogs</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">tskit</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>C API</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/tskit-dev/tskit/blob/main/docs/c-api.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="c-api">
<span id="sec-c-api"></span><h1>C API<a class="headerlink" href="#c-api" title="Permalink to this headline">¶</a></h1>
<p>This is the documentation for the <code class="docutils literal notranslate"><span class="pre">tskit</span></code> C API, a low-level library
for manipulating and processing <a class="reference internal" href="data-model.html#sec-data-model"><span class="std std-ref">tree sequence data</span></a>.
The library is written using the C99 standard and is fully thread safe.
Tskit uses <a class="reference external" href="https://kastore.readthedocs.io/">kastore</a> to define a
simple storage format for the tree sequence data.</p>
<p>To see the API in action, please see <a class="reference internal" href="#sec-c-api-examples"><span class="std std-ref">Examples</span></a> section.</p>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<div class="section" id="do-i-need-the-c-api">
<h3>Do I need the C API?<a class="headerlink" href="#do-i-need-the-c-api" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">tskit</span></code> C API is generally useful in the following situations:</p>
<ul class="simple">
<li><p>You want to use the <code class="docutils literal notranslate"><span class="pre">tskit</span></code> API in a larger C/C++ application (e.g.,
in order to output data in the <code class="docutils literal notranslate"><span class="pre">.trees</span></code> format);</p></li>
<li><p>You need to perform lots of tree traversals/loops etc to analyse some
data that is in tree sequence form.</p></li>
</ul>
<p>For high level operations that are not performance sensitive, the <a class="reference internal" href="python-api.html#sec-python-api"><span class="std std-ref">Python API</span></a>
is generally more useful. Python is <em>much</em> more convenient that C,
and since the <code class="docutils literal notranslate"><span class="pre">tskit</span></code> Python module is essentially a wrapper for this
C library, there’s often no real performance penalty for using it.</p>
</div>
<div class="section" id="api-structure">
<span id="sec-c-api-overview-structure"></span><h3>API structure<a class="headerlink" href="#api-structure" title="Permalink to this headline">¶</a></h3>
<p>Tskit uses a set of conventions to provide a pseudo object oriented API. Each
‘object’ is represented by a C struct and has a set of ‘methods’. This is
most easily explained by an example:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;stdlib.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;tskit/tables.h&gt;</span><span class="cp"></span>

<span class="cp">#define check_tsk_error(val)                                                            \</span>
<span class="cp">    if (val &lt; 0) {                                                                      \</span>
<span class="cp">        fprintf(stderr, &quot;line %d: %s&quot;, __LINE__, tsk_strerror(val));                    \</span>
<span class="cp">        exit(EXIT_FAILURE);                                                             \</span>
<span class="cp">    }</span>

<span class="kt">int</span>
<span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">**</span><span class="n">argv</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">j</span><span class="p">,</span> <span class="n">ret</span><span class="p">;</span>
    <span class="n">tsk_edge_table_t</span> <span class="n">edges</span><span class="p">;</span>

    <span class="n">ret</span> <span class="o">=</span> <span class="n">tsk_edge_table_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">edges</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="n">check_tsk_error</span><span class="p">(</span><span class="n">ret</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="n">tsk_edge_table_add_row</span><span class="p">(</span><span class="o">&amp;</span><span class="n">edges</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
        <span class="n">check_tsk_error</span><span class="p">(</span><span class="n">ret</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="n">tsk_edge_table_print_state</span><span class="p">(</span><span class="o">&amp;</span><span class="n">edges</span><span class="p">,</span> <span class="n">stdout</span><span class="p">);</span>
    <span class="n">tsk_edge_table_free</span><span class="p">(</span><span class="o">&amp;</span><span class="n">edges</span><span class="p">);</span>

    <span class="k">return</span> <span class="n">EXIT_SUCCESS</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In this program we create a <a class="reference internal" href="#c.tsk_edge_table_t" title="tsk_edge_table_t"><code class="xref c c-type docutils literal notranslate"><span class="pre">tsk_edge_table_t</span></code></a> instance, add five rows
using <a class="reference internal" href="#c.tsk_edge_table_add_row" title="tsk_edge_table_add_row"><code class="xref c c-func docutils literal notranslate"><span class="pre">tsk_edge_table_add_row()</span></code></a>, print out its contents using the
<a class="reference internal" href="#c.tsk_edge_table_print_state" title="tsk_edge_table_print_state"><code class="xref c c-func docutils literal notranslate"><span class="pre">tsk_edge_table_print_state()</span></code></a> debugging method, and finally free
the memory used by the edge table object. We define this edge table
‘class’ by using some simple naming conventions which are adhered
to throughout <code class="docutils literal notranslate"><span class="pre">tskit</span></code>. This is simply a naming convention that helps to
keep code written in plain C logically structured; there are no extra C++ style features.
We use object oriented terminology freely throughout this documentation
with this understanding.</p>
<p>In this convention, a class is defined by a struct <code class="docutils literal notranslate"><span class="pre">class_name_t</span></code> (e.g.
<code class="docutils literal notranslate"><span class="pre">edge_table_t</span></code>) and its methods all have the form <code class="docutils literal notranslate"><span class="pre">class_name_method_name</span></code>
whose first argument is always a pointer to an instance of the class (e.g.,
<code class="docutils literal notranslate"><span class="pre">edge_table_add_row</span></code> above).
Each class has an initialise and free method, called <code class="docutils literal notranslate"><span class="pre">class_name_init</span></code>
and <code class="docutils literal notranslate"><span class="pre">class_name_free</span></code>, respectively. The init method must
be called to ensure that the object is correctly initialised (except
for functions such as for <a class="reference internal" href="#c.tsk_table_collection_load" title="tsk_table_collection_load"><code class="xref c c-func docutils literal notranslate"><span class="pre">tsk_table_collection_load()</span></code></a>
and <a class="reference internal" href="#c.tsk_table_collection_copy" title="tsk_table_collection_copy"><code class="xref c c-func docutils literal notranslate"><span class="pre">tsk_table_collection_copy()</span></code></a> which automatically initialise
the object by default for convenience). The free
method must always be called to avoid leaking memory, even in the
case of an error occuring during initialisation. If <code class="docutils literal notranslate"><span class="pre">class_name_init</span></code> has
been called succesfully, we say the object has been “initialised”; if not,
it is “uninitialised”. After <code class="docutils literal notranslate"><span class="pre">class_name_free</span></code> has been called,
the object is again uninitialised.</p>
<p>It is important to note that the init methods only allocate <em>internal</em> memory;
the memory for the instance itself must be allocated either on the
heap or the stack:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Instance allocated on the stack</span>
<span class="n">tsk_node_table_t</span> <span class="n">nodes</span><span class="p">;</span>
<span class="n">tsk_node_table_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">nodes</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="n">tsk_node_table_free</span><span class="p">(</span><span class="o">&amp;</span><span class="n">nodes</span><span class="p">);</span>

<span class="c1">// Instance allocated on the heap</span>
<span class="n">tsk_edge_table_t</span> <span class="o">*</span><span class="n">edges</span> <span class="o">=</span> <span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">tsk_edge_table_t</span><span class="p">));</span>
<span class="n">tsk_edge_table_init</span><span class="p">(</span><span class="n">edges</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="n">tsk_edge_table_free</span><span class="p">(</span><span class="n">edges</span><span class="p">);</span>
<span class="n">free</span><span class="p">(</span><span class="n">edges</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="error-handling">
<h3>Error handling<a class="headerlink" href="#error-handling" title="Permalink to this headline">¶</a></h3>
<p>C does not have a mechanism for propagating exceptions, and great care
must be taken to ensure that errors are correctly and safely handled.
The convention adopted in <code class="docutils literal notranslate"><span class="pre">tskit</span></code> is that
every function (except for trivial accessor methods) returns
an integer. If this return value is negative an error has occured which
must be handled. A description of the error that occured can be obtained
using the <a class="reference internal" href="#c.tsk_strerror" title="tsk_strerror"><code class="xref c c-func docutils literal notranslate"><span class="pre">tsk_strerror()</span></code></a> function. The following example illustrates
the key conventions around error handling in <code class="docutils literal notranslate"><span class="pre">tskit</span></code>:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;stdlib.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;tskit.h&gt;</span><span class="cp"></span>

<span class="kt">int</span>
<span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">**</span><span class="n">argv</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">ret</span><span class="p">;</span>
    <span class="n">tsk_treeseq_t</span> <span class="n">ts</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">argc</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span> <span class="s">&quot;usage: &lt;tree sequence file&gt;&quot;</span><span class="p">);</span>
        <span class="n">exit</span><span class="p">(</span><span class="n">EXIT_FAILURE</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">tsk_treeseq_load</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ts</span><span class="p">,</span> <span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">0</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">ret</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="cm">/* Error condition. Free and exit */</span>
        <span class="n">tsk_treeseq_free</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ts</span><span class="p">);</span>
        <span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span> <span class="s">&quot;%s&quot;</span><span class="p">,</span> <span class="n">tsk_strerror</span><span class="p">(</span><span class="n">ret</span><span class="p">));</span>
        <span class="n">exit</span><span class="p">(</span><span class="n">EXIT_FAILURE</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;Loaded tree sequence with %d nodes and %d edges from %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
        <span class="n">tsk_treeseq_get_num_nodes</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ts</span><span class="p">),</span>
        <span class="n">tsk_treeseq_get_num_edges</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ts</span><span class="p">),</span>
        <span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
    <span class="n">tsk_treeseq_free</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ts</span><span class="p">);</span>

    <span class="k">return</span> <span class="n">EXIT_SUCCESS</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In this example we load a tree sequence from file and print out a summary
of the number of nodes and edges it contains. After calling
<a class="reference internal" href="#c.tsk_treeseq_load" title="tsk_treeseq_load"><code class="xref c c-func docutils literal notranslate"><span class="pre">tsk_treeseq_load()</span></code></a> we check the return value <code class="docutils literal notranslate"><span class="pre">ret</span></code> to see
if an error occured. If an error has occured we exit with an error
message produced by <a class="reference internal" href="#c.tsk_strerror" title="tsk_strerror"><code class="xref c c-func docutils literal notranslate"><span class="pre">tsk_strerror()</span></code></a>. Note that in this example we call
<a class="reference internal" href="#c.tsk_treeseq_free" title="tsk_treeseq_free"><code class="xref c c-func docutils literal notranslate"><span class="pre">tsk_treeseq_free()</span></code></a> whether or not an error occurs: in general,
once a function that initialises an object (e.g., <code class="docutils literal notranslate"><span class="pre">X_init</span></code>, <code class="docutils literal notranslate"><span class="pre">X_copy</span></code>
or <code class="docutils literal notranslate"><span class="pre">X_load</span></code>) is called, then <code class="docutils literal notranslate"><span class="pre">X_free</span></code> must
be called to ensure that memory is not leaked.</p>
<p>Most functions in <code class="docutils literal notranslate"><span class="pre">tskit</span></code> return an error status; we recommend that <strong>every</strong>
return value is checked.</p>
</div>
<div class="section" id="using-tskit-in-your-project">
<h3>Using tskit in your project<a class="headerlink" href="#using-tskit-in-your-project" title="Permalink to this headline">¶</a></h3>
<p>Tskit is built as a standard C library and so there are many different ways
in which it can be included in downstream projects. It is possible to
install <code class="docutils literal notranslate"><span class="pre">tskit</span></code> onto a system (i.e., installing a shared library and
header files to a standard locations on Unix) and linking against it,
but there are many different ways in which this can go wrong. In the
interest of simplicity and improving the end-user experience we recommend
embedding <code class="docutils literal notranslate"><span class="pre">tskit</span></code> directly into your applications.</p>
<p>There are many different build systems and approaches to compiling
code, and so it’s not possible to give definitive documentation on
how <code class="docutils literal notranslate"><span class="pre">tskit</span></code> should be included in downstream projects. Please
see the <a class="reference external" href="https://github.com/tskit-dev/tskit-build-examples">build examples</a>
repo for some examples of how to incorporate <code class="docutils literal notranslate"><span class="pre">tskit</span></code> into
different project structures and build systems.</p>
<p>Tskit uses the <a class="reference external" href="https://mesonbuild.com">meson</a> build system internally,
and supports being used a <a class="reference external" href="https://mesonbuild.com/Subprojects.html">meson subproject</a>.
We show an <a class="reference external" href="https://github.com/tskit-dev/tskit-build-examples/tree/main/meson">example</a>
in which this is combined with
<a class="reference external" href="https://git-scm.com/book/en/v2/Git-Tools-Submodules">git submodules</a> to neatly
abstract many details of cross platform C development.</p>
<p>Some users may choose to check the source for <code class="docutils literal notranslate"><span class="pre">tskit</span></code> (and <code class="docutils literal notranslate"><span class="pre">kastore</span></code>)
directly into their source control repositories. If you wish to do this,
the code is in the <code class="docutils literal notranslate"><span class="pre">c</span></code> subdirectory of the
<a class="reference external" href="https://github.com/tskit-dev/tskit/tree/main/c">tskit</a> and
<a class="reference external" href="https://github.com/tskit-dev/kastore/tree/main/c">kastore</a> repos.
The following header files should be placed in the search path:
<code class="docutils literal notranslate"><span class="pre">kastore.h</span></code>, <code class="docutils literal notranslate"><span class="pre">tskit.h</span></code>, and <code class="docutils literal notranslate"><span class="pre">tskit/*.h</span></code>.
The C files <code class="docutils literal notranslate"><span class="pre">kastore.c</span></code> and <code class="docutils literal notranslate"><span class="pre">tskit*.c</span></code> should be compiled.
For those who wish to minimise the size of their compiled binaries,
<code class="docutils literal notranslate"><span class="pre">tskit</span></code> is quite modular, and C files can be omitted if not needed.
For example, if you are just using the <a class="reference internal" href="#sec-c-api-tables-api"><span class="std std-ref">Tables API</span></a> then
only the files <code class="docutils literal notranslate"><span class="pre">tskit/core.[c,h]</span></code> and <code class="docutils literal notranslate"><span class="pre">tskit/tables.[c,h]</span></code> are
needed.</p>
<p>However you include <code class="docutils literal notranslate"><span class="pre">tskit</span></code> in your project, however, please
ensure that it is a <strong>released version</strong>. Released versions are
tagged on GitHub using the convention <code class="docutils literal notranslate"><span class="pre">C_{VERSION}</span></code>. The code
can either be downloaded from GitHub on the <a class="reference external" href="https://github.com/tskit-dev/tskit/releases">releases page</a> or checked out
using git. For example, to check out the <code class="docutils literal notranslate"><span class="pre">C_0.99.1</span></code> release:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git clone https://github.com/tskit-dev/tskit.git
$ cd tskit
$ git checkout C_0.99.1
</pre></div>
</div>
<p>Git submodules may also be considered—see the
<a class="reference external" href="https://github.com/tskit-dev/tskit-build-examples/tree/main/meson">example</a>
for how to set these up and to check out at a specific release.</p>
</div>
</div>
<div class="section" id="basic-types">
<h2>Basic Types<a class="headerlink" href="#basic-types" title="Permalink to this headline">¶</a></h2>
<dl class="c type">
<dt id="c.tsk_id_t">
<span class="target" id="tables_8h_1ad11b8b1c1f56c700a6959e80417e4d53"></span><em class="property">typedef </em>int32_t <code class="sig-name descname">tsk_id_t</code><a class="headerlink" href="#c.tsk_id_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Tskit Object IDs. </p>
<p><p><p>All objects in tskit are referred to by integer IDs corresponding to the
row they occupy in the relevant table. The <code class="docutils literal notranslate"><span class="pre">tsk_id_t</span></code> type should be used
when manipulating these ID values. The reserved value <code class="docutils literal notranslate"><span class="pre">TSK_NULL</span></code> (-1) defines
missing data.</p>
</p>
 </p>
</dd></dl>

<dl class="c type">
<dt id="c.tsk_size_t">
<span class="target" id="tables_8h_1a3ea72cacfbf42427d7539c8d54f906f2"></span><em class="property">typedef </em>uint32_t <code class="sig-name descname">tsk_size_t</code><a class="headerlink" href="#c.tsk_size_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Tskit sizes. </p>
<p><p><p>Sizes in tskit are defined by the <code class="docutils literal notranslate"><span class="pre">tsk_size_t</span></code> type.</p>
</p>
 </p>
</dd></dl>

<dl class="c type">
<dt id="c.tsk_flags_t">
<span class="target" id="tables_8h_1a71cbeb24f4c37b359ca0136673821612"></span><em class="property">typedef </em>uint32_t <code class="sig-name descname">tsk_flags_t</code><a class="headerlink" href="#c.tsk_flags_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Container for bitwise flags. </p>
<p><p><p>Bitwise flags are used in tskit as a column type and also as a way to
specify options to API functions.</p>
</p>
 </p>
</dd></dl>

</div>
<div class="section" id="common-options">
<h2>Common options<a class="headerlink" href="#common-options" title="Permalink to this headline">¶</a></h2>
<dl class="c macro">
<dt id="c.TSK_DEBUG">
<span class="target" id="group___t_a_b_l_e_s___a_p_i___f_u_n_c_t_i_o_n___o_p_t_i_o_n_s_1gace02380b81c74961db6c17a5aba50fd6"></span><code class="sig-name descname">TSK_DEBUG</code> (1u &lt;&lt; 31)<a class="headerlink" href="#c.TSK_DEBUG" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Turn on debugging output. Not supported by all functions. </p>
</dd></dl>

<dl class="c macro">
<dt id="c.TSK_NO_INIT">
<span class="target" id="group___t_a_b_l_e_s___a_p_i___f_u_n_c_t_i_o_n___o_p_t_i_o_n_s_1ga687006cf389016372a4e12f11158abe2"></span><code class="sig-name descname">TSK_NO_INIT</code> (1u &lt;&lt; 30)<a class="headerlink" href="#c.TSK_NO_INIT" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Do not initialise the parameter object. </p>
</dd></dl>

<dl class="c macro">
<dt id="c.TSK_NO_CHECK_INTEGRITY">
<span class="target" id="group___t_a_b_l_e_s___a_p_i___f_u_n_c_t_i_o_n___o_p_t_i_o_n_s_1ga835bef5159a71a4a708c9ecdfec104de"></span><code class="sig-name descname">TSK_NO_CHECK_INTEGRITY</code> (1u &lt;&lt; 29)<a class="headerlink" href="#c.TSK_NO_CHECK_INTEGRITY" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Do not run integrity checks before performing an operation. </p>
</dd></dl>

</div>
<div class="section" id="tables-api">
<span id="sec-c-api-tables-api"></span><h2>Tables API<a class="headerlink" href="#tables-api" title="Permalink to this headline">¶</a></h2>
<p>The tables API section of <code class="docutils literal notranslate"><span class="pre">tskit</span></code> is defined in the <code class="docutils literal notranslate"><span class="pre">tskit/tables.h</span></code> header.</p>
<div class="section" id="table-collections">
<h3>Table collections<a class="headerlink" href="#table-collections" title="Permalink to this headline">¶</a></h3>
<dl class="c struct">
<dt id="c.tsk_table_collection_t">
<span class="target" id="structtsk__table__collection__t"></span><em class="property">struct </em><code class="sig-name descname">tsk_table_collection_t</code><a class="headerlink" href="#c.tsk_table_collection_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>A collection of tables defining the data for a tree sequence. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Members</p>
<dl class="c var">
<dt id="c.tsk_table_collection_t.sequence_length">
<span class="target" id="structtsk__table__collection__t_1aec59b1f300ef29e9c393893ba0fbe400"></span>double <code class="sig-name descname">sequence_length</code><a class="headerlink" href="#c.tsk_table_collection_t.sequence_length" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The sequence length defining the tree sequence’s coordinate space. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_table_collection_t.metadata">
<span class="target" id="structtsk__table__collection__t_1ace70beae1a71187d5961a8d7c0dafb7b"></span>char *<code class="sig-name descname">metadata</code><a class="headerlink" href="#c.tsk_table_collection_t.metadata" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The tree-sequence metadata. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_table_collection_t.metadata_schema">
<span class="target" id="structtsk__table__collection__t_1ae529f60b9eb4e1faaca99066fa4da00f"></span>char *<code class="sig-name descname">metadata_schema</code><a class="headerlink" href="#c.tsk_table_collection_t.metadata_schema" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The metadata schema. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_table_collection_t.individuals">
<span class="target" id="structtsk__table__collection__t_1a76ff995a01f01333ee26054313e64932"></span><a class="reference internal" href="#c.tsk_individual_table_t" title="tsk_individual_table_t">tsk_individual_table_t</a> <code class="sig-name descname">individuals</code><a class="headerlink" href="#c.tsk_table_collection_t.individuals" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The individual table. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_table_collection_t.nodes">
<span class="target" id="structtsk__table__collection__t_1a1e198b802cb18b87ba8058669fd3ed05"></span><a class="reference internal" href="#c.tsk_node_table_t" title="tsk_node_table_t">tsk_node_table_t</a> <code class="sig-name descname">nodes</code><a class="headerlink" href="#c.tsk_table_collection_t.nodes" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The node table. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_table_collection_t.edges">
<span class="target" id="structtsk__table__collection__t_1acb5aef13ac627d7dca910e47497aba90"></span><a class="reference internal" href="#c.tsk_edge_table_t" title="tsk_edge_table_t">tsk_edge_table_t</a> <code class="sig-name descname">edges</code><a class="headerlink" href="#c.tsk_table_collection_t.edges" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The edge table. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_table_collection_t.migrations">
<span class="target" id="structtsk__table__collection__t_1a84d768db560874e356d213c75fada585"></span><a class="reference internal" href="#c.tsk_migration_table_t" title="tsk_migration_table_t">tsk_migration_table_t</a> <code class="sig-name descname">migrations</code><a class="headerlink" href="#c.tsk_table_collection_t.migrations" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The migration table. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_table_collection_t.sites">
<span class="target" id="structtsk__table__collection__t_1a923fcee7e13a4cb5ad75845ca063cdbc"></span><a class="reference internal" href="#c.tsk_site_table_t" title="tsk_site_table_t">tsk_site_table_t</a> <code class="sig-name descname">sites</code><a class="headerlink" href="#c.tsk_table_collection_t.sites" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The site table. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_table_collection_t.mutations">
<span class="target" id="structtsk__table__collection__t_1aad6cfdf153e558b05699f7e5188162d0"></span><a class="reference internal" href="#c.tsk_mutation_table_t" title="tsk_mutation_table_t">tsk_mutation_table_t</a> <code class="sig-name descname">mutations</code><a class="headerlink" href="#c.tsk_table_collection_t.mutations" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The mutation table. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_table_collection_t.populations">
<span class="target" id="structtsk__table__collection__t_1a5f9a800720a2d06f2723e7e20dd1590b"></span><a class="reference internal" href="#c.tsk_population_table_t" title="tsk_population_table_t">tsk_population_table_t</a> <code class="sig-name descname">populations</code><a class="headerlink" href="#c.tsk_table_collection_t.populations" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The population table. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_table_collection_t.provenances">
<span class="target" id="structtsk__table__collection__t_1a00139a1323ba12d812d2b9ab7f3dd8ae"></span><a class="reference internal" href="#c.tsk_provenance_table_t" title="tsk_provenance_table_t">tsk_provenance_table_t</a> <code class="sig-name descname">provenances</code><a class="headerlink" href="#c.tsk_table_collection_t.provenances" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The provenance table. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="c struct">
<dt id="c.tsk_bookmark_t">
<span class="target" id="structtsk__bookmark__t"></span><em class="property">struct </em><code class="sig-name descname">tsk_bookmark_t</code><a class="headerlink" href="#c.tsk_bookmark_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>A bookmark recording the position of all the tables in a table collection. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Members</p>
<dl class="c var">
<dt id="c.tsk_bookmark_t.individuals">
<span class="target" id="structtsk__bookmark__t_1a19e610f902da5441f916f8f21d0892d9"></span><a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <code class="sig-name descname">individuals</code><a class="headerlink" href="#c.tsk_bookmark_t.individuals" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The position in the individual table. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_bookmark_t.nodes">
<span class="target" id="structtsk__bookmark__t_1a0833e4fe6fd7377847b01e0e50cdb0bb"></span><a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <code class="sig-name descname">nodes</code><a class="headerlink" href="#c.tsk_bookmark_t.nodes" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The position in the node table. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_bookmark_t.edges">
<span class="target" id="structtsk__bookmark__t_1a7892e438d097862aa2b99544d55a3ff8"></span><a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <code class="sig-name descname">edges</code><a class="headerlink" href="#c.tsk_bookmark_t.edges" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The position in the edge table. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_bookmark_t.migrations">
<span class="target" id="structtsk__bookmark__t_1a7450fdfa955cf6b7fbaafde5850f8807"></span><a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <code class="sig-name descname">migrations</code><a class="headerlink" href="#c.tsk_bookmark_t.migrations" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The position in the migration table. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_bookmark_t.sites">
<span class="target" id="structtsk__bookmark__t_1ac87ec7b24b924682b0d942540c4f2c05"></span><a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <code class="sig-name descname">sites</code><a class="headerlink" href="#c.tsk_bookmark_t.sites" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The position in the site table. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_bookmark_t.mutations">
<span class="target" id="structtsk__bookmark__t_1addd6eccb97a00f4a2bb890e1ef621c89"></span><a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <code class="sig-name descname">mutations</code><a class="headerlink" href="#c.tsk_bookmark_t.mutations" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The position in the mutation table. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_bookmark_t.populations">
<span class="target" id="structtsk__bookmark__t_1a2c3d1ca2a3c7f962eca32cce1ee08aa8"></span><a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <code class="sig-name descname">populations</code><a class="headerlink" href="#c.tsk_bookmark_t.populations" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The position in the population table. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_bookmark_t.provenances">
<span class="target" id="structtsk__bookmark__t_1a26151fe1d1475cac6c6fa9d5ab18a1ee"></span><a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <code class="sig-name descname">provenances</code><a class="headerlink" href="#c.tsk_bookmark_t.provenances" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The position in the provenance table. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_table_collection_init">
<span class="target" id="group___t_a_b_l_e___c_o_l_l_e_c_t_i_o_n___a_p_i___g_r_o_u_p_1gade1c247dbe4e9ffb9fe690dad77a6dee"></span>int <code class="sig-name descname">tsk_table_collection_init</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_table_collection_t" title="tsk_table_collection_t">tsk_table_collection_t</a> *<em>self</em>, <a class="reference internal" href="#c.tsk_flags_t" title="tsk_flags_t">tsk_flags_t</a> <em>options</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_table_collection_init" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Initialises the table collection by allocating the internal memory and initialising all the constituent tables. </p>
<p><p><p>This must be called before any operations are performed on the table
collection. See the <a class="reference internal" href="#sec-c-api-overview-structure"><span class="std std-ref">API structure</span></a> for details on how objects
are initialised and freed.</p>
<p><strong>Options</strong></p>
<p>Options can be specified by providing one or more of the following bitwise
flags:</p>
<dl class="simple">
<dt>TSK_NO_EDGE_METADATA</dt><dd><p>Do not allocate space to store metadata in the edge table. Operations
attempting to add non-empty metadata to the edge table will fail
with error TSK_ERR_METADATA_DISABLED.</p>
</dd>
</dl>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return 0 on success or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to an uninitialised <a class="reference internal" href="#structtsk__table__collection__t"><span class="std std-ref">tsk_table_collection_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">options</span></code>: Allocation time options. Currently unused; should be set to zero to ensure compatibility with later versions of tskit. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_table_collection_free">
<span class="target" id="group___t_a_b_l_e___c_o_l_l_e_c_t_i_o_n___a_p_i___g_r_o_u_p_1ga043e1665798d38dd6ca6b875af3df36a"></span>int <code class="sig-name descname">tsk_table_collection_free</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_table_collection_t" title="tsk_table_collection_t">tsk_table_collection_t</a> *<em>self</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_table_collection_free" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Free the internal memory for the specified table collection. </p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Always returns 0. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to an initialised <a class="reference internal" href="#structtsk__table__collection__t"><span class="std std-ref">tsk_table_collection_t</span></a> object. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_table_collection_clear">
<span class="target" id="group___t_a_b_l_e___c_o_l_l_e_c_t_i_o_n___a_p_i___g_r_o_u_p_1gafd25e45f0b52b75eb2e92dec7d01f128"></span>int <code class="sig-name descname">tsk_table_collection_clear</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_table_collection_t" title="tsk_table_collection_t">tsk_table_collection_t</a> *<em>self</em>, <a class="reference internal" href="#c.tsk_flags_t" title="tsk_flags_t">tsk_flags_t</a> <em>options</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_table_collection_clear" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Clears data tables (and optionally provenances and metadata) in this table collection. </p>
<p><p><p>By default this operation clears all tables except the provenance table, retaining
table metadata schemas and the tree-sequnce level metadata and schema.</p>
<p><strong>Options</strong></p>
<p>Options can be specified by providing one or more of the following bitwise
flags:</p>
<dl class="simple">
<dt>TSK_CLEAR_PROVENANCE</dt><dd><p>Additionally clear the provenance table</p>
</dd>
<dt>TSK_CLEAR_METADATA_SCHEMAS</dt><dd><p>Additionally clear the table metadata schemas</p>
</dd>
<dt>TSK_CLEAR_TS_METADATA_AND_SCHEMA</dt><dd><p>Additionally clear the tree-sequence metadata and schema</p>
</dd>
</dl>
<p>No memory is freed as a result of this operation; please use
<a class="reference internal" href="#c.tsk_table_collection_free" title="tsk_table_collection_free"><code class="xref c c-func docutils literal notranslate"><span class="pre">tsk_table_collection_free()</span></code></a> to free internal resources.</p>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return 0 on success or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__table__collection__t"><span class="std std-ref">tsk_table_collection_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">options</span></code>: Bitwise clearing options </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_table_collection_equals">
<span class="target" id="group___t_a_b_l_e___c_o_l_l_e_c_t_i_o_n___a_p_i___g_r_o_u_p_1ga8d959de5fed8fd7e4fc110223c165a09"></span>bool <code class="sig-name descname">tsk_table_collection_equals</code><span class="sig-paren">(</span><em class="property">const</em> <a class="reference internal" href="#c.tsk_table_collection_t" title="tsk_table_collection_t">tsk_table_collection_t</a> *<em>self</em>, <em class="property">const</em> <a class="reference internal" href="#c.tsk_table_collection_t" title="tsk_table_collection_t">tsk_table_collection_t</a> *<em>other</em>, <a class="reference internal" href="#c.tsk_flags_t" title="tsk_flags_t">tsk_flags_t</a> <em>options</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_table_collection_equals" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Returns true if the data in the specified table collection is equal to the data in this table collection. </p>
<p><p><p>Returns true if the two table collections are equal. The indexes are
not considered as these are derived from the tables. We also do not
consider the <code class="docutils literal notranslate"><span class="pre">file_uuid</span></code>, since it is a property of the file that set
of tables is stored in.</p>
<p><strong>Options</strong></p>
<p>Options to control the comparison can be specified by providing one or
more of the following bitwise flags. By default (options=0) two table
collections are considered equal if all of the tables are byte-wise
identical, and the sequence lengths, metadata and metadata schemas
of the two table collections are identical.</p>
<dl class="simple">
<dt>TSK_CMP_IGNORE_PROVENANCE</dt><dd><p>Do not include the provenance table in comparison.</p>
</dd>
<dt>TSK_CMP_IGNORE_METADATA</dt><dd><p>Do not include metadata when comparing the table collections.
This includes both the top-level tree sequence metadata as well as the
metadata for each of the tables (i.e, TSK_CMP_IGNORE_TS_METADATA is implied).
All metadata schemas are also ignored.</p>
</dd>
<dt>TSK_CMP_IGNORE_TS_METADATA</dt><dd><p>Do not include the top-level tree sequence metadata and metadata schemas
in the comparison.</p>
</dd>
<dt>TSK_CMP_IGNORE_TIMESTAMPS</dt><dd><p>Do not include the timestamp information when comparing the provenance
tables. This has no effect if TSK_CMP_IGNORE_PROVENANCE is specified.</p>
</dd>
</dl>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return true if the specified table collection is equal to this table. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__table__collection__t"><span class="std std-ref">tsk_table_collection_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">other</span></code>: A pointer to a <a class="reference internal" href="#structtsk__table__collection__t"><span class="std std-ref">tsk_table_collection_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">options</span></code>: Bitwise comparison options. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_table_collection_copy">
<span class="target" id="group___t_a_b_l_e___c_o_l_l_e_c_t_i_o_n___a_p_i___g_r_o_u_p_1gaefa80e243fcb5740293b60f29e75b794"></span>int <code class="sig-name descname">tsk_table_collection_copy</code><span class="sig-paren">(</span><em class="property">const</em> <a class="reference internal" href="#c.tsk_table_collection_t" title="tsk_table_collection_t">tsk_table_collection_t</a> *<em>self</em>, <a class="reference internal" href="#c.tsk_table_collection_t" title="tsk_table_collection_t">tsk_table_collection_t</a> *<em>dest</em>, <a class="reference internal" href="#c.tsk_flags_t" title="tsk_flags_t">tsk_flags_t</a> <em>options</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_table_collection_copy" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Copies the state of this table collection into the specified destination. </p>
<p><p><p>By default the method initialises the specified destination table. If the
destination is already initialised, the <a class="reference internal" href="#c.TSK_NO_INIT" title="TSK_NO_INIT"><code class="xref c c-macro docutils literal notranslate"><span class="pre">TSK_NO_INIT</span></code></a> option should
be supplied to avoid leaking memory.</p>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return 0 on success or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__table__collection__t"><span class="std std-ref">tsk_table_collection_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dest</span></code>: A pointer to a <a class="reference internal" href="#structtsk__table__collection__t"><span class="std std-ref">tsk_table_collection_t</span></a> object. If the TSK_NO_INIT option is specified, this must be an initialised provenance table. If not, it must be an uninitialised provenance table. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">options</span></code>: Bitwise option flags. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_table_collection_print_state">
<span class="target" id="group___t_a_b_l_e___c_o_l_l_e_c_t_i_o_n___a_p_i___g_r_o_u_p_1gaf9bf5e6fab44f2dfd98e8f60ff133406"></span>void <code class="sig-name descname">tsk_table_collection_print_state</code><span class="sig-paren">(</span><em class="property">const</em> <a class="reference internal" href="#c.tsk_table_collection_t" title="tsk_table_collection_t">tsk_table_collection_t</a> *<em>self</em>, FILE *<em>out</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_table_collection_print_state" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Print out the state of this table collection to the specified stream. </p>
<p>This method is intended for debugging purposes and should not be used in production code. The format of the output should <strong>not</strong> be depended on and may change arbitrarily between versions.</p>
<p><dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__table__collection__t"><span class="std std-ref">tsk_table_collection_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">out</span></code>: The stream to write the summary to. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_table_collection_load">
<span class="target" id="group___t_a_b_l_e___c_o_l_l_e_c_t_i_o_n___a_p_i___g_r_o_u_p_1gacba45f7097d54490763c0e0242fa8c2e"></span>int <code class="sig-name descname">tsk_table_collection_load</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_table_collection_t" title="tsk_table_collection_t">tsk_table_collection_t</a> *<em>self</em>, <em class="property">const</em> char *<em>filename</em>, <a class="reference internal" href="#c.tsk_flags_t" title="tsk_flags_t">tsk_flags_t</a> <em>options</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_table_collection_load" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Load a table collection from a file path. </p>
<p><p><p>Loads the data from the specified file into this table collection.
By default, the table collection is also initialised.
The resources allocated must be freed using
<a class="reference internal" href="#c.tsk_table_collection_free" title="tsk_table_collection_free"><code class="xref c c-func docutils literal notranslate"><span class="pre">tsk_table_collection_free()</span></code></a> even in error conditions.</p>
<p>If the <a class="reference internal" href="#c.TSK_NO_INIT" title="TSK_NO_INIT"><code class="xref c c-macro docutils literal notranslate"><span class="pre">TSK_NO_INIT</span></code></a> option is set, the table collection is
not initialised, allowing an already initialised table collection to
be overwritten with the data from a file.</p>
<p>If the file contains multiple table collections, this function will load
the first. Please see the <a class="reference internal" href="#c.tsk_table_collection_loadf" title="tsk_table_collection_loadf"><code class="xref c c-func docutils literal notranslate"><span class="pre">tsk_table_collection_loadf()</span></code></a> for details
on how to sequentially load table collections from a stream.</p>
<p><strong>Options</strong></p>
<p>Options can be specified by providing one or more of the following bitwise
flags:</p>
<dl class="simple">
<dt>TSK_NO_INIT</dt><dd><p>Do not initialise this <a class="reference internal" href="#c.tsk_table_collection_t" title="tsk_table_collection_t"><code class="xref c c-type docutils literal notranslate"><span class="pre">tsk_table_collection_t</span></code></a> before loading.</p>
</dd>
</dl>
<p><strong>Examples</strong></p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span> <span class="n">ret</span><span class="p">;</span>
<span class="n">tsk_table_collection_t</span> <span class="n">tables</span><span class="p">;</span>
<span class="n">ret</span> <span class="o">=</span> <span class="n">tsk_table_collection_load</span><span class="p">(</span><span class="o">&amp;</span><span class="n">tables</span><span class="p">,</span> <span class="s">&quot;data.trees&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">ret</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span> <span class="s">&quot;Load error:%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">tsk_strerror</span><span class="p">(</span><span class="n">ret</span><span class="p">));</span>
    <span class="n">exit</span><span class="p">(</span><span class="n">EXIT_FAILURE</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return 0 on success or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to an uninitialised <a class="reference internal" href="#structtsk__table__collection__t"><span class="std std-ref">tsk_table_collection_t</span></a> object if the TSK_NO_INIT option is not set (default), or an initialised <a class="reference internal" href="#structtsk__table__collection__t"><span class="std std-ref">tsk_table_collection_t</span></a> otherwise. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">filename</span></code>: A NULL terminated string containing the filename. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">options</span></code>: Bitwise options. See above for details. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_table_collection_loadf">
<span class="target" id="group___t_a_b_l_e___c_o_l_l_e_c_t_i_o_n___a_p_i___g_r_o_u_p_1ga07ac4970005ea7ee0201e15deff37f99"></span>int <code class="sig-name descname">tsk_table_collection_loadf</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_table_collection_t" title="tsk_table_collection_t">tsk_table_collection_t</a> *<em>self</em>, FILE *<em>file</em>, <a class="reference internal" href="#c.tsk_flags_t" title="tsk_flags_t">tsk_flags_t</a> <em>options</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_table_collection_loadf" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Load a table collection from a stream. </p>
<p><p><p>Loads a tables definition from the specified file stream to this table
collection. By default, the table collection is also initialised.
The resources allocated must be freed using
<a class="reference internal" href="#c.tsk_table_collection_free" title="tsk_table_collection_free"><code class="xref c c-func docutils literal notranslate"><span class="pre">tsk_table_collection_free()</span></code></a> even in error conditions.</p>
<p>If the <a class="reference internal" href="#c.TSK_NO_INIT" title="TSK_NO_INIT"><code class="xref c c-macro docutils literal notranslate"><span class="pre">TSK_NO_INIT</span></code></a> option is set, the table collection is
not initialised, allowing an already initialised table collection to
be overwritten with the data from a file.</p>
<p>If the stream contains multiple table collection definitions, this function
will load the next table collection from the stream. If the stream contains no
more table collection definitions the error value <a class="reference internal" href="#c.TSK_ERR_EOF" title="TSK_ERR_EOF"><code class="xref c c-macro docutils literal notranslate"><span class="pre">TSK_ERR_EOF</span></code></a> will
be returned. Note that EOF is only returned in the case where zero bytes are
read from the stream — malformed files or other errors will result in
different error conditions. Please see the
<a class="reference internal" href="#sec-c-api-examples-file-streaming"><span class="std std-ref">File streaming</span></a> section for an example of how to
sequentially load tree sequences from a stream.</p>
<p><strong>Options</strong></p>
<p>Options can be specified by providing one or more of the following bitwise
flags:</p>
<dl class="simple">
<dt>TSK_NO_INIT</dt><dd><p>Do not initialise this <a class="reference internal" href="#c.tsk_table_collection_t" title="tsk_table_collection_t"><code class="xref c c-type docutils literal notranslate"><span class="pre">tsk_table_collection_t</span></code></a> before loading.</p>
</dd>
</dl>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return 0 on success or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to an uninitialised <a class="reference internal" href="#structtsk__table__collection__t"><span class="std std-ref">tsk_table_collection_t</span></a> object if the TSK_NO_INIT option is not set (default), or an initialised <a class="reference internal" href="#structtsk__table__collection__t"><span class="std std-ref">tsk_table_collection_t</span></a> otherwise. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">file</span></code>: A FILE stream opened in an appropriate mode for reading (e.g. “r”, “r+” or “w+”) positioned at the beginning of a table collection definition. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">options</span></code>: Bitwise options. See above for details. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_table_collection_dump">
<span class="target" id="group___t_a_b_l_e___c_o_l_l_e_c_t_i_o_n___a_p_i___g_r_o_u_p_1ga6863d87b14ed11f03086531f82c4753f"></span>int <code class="sig-name descname">tsk_table_collection_dump</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_table_collection_t" title="tsk_table_collection_t">tsk_table_collection_t</a> *<em>self</em>, <em class="property">const</em> char *<em>filename</em>, <a class="reference internal" href="#c.tsk_flags_t" title="tsk_flags_t">tsk_flags_t</a> <em>options</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_table_collection_dump" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Write a table collection to file. </p>
<p><p><p>Writes the data from this table collection to the specified file.
Usually we expect that data written to a file will be in a form that
can be read directly and used to create a tree sequence; that is, we
assume that by default the tables are <a class="reference internal" href="data-model.html#sec-table-sorting"><span class="std std-ref">sorted</span></a>
and <a class="reference internal" href="data-model.html#sec-table-indexes"><span class="std std-ref">indexed</span></a>. Following these
assumptions, if the tables are not already indexed, we index the tables
before writing to file to save the cost of building these indexes at
load time. This behaviour requires that the tables are sorted.
If this automatic indexing is not desired, it can be disabled using
the <cite>TSK_NO_BUILD_INDEXES</cite> option.</p>
<p>If an error occurs the file path is deleted, ensuring that only complete
and well formed files will be written.</p>
<p><strong>Options</strong></p>
<p>Options can be specified by providing one or more of the following bitwise
flags:</p>
<dl class="simple">
<dt>TSK_NO_BUILD_INDEXES</dt><dd><p>Do not build indexes for this table before writing to file. This is useful
if you wish to write unsorted tables to file, as building the indexes
will raise an error if the table is unsorted.</p>
</dd>
</dl>
<p><strong>Examples</strong></p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span> <span class="n">ret</span><span class="p">;</span>
<span class="n">tsk_table_collection_t</span> <span class="n">tables</span><span class="p">;</span>

<span class="n">ret</span> <span class="o">=</span> <span class="n">tsk_table_collection_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">tables</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="n">error_check</span><span class="p">(</span><span class="n">ret</span><span class="p">);</span>
<span class="n">tables</span><span class="p">.</span><span class="n">sequence_length</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">;</span>
<span class="c1">// Write out the empty tree sequence</span>
<span class="n">ret</span> <span class="o">=</span> <span class="n">tsk_table_collection_dump</span><span class="p">(</span><span class="o">&amp;</span><span class="n">tables</span><span class="p">,</span> <span class="s">&quot;empty.trees&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="n">error_check</span><span class="p">(</span><span class="n">ret</span><span class="p">);</span>
</pre></div>
</div>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return 0 on success or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to an initialised <a class="reference internal" href="#structtsk__table__collection__t"><span class="std std-ref">tsk_table_collection_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">filename</span></code>: A NULL terminated string containing the filename. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">options</span></code>: Bitwise options. See above for details. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_table_collection_dumpf">
<span class="target" id="group___t_a_b_l_e___c_o_l_l_e_c_t_i_o_n___a_p_i___g_r_o_u_p_1gafdb002257c7a133f328376c8811be50f"></span>int <code class="sig-name descname">tsk_table_collection_dumpf</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_table_collection_t" title="tsk_table_collection_t">tsk_table_collection_t</a> *<em>self</em>, FILE *<em>file</em>, <a class="reference internal" href="#c.tsk_flags_t" title="tsk_flags_t">tsk_flags_t</a> <em>options</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_table_collection_dumpf" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Write a table collection to a stream. </p>
<p><p><p>Writes the data from this table collection to the specified FILE stream.
Semantics are identical to <a class="reference internal" href="#c.tsk_table_collection_dump" title="tsk_table_collection_dump"><code class="xref c c-func docutils literal notranslate"><span class="pre">tsk_table_collection_dump()</span></code></a>.</p>
<p>Please see the <a class="reference internal" href="#sec-c-api-examples-file-streaming"><span class="std std-ref">File streaming</span></a> section for an example
of how to sequentially dump and load tree sequences from a stream.</p>
<p><strong>Options</strong></p>
<p>Options can be specified by providing one or more of the following bitwise
flags:</p>
<dl class="simple">
<dt>TSK_NO_BUILD_INDEXES</dt><dd><p>Do not build indexes for this table before writing to file. This is useful
if you wish to write unsorted tables to file, as building the indexes
will raise an error if the table is unsorted.</p>
</dd>
</dl>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return 0 on success or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to an initialised <a class="reference internal" href="#structtsk__table__collection__t"><span class="std std-ref">tsk_table_collection_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">file</span></code>: A FILE stream opened in an appropriate mode for writing (e.g. “w”, “a”, “r+” or “w+”). </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">options</span></code>: Bitwise options. See above for details. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_table_collection_record_num_rows">
<span class="target" id="group___t_a_b_l_e___c_o_l_l_e_c_t_i_o_n___a_p_i___g_r_o_u_p_1ga8612ce93902506bcd77822687d80f622"></span>int <code class="sig-name descname">tsk_table_collection_record_num_rows</code><span class="sig-paren">(</span><em class="property">const</em> <a class="reference internal" href="#c.tsk_table_collection_t" title="tsk_table_collection_t">tsk_table_collection_t</a> *<em>self</em>, <a class="reference internal" href="#c.tsk_bookmark_t" title="tsk_bookmark_t">tsk_bookmark_t</a> *<em>bookmark</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_table_collection_record_num_rows" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Record the number of rows in each table in the specified <a class="reference internal" href="#structtsk__bookmark__t"><span class="std std-ref">tsk_bookmark_t</span></a> object. </p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return 0 on success or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to an initialised <a class="reference internal" href="#structtsk__table__collection__t"><span class="std std-ref">tsk_table_collection_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bookmark</span></code>: A pointer to a <a class="reference internal" href="#structtsk__bookmark__t"><span class="std std-ref">tsk_bookmark_t</span></a> which is updated to contain the number of rows in all tables. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_table_collection_truncate">
<span class="target" id="group___t_a_b_l_e___c_o_l_l_e_c_t_i_o_n___a_p_i___g_r_o_u_p_1ga3d1067849cc92fb142acbb3f6ac3489e"></span>int <code class="sig-name descname">tsk_table_collection_truncate</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_table_collection_t" title="tsk_table_collection_t">tsk_table_collection_t</a> *<em>self</em>, <a class="reference internal" href="#c.tsk_bookmark_t" title="tsk_bookmark_t">tsk_bookmark_t</a> *<em>bookmark</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_table_collection_truncate" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Truncates the tables in this table collection according to the specified bookmark. </p>
<p><p><p>Truncate the tables in this collection so that each one has the number
of rows specified in the parameter <a class="reference internal" href="#c.tsk_bookmark_t" title="tsk_bookmark_t"><code class="xref c c-type docutils literal notranslate"><span class="pre">tsk_bookmark_t</span></code></a>. Use the
<a class="reference internal" href="#c.tsk_table_collection_record_num_rows" title="tsk_table_collection_record_num_rows"><code class="xref c c-func docutils literal notranslate"><span class="pre">tsk_table_collection_record_num_rows()</span></code></a> function to record the
number rows for each table in a table collection at a particular time.</p>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return 0 on success or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__individual__table__t"><span class="std std-ref">tsk_individual_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bookmark</span></code>: The number of rows to retain in each table. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_table_collection_sort">
<span class="target" id="group___t_a_b_l_e___c_o_l_l_e_c_t_i_o_n___a_p_i___g_r_o_u_p_1gabfe4eec1e871d20f899fbd78d7e379be"></span>int <code class="sig-name descname">tsk_table_collection_sort</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_table_collection_t" title="tsk_table_collection_t">tsk_table_collection_t</a> *<em>self</em>, <em class="property">const</em> <a class="reference internal" href="#c.tsk_bookmark_t" title="tsk_bookmark_t">tsk_bookmark_t</a> *<em>start</em>, <a class="reference internal" href="#c.tsk_flags_t" title="tsk_flags_t">tsk_flags_t</a> <em>options</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_table_collection_sort" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Sorts the tables in this collection. </p>
<p><p><p>Some of the tables in a table collection must satisfy specific sortedness requirements
in order to define a <a class="reference internal" href="data-model.html#sec-valid-tree-sequence-requirements"><span class="std std-ref">valid tree sequence</span></a>.
This method sorts the <code class="docutils literal notranslate"><span class="pre">edge</span></code>, <code class="docutils literal notranslate"><span class="pre">site</span></code> and <code class="docutils literal notranslate"><span class="pre">mutation</span></code> tables such that
these requirements are guaranteed to be fulfilled. The <code class="docutils literal notranslate"><span class="pre">individual</span></code>,
<code class="docutils literal notranslate"><span class="pre">node</span></code>, <code class="docutils literal notranslate"><span class="pre">population</span></code> and <code class="docutils literal notranslate"><span class="pre">provenance</span></code> tables do not have any sortedness
requirements, and are therefore ignored by this method.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The current implementation <strong>may</strong> sort in such a way that exceeds
these requirements, but this behaviour should not be relied upon and later
versions may weaken the level of sortedness. However, the method does <strong>guarantee</strong>
that the resulting tables describes a valid tree sequence.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Sorting migrations is currently not supported and an error will be raised
if a table collection containing a non-empty migration table is specified.</p>
</div>
<p>The specified <a class="reference internal" href="#c.tsk_bookmark_t" title="tsk_bookmark_t"><code class="xref c c-type docutils literal notranslate"><span class="pre">tsk_bookmark_t</span></code></a> allows us to specify a start position
for sorting in each of the tables; rows before this value are assumed to already be
in sorted order and this information is used to make sorting more efficient.
Positions in tables that are not sorted (<code class="docutils literal notranslate"><span class="pre">individual</span></code>, <code class="docutils literal notranslate"><span class="pre">node</span></code>, <code class="docutils literal notranslate"><span class="pre">population</span></code>
and <code class="docutils literal notranslate"><span class="pre">provenance</span></code>) are ignored and can be set to arbitrary values.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The current implementation only supports specifying a start
position for the <code class="docutils literal notranslate"><span class="pre">edge</span></code> table and in a limited form for the
<code class="docutils literal notranslate"><span class="pre">site</span></code> and <code class="docutils literal notranslate"><span class="pre">mutation</span></code> tables. Specifying a non-zero <code class="docutils literal notranslate"><span class="pre">migration</span></code>,
start position results in an error. The start positions for the
<code class="docutils literal notranslate"><span class="pre">site</span></code> and <code class="docutils literal notranslate"><span class="pre">mutation</span></code> tables can either be 0 or the length of the
respective tables, allowing these tables to either be fully sorted, or
not sorted at all.</p>
</div>
<p>The table collection will always be unindexed after sort successfully completes.</p>
<p>See the <a class="reference internal" href="data-model.html#sec-table-sorting"><span class="std std-ref">table sorting</span></a> section for more details.
For more control over the sorting process, see the
<a class="reference internal" href="#sec-c-api-low-level-sorting"><span class="std std-ref">Low-level sorting</span></a> section.</p>
<p><strong>Options</strong></p>
<p>Options can be specified by providing one or more of the following bitwise
flags:</p>
<dl class="simple">
<dt>TSK_NO_CHECK_INTEGRITY</dt><dd><p>Do not run integrity checks using
<a class="reference internal" href="#c.tsk_table_collection_check_integrity" title="tsk_table_collection_check_integrity"><code class="xref c c-func docutils literal notranslate"><span class="pre">tsk_table_collection_check_integrity()</span></code></a> before sorting,
potentially leading to a small reduction in execution time. This
performance optimisation should not be used unless the calling code can
guarantee reference integrity within the table collection. References
to rows not in the table or bad offsets will result in undefined
behaviour.</p>
</dd>
</dl>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return 0 on success or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__individual__table__t"><span class="std std-ref">tsk_individual_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">start</span></code>: The position to begin sorting in each table; all rows less than this position must fulfill the tree sequence sortedness requirements. If this is NULL, sort all rows. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">options</span></code>: Sort options. Currently unused; should be set to zero to ensure compatibility with later versions of tskit. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_table_collection_simplify">
<span class="target" id="group___t_a_b_l_e___c_o_l_l_e_c_t_i_o_n___a_p_i___g_r_o_u_p_1gac246f379b40f37b580704ffdf8d06d7e"></span>int <code class="sig-name descname">tsk_table_collection_simplify</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_table_collection_t" title="tsk_table_collection_t">tsk_table_collection_t</a> *<em>self</em>, <em class="property">const</em> <a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> *<em>samples</em>, <a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <em>num_samples</em>, <a class="reference internal" href="#c.tsk_flags_t" title="tsk_flags_t">tsk_flags_t</a> <em>options</em>, <a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> *<em>node_map</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_table_collection_simplify" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Simplify the tables to remove redundant information. </p>
<p><p><p>Simplification transforms the tables to remove redundancy and canonicalise
tree sequence data. See the <a class="reference internal" href="data-model.html#sec-table-simplification"><span class="std std-ref">simplification</span></a> section for
more details.</p>
<p>A mapping from the node IDs in the table before simplification to their equivalent
values after simplification can be obtained via the <code class="docutils literal notranslate"><span class="pre">node_map</span></code> argument. If this
is non NULL, <code class="docutils literal notranslate"><span class="pre">node_map[u]</span></code> will contain the new ID for node <code class="docutils literal notranslate"><span class="pre">u</span></code> after simplification,
or <code class="docutils literal notranslate"><span class="pre">TSK_NULL</span></code> if the node has been removed. Thus, <code class="docutils literal notranslate"><span class="pre">node_map</span></code> must be an array of
at least <code class="docutils literal notranslate"><span class="pre">self-&gt;nodes.num_rows</span></code> <a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t"><code class="xref c c-type docutils literal notranslate"><span class="pre">tsk_id_t</span></code></a> values.</p>
<p><strong>Options</strong>:</p>
<p>Options can be specified by providing one or more of the following bitwise
flags:</p>
<dl class="simple">
<dt>TSK_FILTER_SITES</dt><dd><p>Remove sites from the output if there are no mutations that reference them.</p>
</dd>
<dt>TSK_FILTER_POPULATIONS</dt><dd><p>Remove populations from the output if there are no nodes or migrations that
reference them.</p>
</dd>
<dt>TSK_FILTER_INDIVIDUALS</dt><dd><p>Remove individuals from the output if there are no nodes that reference them.</p>
</dd>
<dt>TSK_REDUCE_TO_SITE_TOPOLOGY</dt><dd><p>Reduce the topological information in the tables to the minimum necessary to
represent the trees that contain sites. If there are zero sites this will
result in an zero output edges. When the number of sites is greater than zero,
every tree in the output tree sequence will contain at least one site.
For a given site, the topology of the tree containing that site will be
identical (up to node ID remapping) to the topology of the corresponding tree
in the input.</p>
</dd>
<dt>TSK_KEEP_UNARY</dt><dd><p>By default simplify removes unary nodes (i.e., nodes with exactly one child)
along the path from samples to root. If this option is specified such unary
nodes will be preserved in the output.</p>
</dd>
<dt>TSK_KEEP_INPUT_ROOTS</dt><dd><p>By default simplify removes all topology ancestral the MRCAs of the samples.
This option inserts edges from these MRCAs back to the roots of the input
trees.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Migrations are currently not supported by simplify, and an error will
be raised if we attempt call simplify on a table collection with greater
than zero migrations. See <a class="reference external" href="https://github.com/tskit-dev/tskit/issues/20">https://github.com/tskit-dev/tskit/issues/20</a></p>
</div>
<p>The table collection will always be unindexed after simplify successfully
completes.</p>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return 0 on success or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__individual__table__t"><span class="std std-ref">tsk_individual_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">samples</span></code>: Either NULL or an array of num_samples distinct and valid node IDs. If non-null the nodes in this array will be marked as samples in the output. If NULL, the num_samples parameter is ignored and the samples in the output will be the same as the samples in the input. This is equivalent to populating the samples array with all of the sample nodes in the input in increasing order of ID. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">num_samples</span></code>: The number of node IDs in the input samples array. Ignored if the samples array is NULL. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">options</span></code>: Simplify options; see above for the available bitwise flags. For the default behaviour, a value of 0 should be provided. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">node_map</span></code>: If not NULL, this array will be filled to define the mapping between nodes IDs in the table collection before and after simplification. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_table_collection_subset">
<span class="target" id="group___t_a_b_l_e___c_o_l_l_e_c_t_i_o_n___a_p_i___g_r_o_u_p_1ga2e2d7a724b1641a4de6486ac9120a170"></span>int <code class="sig-name descname">tsk_table_collection_subset</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_table_collection_t" title="tsk_table_collection_t">tsk_table_collection_t</a> *<em>self</em>, <em class="property">const</em> <a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> *<em>nodes</em>, <a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <em>num_nodes</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_table_collection_subset" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Subsets and reorders a table collection according to an array of nodes. </p>
<p><p><p>Reduces the table collection to contain only the entries referring to
the provided list of nodes, with nodes reordered according to the order
they appear in the <code class="docutils literal notranslate"><span class="pre">nodes</span></code> argument. Specifically, this subsets and reorders
each of the tables as follows:</p>
<ol class="arabic simple">
<li><p>Nodes: if in the list of nodes, and in the order provided.</p></li>
<li><p>Individuals and Populations: if referred to by a retained node,
and in the order first seen when traversing the list of retained nodes.</p></li>
<li><p>Edges: if both parent and child are retained nodes.</p></li>
<li><p>Mutations: if the mutation’s node is a retained node.</p></li>
<li><p>Sites: if any mutations remain at the site after removing mutations.</p></li>
</ol>
<p>Retained edges, mutations, and sites appear in the same
order as in the original tables.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">nodes</span></code> is the entire list of nodes in the tables, then the
resulting tables will be identical to the original tables, but with
nodes (and individuals and populations) reordered.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Migrations are currently not supported by susbset, and an error will
be raised if we attempt call subset on a table collection with greater
than zero migrations.</p>
</div>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return 0 on success or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__table__collection__t"><span class="std std-ref">tsk_table_collection_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nodes</span></code>: An array of num_nodes valid node IDs. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">num_nodes</span></code>: The number of node IDs in the input nodes array. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_table_collection_union">
<span class="target" id="group___t_a_b_l_e___c_o_l_l_e_c_t_i_o_n___a_p_i___g_r_o_u_p_1ga330f817f8d35836c5198b2c3ac0e2402"></span>int <code class="sig-name descname">tsk_table_collection_union</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_table_collection_t" title="tsk_table_collection_t">tsk_table_collection_t</a> *<em>self</em>, <em class="property">const</em> <a class="reference internal" href="#c.tsk_table_collection_t" title="tsk_table_collection_t">tsk_table_collection_t</a> *<em>other</em>, <em class="property">const</em> <a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> *<em>other_node_mapping</em>, <a class="reference internal" href="#c.tsk_flags_t" title="tsk_flags_t">tsk_flags_t</a> <em>options</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_table_collection_union" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Forms the node-wise union of two table collections. </p>
<p><p><p>Expands this table collection by adding the non-shared portions of another table
collection to itself. The <code class="docutils literal notranslate"><span class="pre">other_node_mapping</span></code> encodes which nodes in <code class="docutils literal notranslate"><span class="pre">other</span></code> are
equivalent to a node in <code class="docutils literal notranslate"><span class="pre">self</span></code>. The positions in the <code class="docutils literal notranslate"><span class="pre">other_node_mapping</span></code> array
correspond to node ids in <code class="docutils literal notranslate"><span class="pre">other</span></code>, and the elements encode the equivalent
node id in <code class="docutils literal notranslate"><span class="pre">self</span></code> or TSK_NULL if the node is exclusive to <code class="docutils literal notranslate"><span class="pre">other</span></code>. Nodes
that are exclusive <code class="docutils literal notranslate"><span class="pre">other</span></code> are added to <code class="docutils literal notranslate"><span class="pre">self</span></code>, along with:</p>
<ol class="arabic simple">
<li><p>Individuals which are new to <code class="docutils literal notranslate"><span class="pre">self</span></code>.</p></li>
<li><p>Edges whose parent or child are new to <code class="docutils literal notranslate"><span class="pre">self</span></code>.</p></li>
<li><p>Sites which were not present in <code class="docutils literal notranslate"><span class="pre">self</span></code>.</p></li>
<li><p>Mutations whose nodes are new to <code class="docutils literal notranslate"><span class="pre">self</span></code>.</p></li>
</ol>
<p>By default, populations of newly added nodes are assumed to be new populations,
and added to the population table as well.</p>
<p>This operation will also sort the resulting tables, so the tables may change
even if nothing new is added, if the original tables were not sorted.</p>
<p><strong>Options</strong>:</p>
<p>Options can be specified by providing one or more of the following bitwise
flags:</p>
<dl class="simple">
<dt>TSK_UNION_NO_CHECK_SHARED</dt><dd><p>By default, union checks that the portion of shared history between
<code class="docutils literal notranslate"><span class="pre">self</span></code> and <code class="docutils literal notranslate"><span class="pre">other</span></code>, as implied by <code class="docutils literal notranslate"><span class="pre">other_node_mapping</span></code>, are indeed
equivalent. It does so by subsetting both <code class="docutils literal notranslate"><span class="pre">self</span></code> and <code class="docutils literal notranslate"><span class="pre">other</span></code> on the
equivalent nodes specified in <code class="docutils literal notranslate"><span class="pre">other_node_mapping</span></code>, and then checking for
equality of the subsets.</p>
</dd>
<dt>TSK_UNION_NO_ADD_POP</dt><dd><p>By default, all nodes new to <code class="docutils literal notranslate"><span class="pre">self</span></code> are assigned new populations. If this
option is specified, nodes that are added to <code class="docutils literal notranslate"><span class="pre">self</span></code> will retain the
population IDs they have in <code class="docutils literal notranslate"><span class="pre">other</span></code>.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Migrations are currently not supported by union, and an error will
be raised if we attempt call union on a table collection with migrations.</p>
</div>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return 0 on success or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__table__collection__t"><span class="std std-ref">tsk_table_collection_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">other</span></code>: A pointer to a <a class="reference internal" href="#structtsk__table__collection__t"><span class="std std-ref">tsk_table_collection_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">other_node_mapping</span></code>: An array of node IDs that relate nodes in other to nodes in self: the k-th element of other_node_mapping should be the index of the equivalent node in self, or TSK_NULL if the node is not present in self (in which case it will be added to self). </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">options</span></code>: Union options; see above for the available bitwise flags. For the default behaviour, a value of 0 should be provided. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_table_collection_set_metadata">
<span class="target" id="group___t_a_b_l_e___c_o_l_l_e_c_t_i_o_n___a_p_i___g_r_o_u_p_1ga4e5f19a0801656596c75467f49ef06d9"></span>int <code class="sig-name descname">tsk_table_collection_set_metadata</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_table_collection_t" title="tsk_table_collection_t">tsk_table_collection_t</a> *<em>self</em>, <em class="property">const</em> char *<em>metadata</em>, <a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <em>metadata_length</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_table_collection_set_metadata" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Set the metadata. </p>
<p><p><p>Copies the metadata string to this table collection, replacing any existing.</p>
</p>
 <dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return 0 on success or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__table__collection__t"><span class="std std-ref">tsk_table_collection_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">metadata</span></code>: A pointer to a char array </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">metadata_length</span></code>: The size of the metadata in bytes. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_table_collection_set_metadata_schema">
<span class="target" id="group___t_a_b_l_e___c_o_l_l_e_c_t_i_o_n___a_p_i___g_r_o_u_p_1ga17dada0c0e78a4a0b4745e0eaec4003b"></span>int <code class="sig-name descname">tsk_table_collection_set_metadata_schema</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_table_collection_t" title="tsk_table_collection_t">tsk_table_collection_t</a> *<em>self</em>, <em class="property">const</em> char *<em>metadata_schema</em>, <a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <em>metadata_schema_length</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_table_collection_set_metadata_schema" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Set the metadata schema. </p>
<p><p><p>Copies the metadata schema string to this table collection, replacing any existing.</p>
</p>
 <dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return 0 on success or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__table__collection__t"><span class="std std-ref">tsk_table_collection_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">metadata_schema</span></code>: A pointer to a char array </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">metadata_schema_length</span></code>: The size of the metadata schema in bytes. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_table_collection_has_index">
<span class="target" id="group___t_a_b_l_e___c_o_l_l_e_c_t_i_o_n___a_p_i___g_r_o_u_p_1gafa80e4988654ff3a42d4eaef23113b47"></span>bool <code class="sig-name descname">tsk_table_collection_has_index</code><span class="sig-paren">(</span><em class="property">const</em> <a class="reference internal" href="#c.tsk_table_collection_t" title="tsk_table_collection_t">tsk_table_collection_t</a> *<em>self</em>, <a class="reference internal" href="#c.tsk_flags_t" title="tsk_flags_t">tsk_flags_t</a> <em>options</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_table_collection_has_index" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Returns true if this table collection is indexed. </p>
<p><p><p>This method returns true if the table collection has an index
for the edge table. It guarantees that the index exists, and that
it is for the same number of edges that are in the edge table. It
does <em>not</em> guarantee that the index is valid (i.e., if the rows
in the edge have been permuted in some way since the index was built).</p>
<p>See the <a class="reference internal" href="#sec-c-api-table-indexes"><span class="std std-ref">Table indexes</span></a> section for details on the index
life-cycle.</p>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return true if there is an index present for this table collection. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__table__collection__t"><span class="std std-ref">tsk_table_collection_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">options</span></code>: Bitwise options. Currently unused; should be set to zero to ensure compatibility with later versions of tskit. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_table_collection_drop_index">
<span class="target" id="group___t_a_b_l_e___c_o_l_l_e_c_t_i_o_n___a_p_i___g_r_o_u_p_1ga6499760341734267ff7b4d1d1e48f59c"></span>int <code class="sig-name descname">tsk_table_collection_drop_index</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_table_collection_t" title="tsk_table_collection_t">tsk_table_collection_t</a> *<em>self</em>, <a class="reference internal" href="#c.tsk_flags_t" title="tsk_flags_t">tsk_flags_t</a> <em>options</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_table_collection_drop_index" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Deletes the indexes for this table collection. </p>
<p><p><p>Unconditionally drop the indexes that may be present for this table collection. It
is not an error to call this method on an unindexed table collection.
See the <a class="reference internal" href="#sec-c-api-table-indexes"><span class="std std-ref">Table indexes</span></a> section for details on the index
life-cycle.</p>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Always returns 0. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__table__collection__t"><span class="std std-ref">tsk_table_collection_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">options</span></code>: Bitwise options. Currently unused; should be set to zero to ensure compatibility with later versions of tskit. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_table_collection_build_index">
<span class="target" id="group___t_a_b_l_e___c_o_l_l_e_c_t_i_o_n___a_p_i___g_r_o_u_p_1gad9156485b1a21790aace699c6b524502"></span>int <code class="sig-name descname">tsk_table_collection_build_index</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_table_collection_t" title="tsk_table_collection_t">tsk_table_collection_t</a> *<em>self</em>, <a class="reference internal" href="#c.tsk_flags_t" title="tsk_flags_t">tsk_flags_t</a> <em>options</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_table_collection_build_index" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Builds indexes for this table collection. </p>
<p><p><p>Builds the tree traversal <a class="reference internal" href="data-model.html#sec-table-indexes"><span class="std std-ref">indexes</span></a> for this table
collection. Any existing index is first dropped using
<a class="reference internal" href="#c.tsk_table_collection_drop_index" title="tsk_table_collection_drop_index"><code class="xref c c-func docutils literal notranslate"><span class="pre">tsk_table_collection_drop_index()</span></code></a>. See the
<a class="reference internal" href="#sec-c-api-table-indexes"><span class="std std-ref">Table indexes</span></a> section for details on the index life-cycle.</p>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return 0 on success or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__table__collection__t"><span class="std std-ref">tsk_table_collection_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">options</span></code>: Bitwise options. Currently unused; should be set to zero to ensure compatibility with later versions of tskit. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_table_collection_set_indexes">
<span class="target" id="group___t_a_b_l_e___c_o_l_l_e_c_t_i_o_n___a_p_i___g_r_o_u_p_1ga9e6a2b646335df04014fb6f668fd37de"></span>int <code class="sig-name descname">tsk_table_collection_set_indexes</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_table_collection_t" title="tsk_table_collection_t">tsk_table_collection_t</a> *<em>self</em>, <a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> *<em>edge_insertion_order</em>, <a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> *<em>edge_removal_order</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_table_collection_set_indexes" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Sets the edge insertion/removal index for this table collection. </p>
<p><p><p>This method sets the edge insertion/removal index for this table collection
The index arrays should have the same number of edges that are in the
edge table. The index is not checked for validity.</p>
<p>See the <a class="reference internal" href="#sec-c-api-table-indexes"><span class="std std-ref">Table indexes</span></a> section for details on the index
life-cycle.</p>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return 0 on success or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__table__collection__t"><span class="std std-ref">tsk_table_collection_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">edge_insertion_order</span></code>: Array of tsk_id_t edge ids. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">edge_removal_order</span></code>: Array of tsk_id_t edge ids. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_table_collection_check_integrity">
<span class="target" id="group___t_a_b_l_e___c_o_l_l_e_c_t_i_o_n___a_p_i___g_r_o_u_p_1ga0dffccc43df921f3c6a27cf6795593ea"></span><a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> <code class="sig-name descname">tsk_table_collection_check_integrity</code><span class="sig-paren">(</span><em class="property">const</em> <a class="reference internal" href="#c.tsk_table_collection_t" title="tsk_table_collection_t">tsk_table_collection_t</a> *<em>self</em>, <a class="reference internal" href="#c.tsk_flags_t" title="tsk_flags_t">tsk_flags_t</a> <em>options</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_table_collection_check_integrity" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Runs integrity checks on this table collection. </p>
<p><p><p>Checks the integrity of this table collection. The default checks (i.e., with
options = 0) guarantee the integrity of memory and entity references within the
table collection. All spatial values (along the genome) are checked
to see if they are finite values and within the required bounds. Time values
are checked to see if they are finite or marked as unknown.</p>
<p>To check if a set of tables fulfills the <a class="reference internal" href="data-model.html#sec-valid-tree-sequence-requirements"><span class="std std-ref">requirements</span></a> needed for a valid tree sequence, use
the TSK_CHECK_TREES option. When this method is called with TSK_CHECK_TREES,
the number of trees in the tree sequence is returned. Thus, to check for errors
client code should verify that the return value is less than zero. All other
options will return zero on success and a negative value on failure.</p>
<p>More fine-grained checks can be achieved using bitwise combinations of the
other options.</p>
<p><strong>Options</strong>:</p>
<p>Options can be specified by providing one or more of the following bitwise
flags:</p>
<dl class="simple">
<dt>TSK_CHECK_EDGE_ORDERING</dt><dd><p>Check edge ordering constraints for a tree sequence.</p>
</dd>
<dt>TSK_CHECK_SITE_ORDERING</dt><dd><p>Check that sites are in nondecreasing position order.</p>
</dd>
<dt>TSK_CHECK_SITE_DUPLICATES</dt><dd><p>Check for any duplicate site positions.</p>
</dd>
<dt>TSK_CHECK_MUTATION_ORDERING</dt><dd><p>Check contraints on the ordering of mutations. Any non-null
mutation parents and known times are checked for ordering
constraints.</p>
</dd>
<dt>TSK_CHECK_INDEXES</dt><dd><p>Check that the table indexes exist, and contain valid edge
references.</p>
</dd>
<dt>TSK_CHECK_TREES</dt><dd><p>All checks needed to define a valid tree sequence. Note that
this implies all of the above checks.</p>
</dd>
</dl>
<p>It is sometimes useful to disregard some parts of the data model
when performing checks:</p>
<dl class="simple">
<dt>TSK_NO_CHECK_POPULATION_REFS</dt><dd><p>Do not check integrity of references to populations. This
can be safely combined with the other checks.</p>
</dd>
</dl>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return a negative error value on if any problems are detected in the tree sequence. If the TSK_CHECK_TREES option is provided, the number of trees in the tree sequence will be returned, on success. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__table__collection__t"><span class="std std-ref">tsk_table_collection_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">options</span></code>: Bitwise options. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="section" id="individuals">
<h3>Individuals<a class="headerlink" href="#individuals" title="Permalink to this headline">¶</a></h3>
<dl class="c struct">
<dt id="c.tsk_individual_t">
<span class="target" id="structtsk__individual__t"></span><em class="property">struct </em><code class="sig-name descname">tsk_individual_t</code><a class="headerlink" href="#c.tsk_individual_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>A single individual defined by a row in the individual table. </p>
<p><p><p>See the <a class="reference internal" href="data-model.html#sec-data-model-definitions"><span class="std std-ref">data model</span></a> section for the definition of
an individual and its properties.</p>
</p>
 </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Members</p>
<dl class="c var">
<dt id="c.tsk_individual_t.id">
<span class="target" id="structtsk__individual__t_1a098a09783c1c67c9fe7474239a0187bb"></span><a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> <code class="sig-name descname">id</code><a class="headerlink" href="#c.tsk_individual_t.id" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Non-negative ID value corresponding to table row. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_individual_t.flags">
<span class="target" id="structtsk__individual__t_1a8c1a775f6bf2ddb0a918f9ed205aa079"></span><a class="reference internal" href="#c.tsk_flags_t" title="tsk_flags_t">tsk_flags_t</a> <code class="sig-name descname">flags</code><a class="headerlink" href="#c.tsk_individual_t.flags" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Bitwise flags. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_individual_t.location">
<span class="target" id="structtsk__individual__t_1adea9073402b828362791cb74a25f6e5a"></span><em class="property">const</em> double *<code class="sig-name descname">location</code><a class="headerlink" href="#c.tsk_individual_t.location" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Spatial location. The number of dimensions is defined by <code class="docutils literal notranslate"><span class="pre">location_length</span></code>. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_individual_t.location_length">
<span class="target" id="structtsk__individual__t_1a07581eeec37d2d85e019033d8556b2c1"></span><a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <code class="sig-name descname">location_length</code><a class="headerlink" href="#c.tsk_individual_t.location_length" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Number of spatial dimensions. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_individual_t.metadata">
<span class="target" id="structtsk__individual__t_1ade9c5680dc51a034ceb679fc61f025c1"></span><em class="property">const</em> char *<code class="sig-name descname">metadata</code><a class="headerlink" href="#c.tsk_individual_t.metadata" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Metadata. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_individual_t.metadata_length">
<span class="target" id="structtsk__individual__t_1a8baafcbd9877860fcad02f9350a0b2b3"></span><a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <code class="sig-name descname">metadata_length</code><a class="headerlink" href="#c.tsk_individual_t.metadata_length" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Size of the metadata in bytes. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="c struct">
<dt id="c.tsk_individual_table_t">
<span class="target" id="structtsk__individual__table__t"></span><em class="property">struct </em><code class="sig-name descname">tsk_individual_table_t</code><a class="headerlink" href="#c.tsk_individual_table_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The individual table. </p>
<p><p><p>See the individual <a class="reference internal" href="data-model.html#sec-individual-table-definition"><span class="std std-ref">table definition</span></a> for
details of the columns in this table.</p>
</p>
 </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Members</p>
<dl class="c var">
<dt id="c.tsk_individual_table_t.num_rows">
<span class="target" id="structtsk__individual__table__t_1a9a204d42ae303fd917987ad0c580ab59"></span><a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <code class="sig-name descname">num_rows</code><a class="headerlink" href="#c.tsk_individual_table_t.num_rows" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The number of rows in this table. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_individual_table_t.location_length">
<span class="target" id="structtsk__individual__table__t_1a07581eeec37d2d85e019033d8556b2c1"></span><a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <code class="sig-name descname">location_length</code><a class="headerlink" href="#c.tsk_individual_table_t.location_length" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The total length of the location column. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_individual_table_t.metadata_length">
<span class="target" id="structtsk__individual__table__t_1a8baafcbd9877860fcad02f9350a0b2b3"></span><a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <code class="sig-name descname">metadata_length</code><a class="headerlink" href="#c.tsk_individual_table_t.metadata_length" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The total length of the metadata column. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_individual_table_t.flags">
<span class="target" id="structtsk__individual__table__t_1a78463db8ca13e5df2899da0788a1115e"></span><a class="reference internal" href="#c.tsk_flags_t" title="tsk_flags_t">tsk_flags_t</a> *<code class="sig-name descname">flags</code><a class="headerlink" href="#c.tsk_individual_table_t.flags" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The flags column. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_individual_table_t.location">
<span class="target" id="structtsk__individual__table__t_1a43c4cebb732302d6122df31abd759733"></span>double *<code class="sig-name descname">location</code><a class="headerlink" href="#c.tsk_individual_table_t.location" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The location column. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_individual_table_t.location_offset">
<span class="target" id="structtsk__individual__table__t_1a912f0407b27b30ee4adf359fa94e41f6"></span><a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> *<code class="sig-name descname">location_offset</code><a class="headerlink" href="#c.tsk_individual_table_t.location_offset" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The location_offset column. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_individual_table_t.metadata">
<span class="target" id="structtsk__individual__table__t_1ace70beae1a71187d5961a8d7c0dafb7b"></span>char *<code class="sig-name descname">metadata</code><a class="headerlink" href="#c.tsk_individual_table_t.metadata" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The metadata column. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_individual_table_t.metadata_offset">
<span class="target" id="structtsk__individual__table__t_1aa5d4b8d0fd9121dcd7618098bfdd9a50"></span><a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> *<code class="sig-name descname">metadata_offset</code><a class="headerlink" href="#c.tsk_individual_table_t.metadata_offset" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The metadata_offset column. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_individual_table_t.metadata_schema">
<span class="target" id="structtsk__individual__table__t_1ae529f60b9eb4e1faaca99066fa4da00f"></span>char *<code class="sig-name descname">metadata_schema</code><a class="headerlink" href="#c.tsk_individual_table_t.metadata_schema" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The metadata schema. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_individual_table_init">
<span class="target" id="group___i_n_d_i_v_i_d_u_a_l___t_a_b_l_e___a_p_i___g_r_o_u_p_1ga52d2331a47e917d3c2a43e68af42718b"></span>int <code class="sig-name descname">tsk_individual_table_init</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_individual_table_t" title="tsk_individual_table_t">tsk_individual_table_t</a> *<em>self</em>, <a class="reference internal" href="#c.tsk_flags_t" title="tsk_flags_t">tsk_flags_t</a> <em>options</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_individual_table_init" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Initialises the table by allocating the internal memory. </p>
<p><p><p>This must be called before any operations are performed on the table.
See the <a class="reference internal" href="#sec-c-api-overview-structure"><span class="std std-ref">API structure</span></a> for details on how objects
are initialised and freed.</p>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return 0 on success or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to an uninitialised <a class="reference internal" href="#structtsk__individual__table__t"><span class="std std-ref">tsk_individual_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">options</span></code>: Allocation time options. Currently unused; should be set to zero to ensure compatibility with later versions of tskit. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_individual_table_free">
<span class="target" id="group___i_n_d_i_v_i_d_u_a_l___t_a_b_l_e___a_p_i___g_r_o_u_p_1ga0be23718890ab421ccb2e4ec249af4ee"></span>int <code class="sig-name descname">tsk_individual_table_free</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_individual_table_t" title="tsk_individual_table_t">tsk_individual_table_t</a> *<em>self</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_individual_table_free" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Free the internal memory for the specified table. </p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Always returns 0. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to an initialised <a class="reference internal" href="#structtsk__individual__table__t"><span class="std std-ref">tsk_individual_table_t</span></a> object. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_individual_table_add_row">
<span class="target" id="group___i_n_d_i_v_i_d_u_a_l___t_a_b_l_e___a_p_i___g_r_o_u_p_1ga5a46e1a3f75aee2f44ac32050aaf7f40"></span><a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> <code class="sig-name descname">tsk_individual_table_add_row</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_individual_table_t" title="tsk_individual_table_t">tsk_individual_table_t</a> *<em>self</em>, <a class="reference internal" href="#c.tsk_flags_t" title="tsk_flags_t">tsk_flags_t</a> <em>flags</em>, <em class="property">const</em> double *<em>location</em>, <a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <em>location_length</em>, <em class="property">const</em> char *<em>metadata</em>, <a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <em>metadata_length</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_individual_table_add_row" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Adds a row to this individual table. </p>
<p><p><p>Add a new individual with the specified <code class="docutils literal notranslate"><span class="pre">flags</span></code>, <code class="docutils literal notranslate"><span class="pre">location</span></code> and <code class="docutils literal notranslate"><span class="pre">metadata</span></code>
to the table. Copies of the <code class="docutils literal notranslate"><span class="pre">location</span></code> and <code class="docutils literal notranslate"><span class="pre">metadata</span></code> parameters are taken
immediately.
See the <a class="reference internal" href="data-model.html#sec-individual-table-definition"><span class="std std-ref">table definition</span></a> for details
of the columns in this table.</p>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return the ID of the newly added individual on success, or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__individual__table__t"><span class="std std-ref">tsk_individual_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">flags</span></code>: The bitwise flags for the new individual. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">location</span></code>: A pointer to a double array representing the spatial location of the new individual. Can be <code class="docutils literal notranslate"><span class="pre">NULL</span></code> if <code class="docutils literal notranslate"><span class="pre">location_length</span></code> is 0. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">location_length</span></code>: The number of dimensions in the locations position. Note this the number of elements in the corresponding double array not the number of bytes. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">metadata</span></code>: The metadata to be associated with the new individual. This is a pointer to arbitrary memory. Can be <code class="docutils literal notranslate"><span class="pre">NULL</span></code> if <code class="docutils literal notranslate"><span class="pre">metadata_length</span></code> is 0. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">metadata_length</span></code>: The size of the metadata array in bytes. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_individual_table_clear">
<span class="target" id="group___i_n_d_i_v_i_d_u_a_l___t_a_b_l_e___a_p_i___g_r_o_u_p_1ga688dc929c2f2f8904c1a9b49af92609a"></span>int <code class="sig-name descname">tsk_individual_table_clear</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_individual_table_t" title="tsk_individual_table_t">tsk_individual_table_t</a> *<em>self</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_individual_table_clear" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Clears this table, setting the number of rows to zero. </p>
<p><p><p>No memory is freed as a result of this operation; please use
<a class="reference internal" href="#c.tsk_individual_table_free" title="tsk_individual_table_free"><code class="xref c c-func docutils literal notranslate"><span class="pre">tsk_individual_table_free()</span></code></a> to free the table’s internal resources. Note that the
metadata schema is not cleared.</p>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return 0 on success or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__individual__table__t"><span class="std std-ref">tsk_individual_table_t</span></a> object. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_individual_table_truncate">
<span class="target" id="group___i_n_d_i_v_i_d_u_a_l___t_a_b_l_e___a_p_i___g_r_o_u_p_1ga6b1367a92112d60c249e0dce3737a668"></span>int <code class="sig-name descname">tsk_individual_table_truncate</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_individual_table_t" title="tsk_individual_table_t">tsk_individual_table_t</a> *<em>self</em>, <a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <em>num_rows</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_individual_table_truncate" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Truncates this table so that only the first num_rows are retained. </p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return 0 on success or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__individual__table__t"><span class="std std-ref">tsk_individual_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">num_rows</span></code>: The number of rows to retain in the table. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_individual_table_equals">
<span class="target" id="group___i_n_d_i_v_i_d_u_a_l___t_a_b_l_e___a_p_i___g_r_o_u_p_1gaab0702e937c3dcccd707b947dca973f3"></span>bool <code class="sig-name descname">tsk_individual_table_equals</code><span class="sig-paren">(</span><em class="property">const</em> <a class="reference internal" href="#c.tsk_individual_table_t" title="tsk_individual_table_t">tsk_individual_table_t</a> *<em>self</em>, <em class="property">const</em> <a class="reference internal" href="#c.tsk_individual_table_t" title="tsk_individual_table_t">tsk_individual_table_t</a> *<em>other</em>, <a class="reference internal" href="#c.tsk_flags_t" title="tsk_flags_t">tsk_flags_t</a> <em>options</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_individual_table_equals" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Returns true if the data in the specified table is identical to the data in this table. </p>
<p><p><p><strong>Options</strong></p>
<p>Options to control the comparison can be specified by providing one or
more of the following bitwise flags. By default (options=0) tables are
considered equal if they are byte-wise identical in all columns,
and their metadata schemas are byte-wise identical.</p>
<dl class="simple">
<dt>TSK_CMP_IGNORE_METADATA</dt><dd><p>Do not include metadata or metadata schemas in the comparison.</p>
</dd>
</dl>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return true if the specified table is equal to this table. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__individual__table__t"><span class="std std-ref">tsk_individual_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">other</span></code>: A pointer to a <a class="reference internal" href="#structtsk__individual__table__t"><span class="std std-ref">tsk_individual_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">options</span></code>: Bitwise comparison options. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_individual_table_copy">
<span class="target" id="group___i_n_d_i_v_i_d_u_a_l___t_a_b_l_e___a_p_i___g_r_o_u_p_1ga385b22df74db453d03f62c55aded5915"></span>int <code class="sig-name descname">tsk_individual_table_copy</code><span class="sig-paren">(</span><em class="property">const</em> <a class="reference internal" href="#c.tsk_individual_table_t" title="tsk_individual_table_t">tsk_individual_table_t</a> *<em>self</em>, <a class="reference internal" href="#c.tsk_individual_table_t" title="tsk_individual_table_t">tsk_individual_table_t</a> *<em>dest</em>, <a class="reference internal" href="#c.tsk_flags_t" title="tsk_flags_t">tsk_flags_t</a> <em>options</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_individual_table_copy" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Copies the state of this table into the specified destination. </p>
<p><p><p>By default the method initialises the specified destination table. If the
destination is already initialised, the <a class="reference internal" href="#c.TSK_NO_INIT" title="TSK_NO_INIT"><code class="xref c c-macro docutils literal notranslate"><span class="pre">TSK_NO_INIT</span></code></a> option should
be supplied to avoid leaking memory.</p>
<p>Indexes that are present are also copied to the destination table.</p>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return 0 on success or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__individual__table__t"><span class="std std-ref">tsk_individual_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dest</span></code>: A pointer to a <a class="reference internal" href="#structtsk__individual__table__t"><span class="std std-ref">tsk_individual_table_t</span></a> object. If the TSK_NO_INIT option is specified, this must be an initialised individual table. If not, it must be an uninitialised individual table. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">options</span></code>: Bitwise option flags. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_individual_table_get_row">
<span class="target" id="group___i_n_d_i_v_i_d_u_a_l___t_a_b_l_e___a_p_i___g_r_o_u_p_1ga5ccc3a52754aefd0ddd73a13a87fe132"></span>int <code class="sig-name descname">tsk_individual_table_get_row</code><span class="sig-paren">(</span><em class="property">const</em> <a class="reference internal" href="#c.tsk_individual_table_t" title="tsk_individual_table_t">tsk_individual_table_t</a> *<em>self</em>, <a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> <em>index</em>, <a class="reference internal" href="#c.tsk_individual_t" title="tsk_individual_t">tsk_individual_t</a> *<em>row</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_individual_table_get_row" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Get the row at the specified index. </p>
<p><p><p>Updates the specified individual struct to reflect the values in the specified row.
Pointers to memory within this struct are handled by the table and should <strong>not</strong>
be freed by client code. These pointers are guaranteed to be valid until the
next operation that modifies the table (e.g., by adding a new row), but not afterwards.</p>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return 0 on success or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__individual__table__t"><span class="std std-ref">tsk_individual_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">index</span></code>: The requested table row. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">row</span></code>: A pointer to a <a class="reference internal" href="#structtsk__individual__t"><span class="std std-ref">tsk_individual_t</span></a> struct that is updated to reflect the values in the specified row. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_individual_table_set_metadata_schema">
<span class="target" id="group___i_n_d_i_v_i_d_u_a_l___t_a_b_l_e___a_p_i___g_r_o_u_p_1ga76065e9c9209a67e67dc2684353e8dca"></span>int <code class="sig-name descname">tsk_individual_table_set_metadata_schema</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_individual_table_t" title="tsk_individual_table_t">tsk_individual_table_t</a> *<em>self</em>, <em class="property">const</em> char *<em>metadata_schema</em>, <a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <em>metadata_schema_length</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_individual_table_set_metadata_schema" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Set the metadata schema. </p>
<p><p><p>Copies the metadata schema string to this table, replacing any existing.</p>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return 0 on success or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__individual__table__t"><span class="std std-ref">tsk_individual_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">metadata_schema</span></code>: A pointer to a char array </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">metadata_schema_length</span></code>: The size of the metadata schema in bytes. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_individual_table_print_state">
<span class="target" id="group___i_n_d_i_v_i_d_u_a_l___t_a_b_l_e___a_p_i___g_r_o_u_p_1ga2ea47a01a2e6a8ff54709315ce2632bb"></span>void <code class="sig-name descname">tsk_individual_table_print_state</code><span class="sig-paren">(</span><em class="property">const</em> <a class="reference internal" href="#c.tsk_individual_table_t" title="tsk_individual_table_t">tsk_individual_table_t</a> *<em>self</em>, FILE *<em>out</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_individual_table_print_state" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Print out the state of this table to the specified stream. </p>
<p>This method is intended for debugging purposes and should not be used in production code. The format of the output should <strong>not</strong> be depended on and may change arbitrarily between versions.</p>
<p><dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__individual__table__t"><span class="std std-ref">tsk_individual_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">out</span></code>: The stream to write the summary to. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="section" id="nodes">
<h3>Nodes<a class="headerlink" href="#nodes" title="Permalink to this headline">¶</a></h3>
<dl class="c struct">
<dt id="c.tsk_node_t">
<span class="target" id="structtsk__node__t"></span><em class="property">struct </em><code class="sig-name descname">tsk_node_t</code><a class="headerlink" href="#c.tsk_node_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>A single node defined by a row in the node table. </p>
<p><p><p>See the <a class="reference internal" href="data-model.html#sec-data-model-definitions"><span class="std std-ref">data model</span></a> section for the definition of
a node and its properties.</p>
</p>
 </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Members</p>
<dl class="c var">
<dt id="c.tsk_node_t.id">
<span class="target" id="structtsk__node__t_1a098a09783c1c67c9fe7474239a0187bb"></span><a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> <code class="sig-name descname">id</code><a class="headerlink" href="#c.tsk_node_t.id" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Non-negative ID value corresponding to table row. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_node_t.flags">
<span class="target" id="structtsk__node__t_1a8c1a775f6bf2ddb0a918f9ed205aa079"></span><a class="reference internal" href="#c.tsk_flags_t" title="tsk_flags_t">tsk_flags_t</a> <code class="sig-name descname">flags</code><a class="headerlink" href="#c.tsk_node_t.flags" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Bitwise flags. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_node_t.time">
<span class="target" id="structtsk__node__t_1ab2d5aa7fce1a14d8bddfb2c333ea9679"></span>double <code class="sig-name descname">time</code><a class="headerlink" href="#c.tsk_node_t.time" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Time. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_node_t.population">
<span class="target" id="structtsk__node__t_1a203762bc953fc408e687939f6f3c14dc"></span><a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> <code class="sig-name descname">population</code><a class="headerlink" href="#c.tsk_node_t.population" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Population ID. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_node_t.individual">
<span class="target" id="structtsk__node__t_1a7eebd48ac12d959154e6a97101460426"></span><a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> <code class="sig-name descname">individual</code><a class="headerlink" href="#c.tsk_node_t.individual" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Individual ID. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_node_t.metadata">
<span class="target" id="structtsk__node__t_1ade9c5680dc51a034ceb679fc61f025c1"></span><em class="property">const</em> char *<code class="sig-name descname">metadata</code><a class="headerlink" href="#c.tsk_node_t.metadata" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Metadata. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_node_t.metadata_length">
<span class="target" id="structtsk__node__t_1a8baafcbd9877860fcad02f9350a0b2b3"></span><a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <code class="sig-name descname">metadata_length</code><a class="headerlink" href="#c.tsk_node_t.metadata_length" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Size of the metadata in bytes. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="c struct">
<dt id="c.tsk_node_table_t">
<span class="target" id="structtsk__node__table__t"></span><em class="property">struct </em><code class="sig-name descname">tsk_node_table_t</code><a class="headerlink" href="#c.tsk_node_table_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The node table. </p>
<p><p><p>See the node <a class="reference internal" href="data-model.html#sec-node-table-definition"><span class="std std-ref">table definition</span></a> for
details of the columns in this table.</p>
</p>
 </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Members</p>
<dl class="c var">
<dt id="c.tsk_node_table_t.num_rows">
<span class="target" id="structtsk__node__table__t_1a9a204d42ae303fd917987ad0c580ab59"></span><a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <code class="sig-name descname">num_rows</code><a class="headerlink" href="#c.tsk_node_table_t.num_rows" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The number of rows in this table. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_node_table_t.metadata_length">
<span class="target" id="structtsk__node__table__t_1a8baafcbd9877860fcad02f9350a0b2b3"></span><a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <code class="sig-name descname">metadata_length</code><a class="headerlink" href="#c.tsk_node_table_t.metadata_length" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The total length of the metadata column. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_node_table_t.flags">
<span class="target" id="structtsk__node__table__t_1a78463db8ca13e5df2899da0788a1115e"></span><a class="reference internal" href="#c.tsk_flags_t" title="tsk_flags_t">tsk_flags_t</a> *<code class="sig-name descname">flags</code><a class="headerlink" href="#c.tsk_node_table_t.flags" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The flags column. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_node_table_t.time">
<span class="target" id="structtsk__node__table__t_1aa8ee7f1ed4f29ac1aadd955e247641e6"></span>double *<code class="sig-name descname">time</code><a class="headerlink" href="#c.tsk_node_table_t.time" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The time column. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_node_table_t.population">
<span class="target" id="structtsk__node__table__t_1a3e3ac25fab6b4622f2c2d65801e23643"></span><a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> *<code class="sig-name descname">population</code><a class="headerlink" href="#c.tsk_node_table_t.population" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The population column. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_node_table_t.individual">
<span class="target" id="structtsk__node__table__t_1aa4aaed679c5ccf576e0e5ab24a0b59b9"></span><a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> *<code class="sig-name descname">individual</code><a class="headerlink" href="#c.tsk_node_table_t.individual" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The individual column. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_node_table_t.metadata">
<span class="target" id="structtsk__node__table__t_1ace70beae1a71187d5961a8d7c0dafb7b"></span>char *<code class="sig-name descname">metadata</code><a class="headerlink" href="#c.tsk_node_table_t.metadata" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The metadata column. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_node_table_t.metadata_offset">
<span class="target" id="structtsk__node__table__t_1aa5d4b8d0fd9121dcd7618098bfdd9a50"></span><a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> *<code class="sig-name descname">metadata_offset</code><a class="headerlink" href="#c.tsk_node_table_t.metadata_offset" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The metadata_offset column. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_node_table_t.metadata_schema">
<span class="target" id="structtsk__node__table__t_1ae529f60b9eb4e1faaca99066fa4da00f"></span>char *<code class="sig-name descname">metadata_schema</code><a class="headerlink" href="#c.tsk_node_table_t.metadata_schema" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The metadata schema. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_node_table_init">
<span class="target" id="group___n_o_d_e___t_a_b_l_e___a_p_i___g_r_o_u_p_1ga017b17813e7bf628fad8078563e6207c"></span>int <code class="sig-name descname">tsk_node_table_init</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_node_table_t" title="tsk_node_table_t">tsk_node_table_t</a> *<em>self</em>, <a class="reference internal" href="#c.tsk_flags_t" title="tsk_flags_t">tsk_flags_t</a> <em>options</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_node_table_init" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Initialises the table by allocating the internal memory. </p>
<p><p><p>This must be called before any operations are performed on the table.
See the <a class="reference internal" href="#sec-c-api-overview-structure"><span class="std std-ref">API structure</span></a> for details on how objects
are initialised and freed.</p>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return 0 on success or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to an uninitialised <a class="reference internal" href="#structtsk__node__table__t"><span class="std std-ref">tsk_node_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">options</span></code>: Allocation time options. Currently unused; should be set to zero to ensure compatibility with later versions of tskit. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_node_table_free">
<span class="target" id="group___n_o_d_e___t_a_b_l_e___a_p_i___g_r_o_u_p_1gadca336714a2278b6197aeb563d274311"></span>int <code class="sig-name descname">tsk_node_table_free</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_node_table_t" title="tsk_node_table_t">tsk_node_table_t</a> *<em>self</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_node_table_free" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Free the internal memory for the specified table. </p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Always returns 0. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to an initialised <a class="reference internal" href="#structtsk__node__table__t"><span class="std std-ref">tsk_node_table_t</span></a> object. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_node_table_add_row">
<span class="target" id="group___n_o_d_e___t_a_b_l_e___a_p_i___g_r_o_u_p_1ga31ae095f44e97a644e8a03eecf506cff"></span><a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> <code class="sig-name descname">tsk_node_table_add_row</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_node_table_t" title="tsk_node_table_t">tsk_node_table_t</a> *<em>self</em>, <a class="reference internal" href="#c.tsk_flags_t" title="tsk_flags_t">tsk_flags_t</a> <em>flags</em>, double <em>time</em>, <a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> <em>population</em>, <a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> <em>individual</em>, <em class="property">const</em> char *<em>metadata</em>, <a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <em>metadata_length</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_node_table_add_row" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Adds a row to this node table. </p>
<p><p><p>Add a new node with the specified <code class="docutils literal notranslate"><span class="pre">flags</span></code>, <code class="docutils literal notranslate"><span class="pre">time</span></code>, <code class="docutils literal notranslate"><span class="pre">population</span></code>,
<code class="docutils literal notranslate"><span class="pre">individual</span></code> and <code class="docutils literal notranslate"><span class="pre">metadata</span></code> to the table. A copy of the <code class="docutils literal notranslate"><span class="pre">metadata</span></code> parameter
is taken immediately. See the <a class="reference internal" href="data-model.html#sec-node-table-definition"><span class="std std-ref">table definition</span></a>
for details of the columns in this table.</p>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return the ID of the newly added node on success, or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__node__table__t"><span class="std std-ref">tsk_node_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">flags</span></code>: The bitwise flags for the new node. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">time</span></code>: The time for the new node. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">population</span></code>: The population for the new node. Set to TSK_NULL if not known. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">individual</span></code>: The individual for the new node. Set to TSK_NULL if not known. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">metadata</span></code>: The metadata to be associated with the new node. This is a pointer to arbitrary memory. Can be <code class="docutils literal notranslate"><span class="pre">NULL</span></code> if <code class="docutils literal notranslate"><span class="pre">metadata_length</span></code> is 0. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">metadata_length</span></code>: The size of the metadata array in bytes. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_node_table_clear">
<span class="target" id="group___n_o_d_e___t_a_b_l_e___a_p_i___g_r_o_u_p_1ga1a521685265e8cbbb3f100dd7742f557"></span>int <code class="sig-name descname">tsk_node_table_clear</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_node_table_t" title="tsk_node_table_t">tsk_node_table_t</a> *<em>self</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_node_table_clear" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Clears this table, setting the number of rows to zero. </p>
<p><p><p>No memory is freed as a result of this operation; please use
<a class="reference internal" href="#c.tsk_node_table_free" title="tsk_node_table_free"><code class="xref c c-func docutils literal notranslate"><span class="pre">tsk_node_table_free()</span></code></a> to free the table’s internal resources. Note that the
metadata schema is not cleared.</p>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return 0 on success or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__node__table__t"><span class="std std-ref">tsk_node_table_t</span></a> object. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_node_table_truncate">
<span class="target" id="group___n_o_d_e___t_a_b_l_e___a_p_i___g_r_o_u_p_1gaa097a679dc1cddb6bf696943dea5e035"></span>int <code class="sig-name descname">tsk_node_table_truncate</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_node_table_t" title="tsk_node_table_t">tsk_node_table_t</a> *<em>self</em>, <a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <em>num_rows</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_node_table_truncate" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Truncates this table so that only the first num_rows are retained. </p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return 0 on success or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__node__table__t"><span class="std std-ref">tsk_node_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">num_rows</span></code>: The number of rows to retain in the table. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_node_table_equals">
<span class="target" id="group___n_o_d_e___t_a_b_l_e___a_p_i___g_r_o_u_p_1gadb1592e64cc97dacc629f89a7828d164"></span>bool <code class="sig-name descname">tsk_node_table_equals</code><span class="sig-paren">(</span><em class="property">const</em> <a class="reference internal" href="#c.tsk_node_table_t" title="tsk_node_table_t">tsk_node_table_t</a> *<em>self</em>, <em class="property">const</em> <a class="reference internal" href="#c.tsk_node_table_t" title="tsk_node_table_t">tsk_node_table_t</a> *<em>other</em>, <a class="reference internal" href="#c.tsk_flags_t" title="tsk_flags_t">tsk_flags_t</a> <em>options</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_node_table_equals" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Returns true if the data in the specified table is identical to the data in this table. </p>
<p><p><p><strong>Options</strong></p>
<p>Options to control the comparison can be specified by providing one or
more of the following bitwise flags. By default (options=0) tables are
considered equal if they are byte-wise identical in all columns,
and their metadata schemas are byte-wise identical.</p>
<dl class="simple">
<dt>TSK_CMP_IGNORE_METADATA</dt><dd><p>Do not include metadata or metadata schemas in the comparison.</p>
</dd>
</dl>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return true if the specified table is equal to this table. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__node__table__t"><span class="std std-ref">tsk_node_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">other</span></code>: A pointer to a <a class="reference internal" href="#structtsk__node__table__t"><span class="std std-ref">tsk_node_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">options</span></code>: Bitwise comparison options. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_node_table_copy">
<span class="target" id="group___n_o_d_e___t_a_b_l_e___a_p_i___g_r_o_u_p_1ga11f7e120a0b63e6443df956e894d4b80"></span>int <code class="sig-name descname">tsk_node_table_copy</code><span class="sig-paren">(</span><em class="property">const</em> <a class="reference internal" href="#c.tsk_node_table_t" title="tsk_node_table_t">tsk_node_table_t</a> *<em>self</em>, <a class="reference internal" href="#c.tsk_node_table_t" title="tsk_node_table_t">tsk_node_table_t</a> *<em>dest</em>, <a class="reference internal" href="#c.tsk_flags_t" title="tsk_flags_t">tsk_flags_t</a> <em>options</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_node_table_copy" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Copies the state of this table into the specified destination. </p>
<p><p><p>By default the method initialises the specified destination table. If the
destination is already initialised, the <a class="reference internal" href="#c.TSK_NO_INIT" title="TSK_NO_INIT"><code class="xref c c-macro docutils literal notranslate"><span class="pre">TSK_NO_INIT</span></code></a> option should
be supplied to avoid leaking memory.</p>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return 0 on success or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__node__table__t"><span class="std std-ref">tsk_node_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dest</span></code>: A pointer to a <a class="reference internal" href="#structtsk__node__table__t"><span class="std std-ref">tsk_node_table_t</span></a> object. If the TSK_NO_INIT option is specified, this must be an initialised node table. If not, it must be an uninitialised node table. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">options</span></code>: Bitwise option flags. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_node_table_get_row">
<span class="target" id="group___n_o_d_e___t_a_b_l_e___a_p_i___g_r_o_u_p_1gaceb59be6993da7413e00122dbf8ffde9"></span>int <code class="sig-name descname">tsk_node_table_get_row</code><span class="sig-paren">(</span><em class="property">const</em> <a class="reference internal" href="#c.tsk_node_table_t" title="tsk_node_table_t">tsk_node_table_t</a> *<em>self</em>, <a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> <em>index</em>, <a class="reference internal" href="#c.tsk_node_t" title="tsk_node_t">tsk_node_t</a> *<em>row</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_node_table_get_row" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Get the row at the specified index. </p>
<p><p><p>Updates the specified node struct to reflect the values in the specified row.
Pointers to memory within this struct are handled by the table and should <strong>not</strong>
be freed by client code. These pointers are guaranteed to be valid until the
next operation that modifies the table (e.g., by adding a new row), but not afterwards.</p>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return 0 on success or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__node__table__t"><span class="std std-ref">tsk_node_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">index</span></code>: The requested table row. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">row</span></code>: A pointer to a <a class="reference internal" href="#structtsk__node__t"><span class="std std-ref">tsk_node_t</span></a> struct that is updated to reflect the values in the specified row. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_node_table_set_metadata_schema">
<span class="target" id="group___n_o_d_e___t_a_b_l_e___a_p_i___g_r_o_u_p_1ga5505f0e95dca0acbdf2be9e6df201b4f"></span>int <code class="sig-name descname">tsk_node_table_set_metadata_schema</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_node_table_t" title="tsk_node_table_t">tsk_node_table_t</a> *<em>self</em>, <em class="property">const</em> char *<em>metadata_schema</em>, <a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <em>metadata_schema_length</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_node_table_set_metadata_schema" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Set the metadata schema. </p>
<p><p><p>Copies the metadata schema string to this table, replacing any existing.</p>
</p>
 <dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return 0 on success or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__node__table__t"><span class="std std-ref">tsk_node_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">metadata_schema</span></code>: A pointer to a char array </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">metadata_schema_length</span></code>: The size of the metadata schema in bytes. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_node_table_print_state">
<span class="target" id="group___n_o_d_e___t_a_b_l_e___a_p_i___g_r_o_u_p_1ga7dfbc51f03eccdc0c5e35887445a3946"></span>void <code class="sig-name descname">tsk_node_table_print_state</code><span class="sig-paren">(</span><em class="property">const</em> <a class="reference internal" href="#c.tsk_node_table_t" title="tsk_node_table_t">tsk_node_table_t</a> *<em>self</em>, FILE *<em>out</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_node_table_print_state" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Print out the state of this table to the specified stream. </p>
<p>This method is intended for debugging purposes and should not be used in production code. The format of the output should <strong>not</strong> be depended on and may change arbitrarily between versions.</p>
<p><dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__node__table__t"><span class="std std-ref">tsk_node_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">out</span></code>: The stream to write the summary to. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="section" id="edges">
<h3>Edges<a class="headerlink" href="#edges" title="Permalink to this headline">¶</a></h3>
<dl class="c struct">
<dt id="c.tsk_edge_t">
<span class="target" id="structtsk__edge__t"></span><em class="property">struct </em><code class="sig-name descname">tsk_edge_t</code><a class="headerlink" href="#c.tsk_edge_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>A single edge defined by a row in the edge table. </p>
<p><p><p>See the <a class="reference internal" href="data-model.html#sec-data-model-definitions"><span class="std std-ref">data model</span></a> section for the definition of
an edge and its properties.</p>
</p>
 </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Members</p>
<dl class="c var">
<dt id="c.tsk_edge_t.id">
<span class="target" id="structtsk__edge__t_1a098a09783c1c67c9fe7474239a0187bb"></span><a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> <code class="sig-name descname">id</code><a class="headerlink" href="#c.tsk_edge_t.id" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Non-negative ID value corresponding to table row. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_edge_t.parent">
<span class="target" id="structtsk__edge__t_1acc72dc73b5119cdc54a99c9d847f4b55"></span><a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> <code class="sig-name descname">parent</code><a class="headerlink" href="#c.tsk_edge_t.parent" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Parent node ID. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_edge_t.child">
<span class="target" id="structtsk__edge__t_1ad7dee2f317a94d811d4bb46f3cfed3ae"></span><a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> <code class="sig-name descname">child</code><a class="headerlink" href="#c.tsk_edge_t.child" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Child node ID. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_edge_t.left">
<span class="target" id="structtsk__edge__t_1a5eeeb20fab9ff0f54568882b94d57921"></span>double <code class="sig-name descname">left</code><a class="headerlink" href="#c.tsk_edge_t.left" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Left coordinate. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_edge_t.right">
<span class="target" id="structtsk__edge__t_1ab833bacb3fa8d1a189efcbba74f10fa1"></span>double <code class="sig-name descname">right</code><a class="headerlink" href="#c.tsk_edge_t.right" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Right coordinate. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_edge_t.metadata">
<span class="target" id="structtsk__edge__t_1ade9c5680dc51a034ceb679fc61f025c1"></span><em class="property">const</em> char *<code class="sig-name descname">metadata</code><a class="headerlink" href="#c.tsk_edge_t.metadata" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Metadata. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_edge_t.metadata_length">
<span class="target" id="structtsk__edge__t_1a8baafcbd9877860fcad02f9350a0b2b3"></span><a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <code class="sig-name descname">metadata_length</code><a class="headerlink" href="#c.tsk_edge_t.metadata_length" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Size of the metadata in bytes. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="c struct">
<dt id="c.tsk_edge_table_t">
<span class="target" id="structtsk__edge__table__t"></span><em class="property">struct </em><code class="sig-name descname">tsk_edge_table_t</code><a class="headerlink" href="#c.tsk_edge_table_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The edge table. </p>
<p><p><p>See the edge <a class="reference internal" href="data-model.html#sec-edge-table-definition"><span class="std std-ref">table definition</span></a> for
details of the columns in this table.</p>
</p>
 </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Members</p>
<dl class="c var">
<dt id="c.tsk_edge_table_t.num_rows">
<span class="target" id="structtsk__edge__table__t_1a9a204d42ae303fd917987ad0c580ab59"></span><a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <code class="sig-name descname">num_rows</code><a class="headerlink" href="#c.tsk_edge_table_t.num_rows" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The number of rows in this table. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_edge_table_t.metadata_length">
<span class="target" id="structtsk__edge__table__t_1a8baafcbd9877860fcad02f9350a0b2b3"></span><a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <code class="sig-name descname">metadata_length</code><a class="headerlink" href="#c.tsk_edge_table_t.metadata_length" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The total length of the metadata column. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_edge_table_t.left">
<span class="target" id="structtsk__edge__table__t_1a39c7d5c86d4a9e9a5e4577b377fd21b2"></span>double *<code class="sig-name descname">left</code><a class="headerlink" href="#c.tsk_edge_table_t.left" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The left column. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_edge_table_t.right">
<span class="target" id="structtsk__edge__table__t_1ad2e19c1329a6cba985b8c57f8d1884d9"></span>double *<code class="sig-name descname">right</code><a class="headerlink" href="#c.tsk_edge_table_t.right" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The right column. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_edge_table_t.parent">
<span class="target" id="structtsk__edge__table__t_1a46da4afff95627d99f17ba698625383b"></span><a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> *<code class="sig-name descname">parent</code><a class="headerlink" href="#c.tsk_edge_table_t.parent" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The parent column. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_edge_table_t.child">
<span class="target" id="structtsk__edge__table__t_1a842327e523cdc7979e8f3824d16a0d8d"></span><a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> *<code class="sig-name descname">child</code><a class="headerlink" href="#c.tsk_edge_table_t.child" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The child column. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_edge_table_t.metadata">
<span class="target" id="structtsk__edge__table__t_1ace70beae1a71187d5961a8d7c0dafb7b"></span>char *<code class="sig-name descname">metadata</code><a class="headerlink" href="#c.tsk_edge_table_t.metadata" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The metadata column. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_edge_table_t.metadata_offset">
<span class="target" id="structtsk__edge__table__t_1aa5d4b8d0fd9121dcd7618098bfdd9a50"></span><a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> *<code class="sig-name descname">metadata_offset</code><a class="headerlink" href="#c.tsk_edge_table_t.metadata_offset" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The metadata_offset column. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_edge_table_t.metadata_schema">
<span class="target" id="structtsk__edge__table__t_1ae529f60b9eb4e1faaca99066fa4da00f"></span>char *<code class="sig-name descname">metadata_schema</code><a class="headerlink" href="#c.tsk_edge_table_t.metadata_schema" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The metadata schema. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_edge_table_t.options">
<span class="target" id="structtsk__edge__table__t_1a7152ba5ac5b8e91c7afee6ff9f57e1d1"></span><a class="reference internal" href="#c.tsk_flags_t" title="tsk_flags_t">tsk_flags_t</a> <code class="sig-name descname">options</code><a class="headerlink" href="#c.tsk_edge_table_t.options" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Flags for this table. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_edge_table_init">
<span class="target" id="group___e_d_g_e___t_a_b_l_e___a_p_i___g_r_o_u_p_1gae16e2d666bfa74df4f7e778bfc9019cc"></span>int <code class="sig-name descname">tsk_edge_table_init</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_edge_table_t" title="tsk_edge_table_t">tsk_edge_table_t</a> *<em>self</em>, <a class="reference internal" href="#c.tsk_flags_t" title="tsk_flags_t">tsk_flags_t</a> <em>options</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_edge_table_init" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Initialises the table by allocating the internal memory. </p>
<p><p><p>This must be called before any operations are performed on the table.
See the <a class="reference internal" href="#sec-c-api-overview-structure"><span class="std std-ref">API structure</span></a> for details on how objects
are initialised and freed.</p>
<p><strong>Options</strong></p>
<p>Options can be specified by providing one or more of the following bitwise
flags:</p>
<dl class="simple">
<dt>TSK_NO_METADATA</dt><dd><p>Do not allocate space to store metadata in this table. Operations
attempting to add non-empty metadata to the table will fail
with error TSK_ERR_METADATA_DISABLED.</p>
</dd>
</dl>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return 0 on success or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to an uninitialised <a class="reference internal" href="#structtsk__edge__table__t"><span class="std std-ref">tsk_edge_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">options</span></code>: Allocation time options. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_edge_table_free">
<span class="target" id="group___e_d_g_e___t_a_b_l_e___a_p_i___g_r_o_u_p_1ga7c3542085050715bec079ed81f83da55"></span>int <code class="sig-name descname">tsk_edge_table_free</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_edge_table_t" title="tsk_edge_table_t">tsk_edge_table_t</a> *<em>self</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_edge_table_free" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Free the internal memory for the specified table. </p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Always returns 0. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to an initialised <a class="reference internal" href="#structtsk__edge__table__t"><span class="std std-ref">tsk_edge_table_t</span></a> object. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_edge_table_add_row">
<span class="target" id="group___e_d_g_e___t_a_b_l_e___a_p_i___g_r_o_u_p_1ga3544f9fcefe390960b348c10192b8367"></span><a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> <code class="sig-name descname">tsk_edge_table_add_row</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_edge_table_t" title="tsk_edge_table_t">tsk_edge_table_t</a> *<em>self</em>, double <em>left</em>, double <em>right</em>, <a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> <em>parent</em>, <a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> <em>child</em>, <em class="property">const</em> char *<em>metadata</em>, <a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <em>metadata_length</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_edge_table_add_row" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Adds a row to this edge table. </p>
<p><p><p>Add a new edge with the specified <code class="docutils literal notranslate"><span class="pre">left</span></code>, <code class="docutils literal notranslate"><span class="pre">right</span></code>, <code class="docutils literal notranslate"><span class="pre">parent</span></code>, <code class="docutils literal notranslate"><span class="pre">child</span></code> and
<code class="docutils literal notranslate"><span class="pre">metadata</span></code> to the table. See the <a class="reference internal" href="data-model.html#sec-edge-table-definition"><span class="std std-ref">table definition</span></a>
for details of the columns in this table.</p>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return the ID of the newly added edge on success, or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__edge__table__t"><span class="std std-ref">tsk_edge_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">left</span></code>: The left coordinate for the new edge. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">right</span></code>: The right coordinate for the new edge. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">parent</span></code>: The parent node for the new edge. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">child</span></code>: The child node for the new edge. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">metadata</span></code>: The metadata to be associated with the new edge. This is a pointer to arbitrary memory. Can be <code class="docutils literal notranslate"><span class="pre">NULL</span></code> if <code class="docutils literal notranslate"><span class="pre">metadata_length</span></code> is 0. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">metadata_length</span></code>: The size of the metadata array in bytes.</p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_edge_table_clear">
<span class="target" id="group___e_d_g_e___t_a_b_l_e___a_p_i___g_r_o_u_p_1ga45b71f963e14afe9fe30c65c74afafda"></span>int <code class="sig-name descname">tsk_edge_table_clear</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_edge_table_t" title="tsk_edge_table_t">tsk_edge_table_t</a> *<em>self</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_edge_table_clear" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Clears this table, setting the number of rows to zero. </p>
<p><p><p>No memory is freed as a result of this operation; please use
<a class="reference internal" href="#c.tsk_edge_table_free" title="tsk_edge_table_free"><code class="xref c c-func docutils literal notranslate"><span class="pre">tsk_edge_table_free()</span></code></a> to free the table’s internal resources. Note that the
metadata schema is not cleared.</p>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return 0 on success or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__edge__table__t"><span class="std std-ref">tsk_edge_table_t</span></a> object. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_edge_table_truncate">
<span class="target" id="group___e_d_g_e___t_a_b_l_e___a_p_i___g_r_o_u_p_1ga6820ef622c99eb48903c66edf804c364"></span>int <code class="sig-name descname">tsk_edge_table_truncate</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_edge_table_t" title="tsk_edge_table_t">tsk_edge_table_t</a> *<em>self</em>, <a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <em>num_rows</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_edge_table_truncate" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Truncates this table so that only the first num_rows are retained. </p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return 0 on success or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__edge__table__t"><span class="std std-ref">tsk_edge_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">num_rows</span></code>: The number of rows to retain in the table. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_edge_table_equals">
<span class="target" id="group___e_d_g_e___t_a_b_l_e___a_p_i___g_r_o_u_p_1ga1f316daa2bcd350ef63ac6586bc90514"></span>bool <code class="sig-name descname">tsk_edge_table_equals</code><span class="sig-paren">(</span><em class="property">const</em> <a class="reference internal" href="#c.tsk_edge_table_t" title="tsk_edge_table_t">tsk_edge_table_t</a> *<em>self</em>, <em class="property">const</em> <a class="reference internal" href="#c.tsk_edge_table_t" title="tsk_edge_table_t">tsk_edge_table_t</a> *<em>other</em>, <a class="reference internal" href="#c.tsk_flags_t" title="tsk_flags_t">tsk_flags_t</a> <em>options</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_edge_table_equals" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Returns true if the data in the specified table is identical to the data in this table. </p>
<p><p><p><strong>Options</strong></p>
<p>Options to control the comparison can be specified by providing one or
more of the following bitwise flags. By default (options=0) tables are
considered equal if they are byte-wise identical in all columns,
and their metadata schemas are byte-wise identical.</p>
<dl class="simple">
<dt>TSK_CMP_IGNORE_METADATA</dt><dd><p>Do not include metadata or metadata schemas in the comparison.</p>
</dd>
</dl>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return true if the specified table is equal to this table. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__edge__table__t"><span class="std std-ref">tsk_edge_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">other</span></code>: A pointer to a <a class="reference internal" href="#structtsk__edge__table__t"><span class="std std-ref">tsk_edge_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">options</span></code>: Bitwise comparison options. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_edge_table_copy">
<span class="target" id="group___e_d_g_e___t_a_b_l_e___a_p_i___g_r_o_u_p_1ga73e2d206d48688404688b12ba3378db3"></span>int <code class="sig-name descname">tsk_edge_table_copy</code><span class="sig-paren">(</span><em class="property">const</em> <a class="reference internal" href="#c.tsk_edge_table_t" title="tsk_edge_table_t">tsk_edge_table_t</a> *<em>self</em>, <a class="reference internal" href="#c.tsk_edge_table_t" title="tsk_edge_table_t">tsk_edge_table_t</a> *<em>dest</em>, <a class="reference internal" href="#c.tsk_flags_t" title="tsk_flags_t">tsk_flags_t</a> <em>options</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_edge_table_copy" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Copies the state of this table into the specified destination. </p>
<p><p><p>By default the method initialises the specified destination table. If the
destination is already initialised, the <a class="reference internal" href="#c.TSK_NO_INIT" title="TSK_NO_INIT"><code class="xref c c-macro docutils literal notranslate"><span class="pre">TSK_NO_INIT</span></code></a> option should
be supplied to avoid leaking memory.</p>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return 0 on success or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__edge__table__t"><span class="std std-ref">tsk_edge_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dest</span></code>: A pointer to a <a class="reference internal" href="#structtsk__edge__table__t"><span class="std std-ref">tsk_edge_table_t</span></a> object. If the TSK_NO_INIT option is specified, this must be an initialised edge table. If not, it must be an uninitialised edge table. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">options</span></code>: Bitwise option flags. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_edge_table_get_row">
<span class="target" id="group___e_d_g_e___t_a_b_l_e___a_p_i___g_r_o_u_p_1ga165018253df9a53c78bf593d68bd8b9f"></span>int <code class="sig-name descname">tsk_edge_table_get_row</code><span class="sig-paren">(</span><em class="property">const</em> <a class="reference internal" href="#c.tsk_edge_table_t" title="tsk_edge_table_t">tsk_edge_table_t</a> *<em>self</em>, <a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> <em>index</em>, <a class="reference internal" href="#c.tsk_edge_t" title="tsk_edge_t">tsk_edge_t</a> *<em>row</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_edge_table_get_row" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Get the row at the specified index. </p>
<p><p><p>Updates the specified edge struct to reflect the values in the specified row.
Pointers to memory within this struct are handled by the table and should <strong>not</strong>
be freed by client code. These pointers are guaranteed to be valid until the
next operation that modifies the table (e.g., by adding a new row), but not afterwards.</p>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return 0 on success or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__edge__table__t"><span class="std std-ref">tsk_edge_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">index</span></code>: The requested table row. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">row</span></code>: A pointer to a <a class="reference internal" href="#structtsk__edge__t"><span class="std std-ref">tsk_edge_t</span></a> struct that is updated to reflect the values in the specified row. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_edge_table_set_metadata_schema">
<span class="target" id="group___e_d_g_e___t_a_b_l_e___a_p_i___g_r_o_u_p_1gaaf309a042a9b2851b5236fee4925e6d9"></span>int <code class="sig-name descname">tsk_edge_table_set_metadata_schema</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_edge_table_t" title="tsk_edge_table_t">tsk_edge_table_t</a> *<em>self</em>, <em class="property">const</em> char *<em>metadata_schema</em>, <a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <em>metadata_schema_length</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_edge_table_set_metadata_schema" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Set the metadata schema. </p>
<p><p><p>Copies the metadata schema string to this table, replacing any existing.</p>
</p>
 <dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return 0 on success or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__edge__table__t"><span class="std std-ref">tsk_edge_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">metadata_schema</span></code>: A pointer to a char array </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">metadata_schema_length</span></code>: The size of the metadata schema in bytes. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_edge_table_print_state">
<span class="target" id="group___e_d_g_e___t_a_b_l_e___a_p_i___g_r_o_u_p_1ga4d43f0d9aac7d4afa190b72f7ffd97ca"></span>void <code class="sig-name descname">tsk_edge_table_print_state</code><span class="sig-paren">(</span><em class="property">const</em> <a class="reference internal" href="#c.tsk_edge_table_t" title="tsk_edge_table_t">tsk_edge_table_t</a> *<em>self</em>, FILE *<em>out</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_edge_table_print_state" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Print out the state of this table to the specified stream. </p>
<p>This method is intended for debugging purposes and should not be used in production code. The format of the output should <strong>not</strong> be depended on and may change arbitrarily between versions.</p>
<p><dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__edge__table__t"><span class="std std-ref">tsk_edge_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">out</span></code>: The stream to write the summary to. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="section" id="migrations">
<h3>Migrations<a class="headerlink" href="#migrations" title="Permalink to this headline">¶</a></h3>
<dl class="c struct">
<dt id="c.tsk_migration_t">
<span class="target" id="structtsk__migration__t"></span><em class="property">struct </em><code class="sig-name descname">tsk_migration_t</code><a class="headerlink" href="#c.tsk_migration_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>A single migration defined by a row in the migration table. </p>
<p><p><p>See the <a class="reference internal" href="data-model.html#sec-data-model-definitions"><span class="std std-ref">data model</span></a> section for the definition of
a migration and its properties.</p>
</p>
 </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Members</p>
<dl class="c var">
<dt id="c.tsk_migration_t.id">
<span class="target" id="structtsk__migration__t_1a098a09783c1c67c9fe7474239a0187bb"></span><a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> <code class="sig-name descname">id</code><a class="headerlink" href="#c.tsk_migration_t.id" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Non-negative ID value corresponding to table row. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_migration_t.source">
<span class="target" id="structtsk__migration__t_1a9bbc47bb873e7bbebdae7fb13bbfbaf5"></span><a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> <code class="sig-name descname">source</code><a class="headerlink" href="#c.tsk_migration_t.source" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Source population ID. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_migration_t.dest">
<span class="target" id="structtsk__migration__t_1a4e61de85b750055c3367de5a0ece4b94"></span><a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> <code class="sig-name descname">dest</code><a class="headerlink" href="#c.tsk_migration_t.dest" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Destination population ID. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_migration_t.node">
<span class="target" id="structtsk__migration__t_1af64ab3493d08c85b22b2de0096fedfbe"></span><a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> <code class="sig-name descname">node</code><a class="headerlink" href="#c.tsk_migration_t.node" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Node ID. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_migration_t.left">
<span class="target" id="structtsk__migration__t_1a5eeeb20fab9ff0f54568882b94d57921"></span>double <code class="sig-name descname">left</code><a class="headerlink" href="#c.tsk_migration_t.left" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Left coordinate. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_migration_t.right">
<span class="target" id="structtsk__migration__t_1ab833bacb3fa8d1a189efcbba74f10fa1"></span>double <code class="sig-name descname">right</code><a class="headerlink" href="#c.tsk_migration_t.right" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Right coordinate. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_migration_t.time">
<span class="target" id="structtsk__migration__t_1ab2d5aa7fce1a14d8bddfb2c333ea9679"></span>double <code class="sig-name descname">time</code><a class="headerlink" href="#c.tsk_migration_t.time" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Time. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_migration_t.metadata">
<span class="target" id="structtsk__migration__t_1ade9c5680dc51a034ceb679fc61f025c1"></span><em class="property">const</em> char *<code class="sig-name descname">metadata</code><a class="headerlink" href="#c.tsk_migration_t.metadata" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Metadata. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_migration_t.metadata_length">
<span class="target" id="structtsk__migration__t_1a8baafcbd9877860fcad02f9350a0b2b3"></span><a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <code class="sig-name descname">metadata_length</code><a class="headerlink" href="#c.tsk_migration_t.metadata_length" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Size of the metadata in bytes. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="c struct">
<dt id="c.tsk_migration_table_t">
<span class="target" id="structtsk__migration__table__t"></span><em class="property">struct </em><code class="sig-name descname">tsk_migration_table_t</code><a class="headerlink" href="#c.tsk_migration_table_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The migration table. </p>
<p><p><p>See the migration <a class="reference internal" href="data-model.html#sec-migration-table-definition"><span class="std std-ref">table definition</span></a> for
details of the columns in this table.</p>
</p>
 </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Members</p>
<dl class="c var">
<dt id="c.tsk_migration_table_t.num_rows">
<span class="target" id="structtsk__migration__table__t_1a9a204d42ae303fd917987ad0c580ab59"></span><a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <code class="sig-name descname">num_rows</code><a class="headerlink" href="#c.tsk_migration_table_t.num_rows" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The number of rows in this table. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_migration_table_t.metadata_length">
<span class="target" id="structtsk__migration__table__t_1a8baafcbd9877860fcad02f9350a0b2b3"></span><a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <code class="sig-name descname">metadata_length</code><a class="headerlink" href="#c.tsk_migration_table_t.metadata_length" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The total length of the metadata column. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_migration_table_t.source">
<span class="target" id="structtsk__migration__table__t_1a85366ec92c3d98ad6a40e1493d7b6133"></span><a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> *<code class="sig-name descname">source</code><a class="headerlink" href="#c.tsk_migration_table_t.source" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The source column. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_migration_table_t.dest">
<span class="target" id="structtsk__migration__table__t_1a5b7bc1a4ff844510ec14a612004328a7"></span><a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> *<code class="sig-name descname">dest</code><a class="headerlink" href="#c.tsk_migration_table_t.dest" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The dest column. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_migration_table_t.node">
<span class="target" id="structtsk__migration__table__t_1a3e07850653d519f910c6fea18c217a4b"></span><a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> *<code class="sig-name descname">node</code><a class="headerlink" href="#c.tsk_migration_table_t.node" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The node column. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_migration_table_t.left">
<span class="target" id="structtsk__migration__table__t_1a39c7d5c86d4a9e9a5e4577b377fd21b2"></span>double *<code class="sig-name descname">left</code><a class="headerlink" href="#c.tsk_migration_table_t.left" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The left column. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_migration_table_t.right">
<span class="target" id="structtsk__migration__table__t_1ad2e19c1329a6cba985b8c57f8d1884d9"></span>double *<code class="sig-name descname">right</code><a class="headerlink" href="#c.tsk_migration_table_t.right" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The right column. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_migration_table_t.time">
<span class="target" id="structtsk__migration__table__t_1aa8ee7f1ed4f29ac1aadd955e247641e6"></span>double *<code class="sig-name descname">time</code><a class="headerlink" href="#c.tsk_migration_table_t.time" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The time column. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_migration_table_t.metadata">
<span class="target" id="structtsk__migration__table__t_1ace70beae1a71187d5961a8d7c0dafb7b"></span>char *<code class="sig-name descname">metadata</code><a class="headerlink" href="#c.tsk_migration_table_t.metadata" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The metadata column. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_migration_table_t.metadata_offset">
<span class="target" id="structtsk__migration__table__t_1aa5d4b8d0fd9121dcd7618098bfdd9a50"></span><a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> *<code class="sig-name descname">metadata_offset</code><a class="headerlink" href="#c.tsk_migration_table_t.metadata_offset" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The metadata_offset column. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_migration_table_t.metadata_schema">
<span class="target" id="structtsk__migration__table__t_1ae529f60b9eb4e1faaca99066fa4da00f"></span>char *<code class="sig-name descname">metadata_schema</code><a class="headerlink" href="#c.tsk_migration_table_t.metadata_schema" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The metadata schema. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_migration_table_init">
<span class="target" id="group___m_i_g_r_a_t_i_o_n___t_a_b_l_e___a_p_i___g_r_o_u_p_1ga58c26ae70770f6bd776adb481c7123ba"></span>int <code class="sig-name descname">tsk_migration_table_init</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_migration_table_t" title="tsk_migration_table_t">tsk_migration_table_t</a> *<em>self</em>, <a class="reference internal" href="#c.tsk_flags_t" title="tsk_flags_t">tsk_flags_t</a> <em>options</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_migration_table_init" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Initialises the table by allocating the internal memory. </p>
<p><p><p>This must be called before any operations are performed on the table.
See the <a class="reference internal" href="#sec-c-api-overview-structure"><span class="std std-ref">API structure</span></a> for details on how objects
are initialised and freed.</p>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return 0 on success or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to an uninitialised <a class="reference internal" href="#structtsk__migration__table__t"><span class="std std-ref">tsk_migration_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">options</span></code>: Allocation time options. Currently unused; should be set to zero to ensure compatibility with later versions of tskit. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_migration_table_free">
<span class="target" id="group___m_i_g_r_a_t_i_o_n___t_a_b_l_e___a_p_i___g_r_o_u_p_1gadec40b2946fbb8a8165d9c8d9568c592"></span>int <code class="sig-name descname">tsk_migration_table_free</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_migration_table_t" title="tsk_migration_table_t">tsk_migration_table_t</a> *<em>self</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_migration_table_free" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Free the internal memory for the specified table. </p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Always returns 0. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to an initialised <a class="reference internal" href="#structtsk__migration__table__t"><span class="std std-ref">tsk_migration_table_t</span></a> object. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_migration_table_add_row">
<span class="target" id="group___m_i_g_r_a_t_i_o_n___t_a_b_l_e___a_p_i___g_r_o_u_p_1gaac2340cea3bb2e7531435abe537d07dc"></span><a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> <code class="sig-name descname">tsk_migration_table_add_row</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_migration_table_t" title="tsk_migration_table_t">tsk_migration_table_t</a> *<em>self</em>, double <em>left</em>, double <em>right</em>, <a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> <em>node</em>, <a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> <em>source</em>, <a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> <em>dest</em>, double <em>time</em>, <em class="property">const</em> char *<em>metadata</em>, <a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <em>metadata_length</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_migration_table_add_row" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Adds a row to this migration table. </p>
<p><p><p>Add a new migration with the specified <code class="docutils literal notranslate"><span class="pre">left</span></code>, <code class="docutils literal notranslate"><span class="pre">right</span></code>, <code class="docutils literal notranslate"><span class="pre">node</span></code>,
<code class="docutils literal notranslate"><span class="pre">source</span></code>, <code class="docutils literal notranslate"><span class="pre">dest</span></code>, <code class="docutils literal notranslate"><span class="pre">time</span></code> and <code class="docutils literal notranslate"><span class="pre">metadata</span></code> to the table.
See the <a class="reference internal" href="data-model.html#sec-migration-table-definition"><span class="std std-ref">table definition</span></a>
for details of the columns in this table.</p>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return the ID of the newly added migration on success, or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__migration__table__t"><span class="std std-ref">tsk_migration_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">left</span></code>: The left coordinate for the new migration. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">right</span></code>: The right coordinate for the new migration. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">node</span></code>: The node ID for the new migration. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">source</span></code>: The source population ID for the new migration. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dest</span></code>: The destination population ID for the new migration. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">time</span></code>: The time for the new migration. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">metadata</span></code>: The metadata to be associated with the new migration. This is a pointer to arbitrary memory. Can be <code class="docutils literal notranslate"><span class="pre">NULL</span></code> if <code class="docutils literal notranslate"><span class="pre">metadata_length</span></code> is 0. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">metadata_length</span></code>: The size of the metadata array in bytes.</p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_migration_table_clear">
<span class="target" id="group___m_i_g_r_a_t_i_o_n___t_a_b_l_e___a_p_i___g_r_o_u_p_1ga6d2172167ea1cb9d4966ccbdca5b99ea"></span>int <code class="sig-name descname">tsk_migration_table_clear</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_migration_table_t" title="tsk_migration_table_t">tsk_migration_table_t</a> *<em>self</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_migration_table_clear" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Clears this table, setting the number of rows to zero. </p>
<p><p><p>No memory is freed as a result of this operation; please use
<a class="reference internal" href="#c.tsk_migration_table_free" title="tsk_migration_table_free"><code class="xref c c-func docutils literal notranslate"><span class="pre">tsk_migration_table_free()</span></code></a> to free the table’s internal resources. Note that the
metadata schema is not cleared.</p>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return 0 on success or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__migration__table__t"><span class="std std-ref">tsk_migration_table_t</span></a> object. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_migration_table_truncate">
<span class="target" id="group___m_i_g_r_a_t_i_o_n___t_a_b_l_e___a_p_i___g_r_o_u_p_1gaddedae20a5662e360d26543c1d054275"></span>int <code class="sig-name descname">tsk_migration_table_truncate</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_migration_table_t" title="tsk_migration_table_t">tsk_migration_table_t</a> *<em>self</em>, <a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <em>num_rows</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_migration_table_truncate" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Truncates this table so that only the first num_rows are retained. </p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return 0 on success or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__migration__table__t"><span class="std std-ref">tsk_migration_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">num_rows</span></code>: The number of rows to retain in the table. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_migration_table_equals">
<span class="target" id="group___m_i_g_r_a_t_i_o_n___t_a_b_l_e___a_p_i___g_r_o_u_p_1ga865d27b31803be545e62c8b9c5df766b"></span>bool <code class="sig-name descname">tsk_migration_table_equals</code><span class="sig-paren">(</span><em class="property">const</em> <a class="reference internal" href="#c.tsk_migration_table_t" title="tsk_migration_table_t">tsk_migration_table_t</a> *<em>self</em>, <em class="property">const</em> <a class="reference internal" href="#c.tsk_migration_table_t" title="tsk_migration_table_t">tsk_migration_table_t</a> *<em>other</em>, <a class="reference internal" href="#c.tsk_flags_t" title="tsk_flags_t">tsk_flags_t</a> <em>options</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_migration_table_equals" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Returns true if the data in the specified table is identical to the data in this table. </p>
<p><p><p><strong>Options</strong></p>
<p>Options to control the comparison can be specified by providing one or
more of the following bitwise flags. By default (options=0) tables are
considered equal if they are byte-wise identical in all columns,
and their metadata schemas are byte-wise identical.</p>
<dl class="simple">
<dt>TSK_CMP_IGNORE_METADATA</dt><dd><p>Do not include metadata or metadata schemas in the comparison.</p>
</dd>
</dl>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return true if the specified table is equal to this table. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__migration__table__t"><span class="std std-ref">tsk_migration_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">other</span></code>: A pointer to a <a class="reference internal" href="#structtsk__migration__table__t"><span class="std std-ref">tsk_migration_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">options</span></code>: Bitwise comparison options. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_migration_table_copy">
<span class="target" id="group___m_i_g_r_a_t_i_o_n___t_a_b_l_e___a_p_i___g_r_o_u_p_1ga89fcfa9ca79d04969a0cac72c5d9d27b"></span>int <code class="sig-name descname">tsk_migration_table_copy</code><span class="sig-paren">(</span><em class="property">const</em> <a class="reference internal" href="#c.tsk_migration_table_t" title="tsk_migration_table_t">tsk_migration_table_t</a> *<em>self</em>, <a class="reference internal" href="#c.tsk_migration_table_t" title="tsk_migration_table_t">tsk_migration_table_t</a> *<em>dest</em>, <a class="reference internal" href="#c.tsk_flags_t" title="tsk_flags_t">tsk_flags_t</a> <em>options</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_migration_table_copy" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Copies the state of this table into the specified destination. </p>
<p><p><p>By default the method initialises the specified destination table. If the
destination is already initialised, the <a class="reference internal" href="#c.TSK_NO_INIT" title="TSK_NO_INIT"><code class="xref c c-macro docutils literal notranslate"><span class="pre">TSK_NO_INIT</span></code></a> option should
be supplied to avoid leaking memory.</p>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return 0 on success or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__migration__table__t"><span class="std std-ref">tsk_migration_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dest</span></code>: A pointer to a <a class="reference internal" href="#structtsk__migration__table__t"><span class="std std-ref">tsk_migration_table_t</span></a> object. If the TSK_NO_INIT option is specified, this must be an initialised migration table. If not, it must be an uninitialised migration table. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">options</span></code>: Bitwise option flags. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_migration_table_get_row">
<span class="target" id="group___m_i_g_r_a_t_i_o_n___t_a_b_l_e___a_p_i___g_r_o_u_p_1gae79b258003dd27c7a379a976a09257a2"></span>int <code class="sig-name descname">tsk_migration_table_get_row</code><span class="sig-paren">(</span><em class="property">const</em> <a class="reference internal" href="#c.tsk_migration_table_t" title="tsk_migration_table_t">tsk_migration_table_t</a> *<em>self</em>, <a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> <em>index</em>, <a class="reference internal" href="#c.tsk_migration_t" title="tsk_migration_t">tsk_migration_t</a> *<em>row</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_migration_table_get_row" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Get the row at the specified index. </p>
<p><p><p>Updates the specified migration struct to reflect the values in the specified row.
Pointers to memory within this struct are handled by the table and should <strong>not</strong>
be freed by client code. These pointers are guaranteed to be valid until the
next operation that modifies the table (e.g., by adding a new row), but not afterwards.</p>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return 0 on success or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__migration__table__t"><span class="std std-ref">tsk_migration_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">index</span></code>: The requested table row. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">row</span></code>: A pointer to a <a class="reference internal" href="#structtsk__migration__t"><span class="std std-ref">tsk_migration_t</span></a> struct that is updated to reflect the values in the specified row. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_migration_table_set_metadata_schema">
<span class="target" id="group___m_i_g_r_a_t_i_o_n___t_a_b_l_e___a_p_i___g_r_o_u_p_1ga26f0a24d11cb3b3b47a278645edf16b4"></span>int <code class="sig-name descname">tsk_migration_table_set_metadata_schema</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_migration_table_t" title="tsk_migration_table_t">tsk_migration_table_t</a> *<em>self</em>, <em class="property">const</em> char *<em>metadata_schema</em>, <a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <em>metadata_schema_length</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_migration_table_set_metadata_schema" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Set the metadata schema. </p>
<p><p><p>Copies the metadata schema string to this table, replacing any existing.</p>
</p>
 <dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return 0 on success or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__migration__table__t"><span class="std std-ref">tsk_migration_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">metadata_schema</span></code>: A pointer to a char array </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">metadata_schema_length</span></code>: The size of the metadata schema in bytes. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_migration_table_print_state">
<span class="target" id="group___m_i_g_r_a_t_i_o_n___t_a_b_l_e___a_p_i___g_r_o_u_p_1ga65f083124978b87b6fde760f2db27463"></span>void <code class="sig-name descname">tsk_migration_table_print_state</code><span class="sig-paren">(</span><em class="property">const</em> <a class="reference internal" href="#c.tsk_migration_table_t" title="tsk_migration_table_t">tsk_migration_table_t</a> *<em>self</em>, FILE *<em>out</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_migration_table_print_state" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Print out the state of this table to the specified stream. </p>
<p>This method is intended for debugging purposes and should not be used in production code. The format of the output should <strong>not</strong> be depended on and may change arbitrarily between versions.</p>
<p><dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__migration__table__t"><span class="std std-ref">tsk_migration_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">out</span></code>: The stream to write the summary to. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="section" id="sites">
<h3>Sites<a class="headerlink" href="#sites" title="Permalink to this headline">¶</a></h3>
<dl class="c struct">
<dt id="c.tsk_site_t">
<span class="target" id="structtsk__site__t"></span><em class="property">struct </em><code class="sig-name descname">tsk_site_t</code><a class="headerlink" href="#c.tsk_site_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>A single site defined by a row in the site table. </p>
<p><p><p>See the <a class="reference internal" href="data-model.html#sec-data-model-definitions"><span class="std std-ref">data model</span></a> section for the definition of
a site and its properties.</p>
</p>
 </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Members</p>
<dl class="c var">
<dt id="c.tsk_site_t.id">
<span class="target" id="structtsk__site__t_1a098a09783c1c67c9fe7474239a0187bb"></span><a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> <code class="sig-name descname">id</code><a class="headerlink" href="#c.tsk_site_t.id" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Non-negative ID value corresponding to table row. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_site_t.position">
<span class="target" id="structtsk__site__t_1aa1b2c258efdc9e057ee99a45179692fd"></span>double <code class="sig-name descname">position</code><a class="headerlink" href="#c.tsk_site_t.position" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Position coordinate. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_site_t.ancestral_state">
<span class="target" id="structtsk__site__t_1ab0b846dbaca79ffdda4423174af410bb"></span><em class="property">const</em> char *<code class="sig-name descname">ancestral_state</code><a class="headerlink" href="#c.tsk_site_t.ancestral_state" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Ancestral state. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_site_t.ancestral_state_length">
<span class="target" id="structtsk__site__t_1a7e0662aab2294edb07616abfc1b57ae2"></span><a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <code class="sig-name descname">ancestral_state_length</code><a class="headerlink" href="#c.tsk_site_t.ancestral_state_length" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Ancestral state length in bytes. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_site_t.metadata">
<span class="target" id="structtsk__site__t_1ade9c5680dc51a034ceb679fc61f025c1"></span><em class="property">const</em> char *<code class="sig-name descname">metadata</code><a class="headerlink" href="#c.tsk_site_t.metadata" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Metadata. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_site_t.metadata_length">
<span class="target" id="structtsk__site__t_1a8baafcbd9877860fcad02f9350a0b2b3"></span><a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <code class="sig-name descname">metadata_length</code><a class="headerlink" href="#c.tsk_site_t.metadata_length" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Metadata length in bytes. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="c struct">
<dt id="c.tsk_site_table_t">
<span class="target" id="structtsk__site__table__t"></span><em class="property">struct </em><code class="sig-name descname">tsk_site_table_t</code><a class="headerlink" href="#c.tsk_site_table_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The site table. </p>
<p><p><p>See the site <a class="reference internal" href="data-model.html#sec-site-table-definition"><span class="std std-ref">table definition</span></a> for
details of the columns in this table.</p>
</p>
 </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Members</p>
<dl class="c var">
<dt id="c.tsk_site_table_t.num_rows">
<span class="target" id="structtsk__site__table__t_1a9a204d42ae303fd917987ad0c580ab59"></span><a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <code class="sig-name descname">num_rows</code><a class="headerlink" href="#c.tsk_site_table_t.num_rows" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The number of rows in this table. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_site_table_t.metadata_length">
<span class="target" id="structtsk__site__table__t_1a8baafcbd9877860fcad02f9350a0b2b3"></span><a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <code class="sig-name descname">metadata_length</code><a class="headerlink" href="#c.tsk_site_table_t.metadata_length" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The total length of the metadata column. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_site_table_t.position">
<span class="target" id="structtsk__site__table__t_1a49ce4805ac4c02f4893ab4e3bcc5fcd5"></span>double *<code class="sig-name descname">position</code><a class="headerlink" href="#c.tsk_site_table_t.position" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The position column. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_site_table_t.ancestral_state">
<span class="target" id="structtsk__site__table__t_1abc33aa1eb9a0944c6bec7c5e6fbc4bf0"></span>char *<code class="sig-name descname">ancestral_state</code><a class="headerlink" href="#c.tsk_site_table_t.ancestral_state" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The ancestral_state column. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_site_table_t.ancestral_state_offset">
<span class="target" id="structtsk__site__table__t_1a28a17f95825cf5ab4d571dbf82cd68fd"></span><a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> *<code class="sig-name descname">ancestral_state_offset</code><a class="headerlink" href="#c.tsk_site_table_t.ancestral_state_offset" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The ancestral_state_offset column. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_site_table_t.metadata">
<span class="target" id="structtsk__site__table__t_1ace70beae1a71187d5961a8d7c0dafb7b"></span>char *<code class="sig-name descname">metadata</code><a class="headerlink" href="#c.tsk_site_table_t.metadata" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The metadata column. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_site_table_t.metadata_offset">
<span class="target" id="structtsk__site__table__t_1aa5d4b8d0fd9121dcd7618098bfdd9a50"></span><a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> *<code class="sig-name descname">metadata_offset</code><a class="headerlink" href="#c.tsk_site_table_t.metadata_offset" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The metadata_offset column. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_site_table_t.metadata_schema">
<span class="target" id="structtsk__site__table__t_1ae529f60b9eb4e1faaca99066fa4da00f"></span>char *<code class="sig-name descname">metadata_schema</code><a class="headerlink" href="#c.tsk_site_table_t.metadata_schema" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The metadata schema. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_site_table_init">
<span class="target" id="group___s_i_t_e___t_a_b_l_e___a_p_i___g_r_o_u_p_1ga3f1b13f5569d4691feb22a5b8f740dca"></span>int <code class="sig-name descname">tsk_site_table_init</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_site_table_t" title="tsk_site_table_t">tsk_site_table_t</a> *<em>self</em>, <a class="reference internal" href="#c.tsk_flags_t" title="tsk_flags_t">tsk_flags_t</a> <em>options</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_site_table_init" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Initialises the table by allocating the internal memory. </p>
<p><p><p>This must be called before any operations are performed on the table.
See the <a class="reference internal" href="#sec-c-api-overview-structure"><span class="std std-ref">API structure</span></a> for details on how objects
are initialised and freed.</p>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return 0 on success or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to an uninitialised <a class="reference internal" href="#structtsk__site__table__t"><span class="std std-ref">tsk_site_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">options</span></code>: Allocation time options. Currently unused; should be set to zero to ensure compatibility with later versions of tskit. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_site_table_free">
<span class="target" id="group___s_i_t_e___t_a_b_l_e___a_p_i___g_r_o_u_p_1gaa90311da1c67ad3e991992dd864fe347"></span>int <code class="sig-name descname">tsk_site_table_free</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_site_table_t" title="tsk_site_table_t">tsk_site_table_t</a> *<em>self</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_site_table_free" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Free the internal memory for the specified table. </p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Always returns 0. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to an initialised <a class="reference internal" href="#structtsk__site__table__t"><span class="std std-ref">tsk_site_table_t</span></a> object. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_site_table_add_row">
<span class="target" id="group___s_i_t_e___t_a_b_l_e___a_p_i___g_r_o_u_p_1gab3636bc6764a3a3c139957a6ef9dc366"></span><a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> <code class="sig-name descname">tsk_site_table_add_row</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_site_table_t" title="tsk_site_table_t">tsk_site_table_t</a> *<em>self</em>, double <em>position</em>, <em class="property">const</em> char *<em>ancestral_state</em>, <a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <em>ancestral_state_length</em>, <em class="property">const</em> char *<em>metadata</em>, <a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <em>metadata_length</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_site_table_add_row" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Adds a row to this site table. </p>
<p><p><p>Add a new site with the specified <code class="docutils literal notranslate"><span class="pre">position</span></code>, <code class="docutils literal notranslate"><span class="pre">ancestral_state</span></code>
and <code class="docutils literal notranslate"><span class="pre">metadata</span></code> to the table. Copies of <code class="docutils literal notranslate"><span class="pre">ancestral_state</span></code> and <code class="docutils literal notranslate"><span class="pre">metadata</span></code>
are immediately taken. See the <a class="reference internal" href="data-model.html#sec-site-table-definition"><span class="std std-ref">table definition</span></a>
for details of the columns in this table.</p>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return the ID of the newly added site on success, or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__site__table__t"><span class="std std-ref">tsk_site_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">position</span></code>: The position coordinate for the new site. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ancestral_state</span></code>: The ancestral_state for the new site. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ancestral_state_length</span></code>: The length of the ancestral_state in bytes. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">metadata</span></code>: The metadata to be associated with the new site. This is a pointer to arbitrary memory. Can be <code class="docutils literal notranslate"><span class="pre">NULL</span></code> if <code class="docutils literal notranslate"><span class="pre">metadata_length</span></code> is 0. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">metadata_length</span></code>: The size of the metadata array in bytes. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_site_table_clear">
<span class="target" id="group___s_i_t_e___t_a_b_l_e___a_p_i___g_r_o_u_p_1gab656ed0190bf14773dd8e2ec6e2f18c8"></span>int <code class="sig-name descname">tsk_site_table_clear</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_site_table_t" title="tsk_site_table_t">tsk_site_table_t</a> *<em>self</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_site_table_clear" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Clears this table, setting the number of rows to zero. </p>
<p><p><p>No memory is freed as a result of this operation; please use
<a class="reference internal" href="#c.tsk_site_table_free" title="tsk_site_table_free"><code class="xref c c-func docutils literal notranslate"><span class="pre">tsk_site_table_free()</span></code></a> to free the table’s internal resources. Note that the
metadata schema is not cleared.</p>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return 0 on success or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__site__table__t"><span class="std std-ref">tsk_site_table_t</span></a> object. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_site_table_truncate">
<span class="target" id="group___s_i_t_e___t_a_b_l_e___a_p_i___g_r_o_u_p_1ga8eefa959331c35f735693014acafdbd7"></span>int <code class="sig-name descname">tsk_site_table_truncate</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_site_table_t" title="tsk_site_table_t">tsk_site_table_t</a> *<em>self</em>, <a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <em>num_rows</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_site_table_truncate" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Truncates this table so that only the first num_rows are retained. </p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return 0 on success or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__site__table__t"><span class="std std-ref">tsk_site_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">num_rows</span></code>: The number of rows to retain in the table. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_site_table_equals">
<span class="target" id="group___s_i_t_e___t_a_b_l_e___a_p_i___g_r_o_u_p_1gab65b03d951e2d3a8b7b71fbf981563af"></span>bool <code class="sig-name descname">tsk_site_table_equals</code><span class="sig-paren">(</span><em class="property">const</em> <a class="reference internal" href="#c.tsk_site_table_t" title="tsk_site_table_t">tsk_site_table_t</a> *<em>self</em>, <em class="property">const</em> <a class="reference internal" href="#c.tsk_site_table_t" title="tsk_site_table_t">tsk_site_table_t</a> *<em>other</em>, <a class="reference internal" href="#c.tsk_flags_t" title="tsk_flags_t">tsk_flags_t</a> <em>options</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_site_table_equals" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Returns true if the data in the specified table is identical to the data in this table. </p>
<p><p><p><strong>Options</strong></p>
<p>Options to control the comparison can be specified by providing one or
more of the following bitwise flags. By default (options=0) tables are
considered equal if they are byte-wise identical in all columns,
and their metadata schemas are byte-wise identical.</p>
<dl class="simple">
<dt>TSK_CMP_IGNORE_METADATA</dt><dd><p>Do not include metadata or metadata schemas in the comparison.</p>
</dd>
</dl>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return true if the specified table is equal to this table. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__site__table__t"><span class="std std-ref">tsk_site_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">other</span></code>: A pointer to a <a class="reference internal" href="#structtsk__site__table__t"><span class="std std-ref">tsk_site_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">options</span></code>: Bitwise comparison options. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_site_table_copy">
<span class="target" id="group___s_i_t_e___t_a_b_l_e___a_p_i___g_r_o_u_p_1gaa8eca89206e605d446c4e049dc8da331"></span>int <code class="sig-name descname">tsk_site_table_copy</code><span class="sig-paren">(</span><em class="property">const</em> <a class="reference internal" href="#c.tsk_site_table_t" title="tsk_site_table_t">tsk_site_table_t</a> *<em>self</em>, <a class="reference internal" href="#c.tsk_site_table_t" title="tsk_site_table_t">tsk_site_table_t</a> *<em>dest</em>, <a class="reference internal" href="#c.tsk_flags_t" title="tsk_flags_t">tsk_flags_t</a> <em>options</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_site_table_copy" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Copies the state of this table into the specified destination. </p>
<p><p><p>By default the method initialises the specified destination table. If the
destination is already initialised, the <a class="reference internal" href="#c.TSK_NO_INIT" title="TSK_NO_INIT"><code class="xref c c-macro docutils literal notranslate"><span class="pre">TSK_NO_INIT</span></code></a> option should
be supplied to avoid leaking memory.</p>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return 0 on success or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__site__table__t"><span class="std std-ref">tsk_site_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dest</span></code>: A pointer to a <a class="reference internal" href="#structtsk__site__table__t"><span class="std std-ref">tsk_site_table_t</span></a> object. If the TSK_NO_INIT option is specified, this must be an initialised site table. If not, it must be an uninitialised site table. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">options</span></code>: Bitwise option flags. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_site_table_get_row">
<span class="target" id="group___s_i_t_e___t_a_b_l_e___a_p_i___g_r_o_u_p_1ga5a97a7f688c91138de2bdaea05e308cd"></span>int <code class="sig-name descname">tsk_site_table_get_row</code><span class="sig-paren">(</span><em class="property">const</em> <a class="reference internal" href="#c.tsk_site_table_t" title="tsk_site_table_t">tsk_site_table_t</a> *<em>self</em>, <a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> <em>index</em>, <a class="reference internal" href="#c.tsk_site_t" title="tsk_site_t">tsk_site_t</a> *<em>row</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_site_table_get_row" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Get the row at the specified index. </p>
<p><p><p>Updates the specified site struct to reflect the values in the specified row.
Pointers to memory within this struct are handled by the table and should <strong>not</strong>
be freed by client code. These pointers are guaranteed to be valid until the
next operation that modifies the table (e.g., by adding a new row), but not afterwards.</p>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return 0 on success or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__site__table__t"><span class="std std-ref">tsk_site_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">index</span></code>: The requested table row. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">row</span></code>: A pointer to a <a class="reference internal" href="#structtsk__site__t"><span class="std std-ref">tsk_site_t</span></a> struct that is updated to reflect the values in the specified row. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_site_table_set_metadata_schema">
<span class="target" id="group___s_i_t_e___t_a_b_l_e___a_p_i___g_r_o_u_p_1ga8c3f965577226ebf73b2529eab0e7c25"></span>int <code class="sig-name descname">tsk_site_table_set_metadata_schema</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_site_table_t" title="tsk_site_table_t">tsk_site_table_t</a> *<em>self</em>, <em class="property">const</em> char *<em>metadata_schema</em>, <a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <em>metadata_schema_length</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_site_table_set_metadata_schema" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Set the metadata schema. </p>
<p><p><p>Copies the metadata schema string to this table, replacing any existing.</p>
</p>
 <dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return 0 on success or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__site__table__t"><span class="std std-ref">tsk_site_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">metadata_schema</span></code>: A pointer to a char array </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">metadata_schema_length</span></code>: The size of the metadata schema in bytes. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_site_table_print_state">
<span class="target" id="group___s_i_t_e___t_a_b_l_e___a_p_i___g_r_o_u_p_1gaeafea0eacf0a8b13bb86aa005c6546d4"></span>void <code class="sig-name descname">tsk_site_table_print_state</code><span class="sig-paren">(</span><em class="property">const</em> <a class="reference internal" href="#c.tsk_site_table_t" title="tsk_site_table_t">tsk_site_table_t</a> *<em>self</em>, FILE *<em>out</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_site_table_print_state" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Print out the state of this table to the specified stream. </p>
<p>This method is intended for debugging purposes and should not be used in production code. The format of the output should <strong>not</strong> be depended on and may change arbitrarily between versions.</p>
<p><dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__site__table__t"><span class="std std-ref">tsk_site_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">out</span></code>: The stream to write the summary to. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="section" id="mutations">
<h3>Mutations<a class="headerlink" href="#mutations" title="Permalink to this headline">¶</a></h3>
<dl class="c struct">
<dt id="c.tsk_mutation_t">
<span class="target" id="structtsk__mutation__t"></span><em class="property">struct </em><code class="sig-name descname">tsk_mutation_t</code><a class="headerlink" href="#c.tsk_mutation_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>A single mutation defined by a row in the mutation table. </p>
<p><p><p>See the <a class="reference internal" href="data-model.html#sec-data-model-definitions"><span class="std std-ref">data model</span></a> section for the definition of
a mutation and its properties.</p>
</p>
 </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Members</p>
<dl class="c var">
<dt id="c.tsk_mutation_t.id">
<span class="target" id="structtsk__mutation__t_1a098a09783c1c67c9fe7474239a0187bb"></span><a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> <code class="sig-name descname">id</code><a class="headerlink" href="#c.tsk_mutation_t.id" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Non-negative ID value corresponding to table row. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_mutation_t.site">
<span class="target" id="structtsk__mutation__t_1a068348b2e16a6b66c1ba2891a888d654"></span><a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> <code class="sig-name descname">site</code><a class="headerlink" href="#c.tsk_mutation_t.site" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Site ID. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_mutation_t.node">
<span class="target" id="structtsk__mutation__t_1af64ab3493d08c85b22b2de0096fedfbe"></span><a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> <code class="sig-name descname">node</code><a class="headerlink" href="#c.tsk_mutation_t.node" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Node ID. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_mutation_t.parent">
<span class="target" id="structtsk__mutation__t_1acc72dc73b5119cdc54a99c9d847f4b55"></span><a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> <code class="sig-name descname">parent</code><a class="headerlink" href="#c.tsk_mutation_t.parent" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Parent mutation ID. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_mutation_t.time">
<span class="target" id="structtsk__mutation__t_1ab2d5aa7fce1a14d8bddfb2c333ea9679"></span>double <code class="sig-name descname">time</code><a class="headerlink" href="#c.tsk_mutation_t.time" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Mutation time. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_mutation_t.derived_state">
<span class="target" id="structtsk__mutation__t_1a5a6c0dfb2f6d0097055f720fb98e7724"></span><em class="property">const</em> char *<code class="sig-name descname">derived_state</code><a class="headerlink" href="#c.tsk_mutation_t.derived_state" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Derived state. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_mutation_t.derived_state_length">
<span class="target" id="structtsk__mutation__t_1afbbd5cb9c071918542fb045a43956f14"></span><a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <code class="sig-name descname">derived_state_length</code><a class="headerlink" href="#c.tsk_mutation_t.derived_state_length" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Size of the derived state in bytes. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_mutation_t.metadata">
<span class="target" id="structtsk__mutation__t_1ade9c5680dc51a034ceb679fc61f025c1"></span><em class="property">const</em> char *<code class="sig-name descname">metadata</code><a class="headerlink" href="#c.tsk_mutation_t.metadata" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Metadata. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_mutation_t.metadata_length">
<span class="target" id="structtsk__mutation__t_1a8baafcbd9877860fcad02f9350a0b2b3"></span><a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <code class="sig-name descname">metadata_length</code><a class="headerlink" href="#c.tsk_mutation_t.metadata_length" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Size of the metadata in bytes. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="c struct">
<dt id="c.tsk_mutation_table_t">
<span class="target" id="structtsk__mutation__table__t"></span><em class="property">struct </em><code class="sig-name descname">tsk_mutation_table_t</code><a class="headerlink" href="#c.tsk_mutation_table_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The mutation table. </p>
<p><p><p>See the mutation <a class="reference internal" href="data-model.html#sec-mutation-table-definition"><span class="std std-ref">table definition</span></a> for
details of the columns in this table.</p>
</p>
 </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Members</p>
<dl class="c var">
<dt id="c.tsk_mutation_table_t.num_rows">
<span class="target" id="structtsk__mutation__table__t_1a9a204d42ae303fd917987ad0c580ab59"></span><a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <code class="sig-name descname">num_rows</code><a class="headerlink" href="#c.tsk_mutation_table_t.num_rows" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The number of rows in this table. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_mutation_table_t.metadata_length">
<span class="target" id="structtsk__mutation__table__t_1a8baafcbd9877860fcad02f9350a0b2b3"></span><a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <code class="sig-name descname">metadata_length</code><a class="headerlink" href="#c.tsk_mutation_table_t.metadata_length" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The total length of the metadata column. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_mutation_table_t.node">
<span class="target" id="structtsk__mutation__table__t_1a3e07850653d519f910c6fea18c217a4b"></span><a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> *<code class="sig-name descname">node</code><a class="headerlink" href="#c.tsk_mutation_table_t.node" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The node column. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_mutation_table_t.site">
<span class="target" id="structtsk__mutation__table__t_1a936151a4c5fd785fdea6a38d820df516"></span><a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> *<code class="sig-name descname">site</code><a class="headerlink" href="#c.tsk_mutation_table_t.site" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The site column. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_mutation_table_t.parent">
<span class="target" id="structtsk__mutation__table__t_1a46da4afff95627d99f17ba698625383b"></span><a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> *<code class="sig-name descname">parent</code><a class="headerlink" href="#c.tsk_mutation_table_t.parent" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The parent column. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_mutation_table_t.time">
<span class="target" id="structtsk__mutation__table__t_1aa8ee7f1ed4f29ac1aadd955e247641e6"></span>double *<code class="sig-name descname">time</code><a class="headerlink" href="#c.tsk_mutation_table_t.time" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The time column. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_mutation_table_t.derived_state">
<span class="target" id="structtsk__mutation__table__t_1a269482e2c79a26c604fc12a532d496c1"></span>char *<code class="sig-name descname">derived_state</code><a class="headerlink" href="#c.tsk_mutation_table_t.derived_state" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The derived_state column. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_mutation_table_t.derived_state_offset">
<span class="target" id="structtsk__mutation__table__t_1a30669e654a87451f4617f61307fa5866"></span><a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> *<code class="sig-name descname">derived_state_offset</code><a class="headerlink" href="#c.tsk_mutation_table_t.derived_state_offset" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The derived_state_offset column. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_mutation_table_t.metadata">
<span class="target" id="structtsk__mutation__table__t_1ace70beae1a71187d5961a8d7c0dafb7b"></span>char *<code class="sig-name descname">metadata</code><a class="headerlink" href="#c.tsk_mutation_table_t.metadata" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The metadata column. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_mutation_table_t.metadata_offset">
<span class="target" id="structtsk__mutation__table__t_1aa5d4b8d0fd9121dcd7618098bfdd9a50"></span><a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> *<code class="sig-name descname">metadata_offset</code><a class="headerlink" href="#c.tsk_mutation_table_t.metadata_offset" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The metadata_offset column. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_mutation_table_t.metadata_schema">
<span class="target" id="structtsk__mutation__table__t_1ae529f60b9eb4e1faaca99066fa4da00f"></span>char *<code class="sig-name descname">metadata_schema</code><a class="headerlink" href="#c.tsk_mutation_table_t.metadata_schema" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The metadata schema. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_mutation_table_init">
<span class="target" id="group___m_u_t_a_t_i_o_n___t_a_b_l_e___a_p_i___g_r_o_u_p_1ga60a288581b2ba94eaf8dbbfc165f63cc"></span>int <code class="sig-name descname">tsk_mutation_table_init</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_mutation_table_t" title="tsk_mutation_table_t">tsk_mutation_table_t</a> *<em>self</em>, <a class="reference internal" href="#c.tsk_flags_t" title="tsk_flags_t">tsk_flags_t</a> <em>options</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_mutation_table_init" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Initialises the table by allocating the internal memory. </p>
<p><p><p>This must be called before any operations are performed on the table.
See the <a class="reference internal" href="#sec-c-api-overview-structure"><span class="std std-ref">API structure</span></a> for details on how objects
are initialised and freed.</p>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return 0 on success or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to an uninitialised <a class="reference internal" href="#structtsk__mutation__table__t"><span class="std std-ref">tsk_mutation_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">options</span></code>: Allocation time options. Currently unused; should be set to zero to ensure compatibility with later versions of tskit. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_mutation_table_free">
<span class="target" id="group___m_u_t_a_t_i_o_n___t_a_b_l_e___a_p_i___g_r_o_u_p_1gae2bfa4bfecec62b9e922982ea4a117e2"></span>int <code class="sig-name descname">tsk_mutation_table_free</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_mutation_table_t" title="tsk_mutation_table_t">tsk_mutation_table_t</a> *<em>self</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_mutation_table_free" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Free the internal memory for the specified table. </p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Always returns 0. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to an initialised <a class="reference internal" href="#structtsk__mutation__table__t"><span class="std std-ref">tsk_mutation_table_t</span></a> object. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_mutation_table_add_row">
<span class="target" id="group___m_u_t_a_t_i_o_n___t_a_b_l_e___a_p_i___g_r_o_u_p_1ga055423976922f10308777164fb400ad4"></span><a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> <code class="sig-name descname">tsk_mutation_table_add_row</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_mutation_table_t" title="tsk_mutation_table_t">tsk_mutation_table_t</a> *<em>self</em>, <a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> <em>site</em>, <a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> <em>node</em>, <a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> <em>parent</em>, double <em>time</em>, <em class="property">const</em> char *<em>derived_state</em>, <a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <em>derived_state_length</em>, <em class="property">const</em> char *<em>metadata</em>, <a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <em>metadata_length</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_mutation_table_add_row" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Adds a row to this mutation table. </p>
<p><p><p>Add a new mutation with the specified <code class="docutils literal notranslate"><span class="pre">site</span></code>, <code class="docutils literal notranslate"><span class="pre">parent</span></code>, <code class="docutils literal notranslate"><span class="pre">derived_state</span></code>
and <code class="docutils literal notranslate"><span class="pre">metadata</span></code> to the table. Copies of <code class="docutils literal notranslate"><span class="pre">derived_state</span></code> and <code class="docutils literal notranslate"><span class="pre">metadata</span></code>
are immediately taken. See the <a class="reference internal" href="data-model.html#sec-mutation-table-definition"><span class="std std-ref">table definition</span></a>
for details of the columns in this table.</p>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return the ID of the newly added mutation on success, or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__mutation__table__t"><span class="std std-ref">tsk_mutation_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">site</span></code>: The site ID for the new mutation. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">node</span></code>: The ID of the node this mutation occurs over. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">parent</span></code>: The ID of the parent mutation. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">time</span></code>: The time of the mutation. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">derived_state</span></code>: The derived_state for the new mutation. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">derived_state_length</span></code>: The length of the derived_state in bytes. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">metadata</span></code>: The metadata to be associated with the new mutation. This is a pointer to arbitrary memory. Can be <code class="docutils literal notranslate"><span class="pre">NULL</span></code> if <code class="docutils literal notranslate"><span class="pre">metadata_length</span></code> is 0. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">metadata_length</span></code>: The size of the metadata array in bytes. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_mutation_table_clear">
<span class="target" id="group___m_u_t_a_t_i_o_n___t_a_b_l_e___a_p_i___g_r_o_u_p_1ga3035aa39b6bf5f9c7222b8bc79be892e"></span>int <code class="sig-name descname">tsk_mutation_table_clear</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_mutation_table_t" title="tsk_mutation_table_t">tsk_mutation_table_t</a> *<em>self</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_mutation_table_clear" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Clears this table, setting the number of rows to zero. </p>
<p><p><p>No memory is freed as a result of this operation; please use
<a class="reference internal" href="#c.tsk_mutation_table_free" title="tsk_mutation_table_free"><code class="xref c c-func docutils literal notranslate"><span class="pre">tsk_mutation_table_free()</span></code></a> to free the table’s internal resources. Note that the
metadata schema is not cleared.</p>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return 0 on success or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__mutation__table__t"><span class="std std-ref">tsk_mutation_table_t</span></a> object. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_mutation_table_truncate">
<span class="target" id="group___m_u_t_a_t_i_o_n___t_a_b_l_e___a_p_i___g_r_o_u_p_1gab776160fbea97c5b744065376426c98e"></span>int <code class="sig-name descname">tsk_mutation_table_truncate</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_mutation_table_t" title="tsk_mutation_table_t">tsk_mutation_table_t</a> *<em>self</em>, <a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <em>num_rows</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_mutation_table_truncate" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Truncates this table so that only the first num_rows are retained. </p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return 0 on success or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__mutation__table__t"><span class="std std-ref">tsk_mutation_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">num_rows</span></code>: The number of rows to retain in the table. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_mutation_table_equals">
<span class="target" id="group___m_u_t_a_t_i_o_n___t_a_b_l_e___a_p_i___g_r_o_u_p_1gae213161b1403a6a78b1ac9230564bb77"></span>bool <code class="sig-name descname">tsk_mutation_table_equals</code><span class="sig-paren">(</span><em class="property">const</em> <a class="reference internal" href="#c.tsk_mutation_table_t" title="tsk_mutation_table_t">tsk_mutation_table_t</a> *<em>self</em>, <em class="property">const</em> <a class="reference internal" href="#c.tsk_mutation_table_t" title="tsk_mutation_table_t">tsk_mutation_table_t</a> *<em>other</em>, <a class="reference internal" href="#c.tsk_flags_t" title="tsk_flags_t">tsk_flags_t</a> <em>options</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_mutation_table_equals" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Returns true if the data in the specified table is identical to the data in this table. </p>
<p><p><p><strong>Options</strong></p>
<p>Options to control the comparison can be specified by providing one or
more of the following bitwise flags. By default (options=0) tables are
considered equal if they are byte-wise identical in all columns,
and their metadata schemas are byte-wise identical.</p>
<dl class="simple">
<dt>TSK_CMP_IGNORE_METADATA</dt><dd><p>Do not include metadata or metadata schemas in the comparison.</p>
</dd>
</dl>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return true if the specified table is equal to this table. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__mutation__table__t"><span class="std std-ref">tsk_mutation_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">other</span></code>: A pointer to a <a class="reference internal" href="#structtsk__mutation__table__t"><span class="std std-ref">tsk_mutation_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">options</span></code>: Bitwise comparison options. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_mutation_table_copy">
<span class="target" id="group___m_u_t_a_t_i_o_n___t_a_b_l_e___a_p_i___g_r_o_u_p_1ga5585d28044b7bc03e79b504b23347134"></span>int <code class="sig-name descname">tsk_mutation_table_copy</code><span class="sig-paren">(</span><em class="property">const</em> <a class="reference internal" href="#c.tsk_mutation_table_t" title="tsk_mutation_table_t">tsk_mutation_table_t</a> *<em>self</em>, <a class="reference internal" href="#c.tsk_mutation_table_t" title="tsk_mutation_table_t">tsk_mutation_table_t</a> *<em>dest</em>, <a class="reference internal" href="#c.tsk_flags_t" title="tsk_flags_t">tsk_flags_t</a> <em>options</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_mutation_table_copy" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Copies the state of this table into the specified destination. </p>
<p><p><p>By default the method initialises the specified destination table. If the
destination is already initialised, the <a class="reference internal" href="#c.TSK_NO_INIT" title="TSK_NO_INIT"><code class="xref c c-macro docutils literal notranslate"><span class="pre">TSK_NO_INIT</span></code></a> option should
be supplied to avoid leaking memory.</p>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return 0 on success or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__mutation__table__t"><span class="std std-ref">tsk_mutation_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dest</span></code>: A pointer to a <a class="reference internal" href="#structtsk__mutation__table__t"><span class="std std-ref">tsk_mutation_table_t</span></a> object. If the TSK_NO_INIT option is specified, this must be an initialised mutation table. If not, it must be an uninitialised mutation table. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">options</span></code>: Bitwise option flags. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_mutation_table_get_row">
<span class="target" id="group___m_u_t_a_t_i_o_n___t_a_b_l_e___a_p_i___g_r_o_u_p_1gad4b28b260021620c2ff3feb9bc645da0"></span>int <code class="sig-name descname">tsk_mutation_table_get_row</code><span class="sig-paren">(</span><em class="property">const</em> <a class="reference internal" href="#c.tsk_mutation_table_t" title="tsk_mutation_table_t">tsk_mutation_table_t</a> *<em>self</em>, <a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> <em>index</em>, <a class="reference internal" href="#c.tsk_mutation_t" title="tsk_mutation_t">tsk_mutation_t</a> *<em>row</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_mutation_table_get_row" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Get the row at the specified index. </p>
<p><p><p>Updates the specified mutation struct to reflect the values in the specified row.
Pointers to memory within this struct are handled by the table and should <strong>not</strong>
be freed by client code. These pointers are guaranteed to be valid until the
next operation that modifies the table (e.g., by adding a new row), but not afterwards.</p>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return 0 on success or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__mutation__table__t"><span class="std std-ref">tsk_mutation_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">index</span></code>: The requested table row. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">row</span></code>: A pointer to a <a class="reference internal" href="#structtsk__mutation__t"><span class="std std-ref">tsk_mutation_t</span></a> struct that is updated to reflect the values in the specified row. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_mutation_table_set_metadata_schema">
<span class="target" id="group___m_u_t_a_t_i_o_n___t_a_b_l_e___a_p_i___g_r_o_u_p_1ga45ce223f538dfe0a9f4bcbfe814f053b"></span>int <code class="sig-name descname">tsk_mutation_table_set_metadata_schema</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_mutation_table_t" title="tsk_mutation_table_t">tsk_mutation_table_t</a> *<em>self</em>, <em class="property">const</em> char *<em>metadata_schema</em>, <a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <em>metadata_schema_length</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_mutation_table_set_metadata_schema" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Set the metadata schema. </p>
<p><p><p>Copies the metadata schema string to this table, replacing any existing.</p>
</p>
 <dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return 0 on success or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__mutation__table__t"><span class="std std-ref">tsk_mutation_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">metadata_schema</span></code>: A pointer to a char array </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">metadata_schema_length</span></code>: The size of the metadata schema in bytes. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_mutation_table_print_state">
<span class="target" id="group___m_u_t_a_t_i_o_n___t_a_b_l_e___a_p_i___g_r_o_u_p_1ga974b34df3d4b0ebfb8d7cfe0b61f7d0e"></span>void <code class="sig-name descname">tsk_mutation_table_print_state</code><span class="sig-paren">(</span><em class="property">const</em> <a class="reference internal" href="#c.tsk_mutation_table_t" title="tsk_mutation_table_t">tsk_mutation_table_t</a> *<em>self</em>, FILE *<em>out</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_mutation_table_print_state" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Print out the state of this table to the specified stream. </p>
<p>This method is intended for debugging purposes and should not be used in production code. The format of the output should <strong>not</strong> be depended on and may change arbitrarily between versions.</p>
<p><dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__mutation__table__t"><span class="std std-ref">tsk_mutation_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">out</span></code>: The stream to write the summary to. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="section" id="populations">
<h3>Populations<a class="headerlink" href="#populations" title="Permalink to this headline">¶</a></h3>
<dl class="c struct">
<dt id="c.tsk_population_t">
<span class="target" id="structtsk__population__t"></span><em class="property">struct </em><code class="sig-name descname">tsk_population_t</code><a class="headerlink" href="#c.tsk_population_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>A single population defined by a row in the population table. </p>
<p><p><p>See the <a class="reference internal" href="data-model.html#sec-data-model-definitions"><span class="std std-ref">data model</span></a> section for the definition of
a population and its properties.</p>
</p>
 </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Members</p>
<dl class="c var">
<dt id="c.tsk_population_t.id">
<span class="target" id="structtsk__population__t_1a098a09783c1c67c9fe7474239a0187bb"></span><a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> <code class="sig-name descname">id</code><a class="headerlink" href="#c.tsk_population_t.id" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Non-negative ID value corresponding to table row. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_population_t.metadata">
<span class="target" id="structtsk__population__t_1ade9c5680dc51a034ceb679fc61f025c1"></span><em class="property">const</em> char *<code class="sig-name descname">metadata</code><a class="headerlink" href="#c.tsk_population_t.metadata" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Metadata. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_population_t.metadata_length">
<span class="target" id="structtsk__population__t_1a8baafcbd9877860fcad02f9350a0b2b3"></span><a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <code class="sig-name descname">metadata_length</code><a class="headerlink" href="#c.tsk_population_t.metadata_length" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Metadata length in bytes. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="c struct">
<dt id="c.tsk_population_table_t">
<span class="target" id="structtsk__population__table__t"></span><em class="property">struct </em><code class="sig-name descname">tsk_population_table_t</code><a class="headerlink" href="#c.tsk_population_table_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The population table. </p>
<p><p><p>See the population <a class="reference internal" href="data-model.html#sec-population-table-definition"><span class="std std-ref">table definition</span></a> for
details of the columns in this table.</p>
</p>
 </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Members</p>
<dl class="c var">
<dt id="c.tsk_population_table_t.num_rows">
<span class="target" id="structtsk__population__table__t_1a9a204d42ae303fd917987ad0c580ab59"></span><a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <code class="sig-name descname">num_rows</code><a class="headerlink" href="#c.tsk_population_table_t.num_rows" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The number of rows in this table. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_population_table_t.metadata_length">
<span class="target" id="structtsk__population__table__t_1a8baafcbd9877860fcad02f9350a0b2b3"></span><a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <code class="sig-name descname">metadata_length</code><a class="headerlink" href="#c.tsk_population_table_t.metadata_length" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The total length of the metadata column. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_population_table_t.metadata">
<span class="target" id="structtsk__population__table__t_1ace70beae1a71187d5961a8d7c0dafb7b"></span>char *<code class="sig-name descname">metadata</code><a class="headerlink" href="#c.tsk_population_table_t.metadata" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The metadata column. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_population_table_t.metadata_offset">
<span class="target" id="structtsk__population__table__t_1aa5d4b8d0fd9121dcd7618098bfdd9a50"></span><a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> *<code class="sig-name descname">metadata_offset</code><a class="headerlink" href="#c.tsk_population_table_t.metadata_offset" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The metadata_offset column. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_population_table_t.metadata_schema">
<span class="target" id="structtsk__population__table__t_1ae529f60b9eb4e1faaca99066fa4da00f"></span>char *<code class="sig-name descname">metadata_schema</code><a class="headerlink" href="#c.tsk_population_table_t.metadata_schema" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The metadata schema. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_population_table_init">
<span class="target" id="group___p_o_p_u_l_a_t_i_o_n___t_a_b_l_e___a_p_i___g_r_o_u_p_1gafa0a0d65882859c2fa43ebf7e27b6726"></span>int <code class="sig-name descname">tsk_population_table_init</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_population_table_t" title="tsk_population_table_t">tsk_population_table_t</a> *<em>self</em>, <a class="reference internal" href="#c.tsk_flags_t" title="tsk_flags_t">tsk_flags_t</a> <em>options</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_population_table_init" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Initialises the table by allocating the internal memory. </p>
<p><p><p>This must be called before any operations are performed on the table.
See the <a class="reference internal" href="#sec-c-api-overview-structure"><span class="std std-ref">API structure</span></a> for details on how objects
are initialised and freed.</p>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return 0 on success or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to an uninitialised <a class="reference internal" href="#structtsk__population__table__t"><span class="std std-ref">tsk_population_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">options</span></code>: Allocation time options. Currently unused; should be set to zero to ensure compatibility with later versions of tskit. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_population_table_free">
<span class="target" id="group___p_o_p_u_l_a_t_i_o_n___t_a_b_l_e___a_p_i___g_r_o_u_p_1ga87388a76d20cbb7e41bd3cb345b6f54d"></span>int <code class="sig-name descname">tsk_population_table_free</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_population_table_t" title="tsk_population_table_t">tsk_population_table_t</a> *<em>self</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_population_table_free" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Free the internal memory for the specified table. </p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Always returns 0. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to an initialised <a class="reference internal" href="#structtsk__population__table__t"><span class="std std-ref">tsk_population_table_t</span></a> object. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_population_table_add_row">
<span class="target" id="group___p_o_p_u_l_a_t_i_o_n___t_a_b_l_e___a_p_i___g_r_o_u_p_1ga3c611bd13db95fecf350927e7443b7bc"></span><a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> <code class="sig-name descname">tsk_population_table_add_row</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_population_table_t" title="tsk_population_table_t">tsk_population_table_t</a> *<em>self</em>, <em class="property">const</em> char *<em>metadata</em>, <a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <em>metadata_length</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_population_table_add_row" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Adds a row to this population table. </p>
<p><p><p>Add a new population with the specified <code class="docutils literal notranslate"><span class="pre">metadata</span></code> to the table. A copy of the
<code class="docutils literal notranslate"><span class="pre">metadata</span></code> is immediately taken. See the <a class="reference internal" href="data-model.html#sec-population-table-definition"><span class="std std-ref">table definition</span></a> for details of the columns in this table.</p>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return the ID of the newly added population on success, or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__population__table__t"><span class="std std-ref">tsk_population_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">metadata</span></code>: The metadata to be associated with the new population. This is a pointer to arbitrary memory. Can be <code class="docutils literal notranslate"><span class="pre">NULL</span></code> if <code class="docutils literal notranslate"><span class="pre">metadata_length</span></code> is 0. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">metadata_length</span></code>: The size of the metadata array in bytes. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_population_table_clear">
<span class="target" id="group___p_o_p_u_l_a_t_i_o_n___t_a_b_l_e___a_p_i___g_r_o_u_p_1ga6fbe36e37b7c9806313f544a51b3c1a1"></span>int <code class="sig-name descname">tsk_population_table_clear</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_population_table_t" title="tsk_population_table_t">tsk_population_table_t</a> *<em>self</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_population_table_clear" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Clears this table, setting the number of rows to zero. </p>
<p><p><p>No memory is freed as a result of this operation; please use
<a class="reference internal" href="#c.tsk_population_table_free" title="tsk_population_table_free"><code class="xref c c-func docutils literal notranslate"><span class="pre">tsk_population_table_free()</span></code></a> to free the table’s internal resources. Note that the
metadata schema is not cleared.</p>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return 0 on success or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__population__table__t"><span class="std std-ref">tsk_population_table_t</span></a> object. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_population_table_truncate">
<span class="target" id="group___p_o_p_u_l_a_t_i_o_n___t_a_b_l_e___a_p_i___g_r_o_u_p_1ga696532046bf846a7fdbcba9155ef7954"></span>int <code class="sig-name descname">tsk_population_table_truncate</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_population_table_t" title="tsk_population_table_t">tsk_population_table_t</a> *<em>self</em>, <a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <em>num_rows</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_population_table_truncate" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Truncates this table so that only the first num_rows are retained. </p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return 0 on success or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__population__table__t"><span class="std std-ref">tsk_population_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">num_rows</span></code>: The number of rows to retain in the table. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_population_table_equals">
<span class="target" id="group___p_o_p_u_l_a_t_i_o_n___t_a_b_l_e___a_p_i___g_r_o_u_p_1ga866101c6d56b2c8704b34a2917f8360d"></span>bool <code class="sig-name descname">tsk_population_table_equals</code><span class="sig-paren">(</span><em class="property">const</em> <a class="reference internal" href="#c.tsk_population_table_t" title="tsk_population_table_t">tsk_population_table_t</a> *<em>self</em>, <em class="property">const</em> <a class="reference internal" href="#c.tsk_population_table_t" title="tsk_population_table_t">tsk_population_table_t</a> *<em>other</em>, <a class="reference internal" href="#c.tsk_flags_t" title="tsk_flags_t">tsk_flags_t</a> <em>options</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_population_table_equals" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Returns true if the data in the specified table is identical to the data in this table. </p>
<p><p><p><strong>Options</strong></p>
<p>Options to control the comparison can be specified by providing one or
more of the following bitwise flags. By default (options=0) tables are
considered equal if they are byte-wise identical in all columns,
and their metadata schemas are byte-wise identical.</p>
<dl class="simple">
<dt>TSK_CMP_IGNORE_METADATA</dt><dd><p>Do not include metadata in the comparison. Note that as metadata is the
only column in the population table, two population tables are considered
equal if they have the same number of rows if this flag is specified.</p>
</dd>
</dl>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return true if the specified table is equal to this table. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__population__table__t"><span class="std std-ref">tsk_population_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">other</span></code>: A pointer to a <a class="reference internal" href="#structtsk__population__table__t"><span class="std std-ref">tsk_population_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">options</span></code>: Bitwise comparison options. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_population_table_copy">
<span class="target" id="group___p_o_p_u_l_a_t_i_o_n___t_a_b_l_e___a_p_i___g_r_o_u_p_1gaf0757459b5b340a0ed2c459f36f5fe4f"></span>int <code class="sig-name descname">tsk_population_table_copy</code><span class="sig-paren">(</span><em class="property">const</em> <a class="reference internal" href="#c.tsk_population_table_t" title="tsk_population_table_t">tsk_population_table_t</a> *<em>self</em>, <a class="reference internal" href="#c.tsk_population_table_t" title="tsk_population_table_t">tsk_population_table_t</a> *<em>dest</em>, <a class="reference internal" href="#c.tsk_flags_t" title="tsk_flags_t">tsk_flags_t</a> <em>options</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_population_table_copy" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Copies the state of this table into the specified destination. </p>
<p><p><p>By default the method initialises the specified destination table. If the
destination is already initialised, the <a class="reference internal" href="#c.TSK_NO_INIT" title="TSK_NO_INIT"><code class="xref c c-macro docutils literal notranslate"><span class="pre">TSK_NO_INIT</span></code></a> option should
be supplied to avoid leaking memory.</p>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return 0 on success or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__population__table__t"><span class="std std-ref">tsk_population_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dest</span></code>: A pointer to a <a class="reference internal" href="#structtsk__population__table__t"><span class="std std-ref">tsk_population_table_t</span></a> object. If the TSK_NO_INIT option is specified, this must be an initialised population table. If not, it must be an uninitialised population table. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">options</span></code>: Bitwise option flags. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_population_table_get_row">
<span class="target" id="group___p_o_p_u_l_a_t_i_o_n___t_a_b_l_e___a_p_i___g_r_o_u_p_1ga88172fd1154cced0a9a47f596ff3de33"></span>int <code class="sig-name descname">tsk_population_table_get_row</code><span class="sig-paren">(</span><em class="property">const</em> <a class="reference internal" href="#c.tsk_population_table_t" title="tsk_population_table_t">tsk_population_table_t</a> *<em>self</em>, <a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> <em>index</em>, <a class="reference internal" href="#c.tsk_population_t" title="tsk_population_t">tsk_population_t</a> *<em>row</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_population_table_get_row" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Get the row at the specified index. </p>
<p><p><p>Updates the specified population struct to reflect the values in the specified row.
Pointers to memory within this struct are handled by the table and should <strong>not</strong>
be freed by client code. These pointers are guaranteed to be valid until the
next operation that modifies the table (e.g., by adding a new row), but not afterwards.</p>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return 0 on success or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__population__table__t"><span class="std std-ref">tsk_population_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">index</span></code>: The requested table row. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">row</span></code>: A pointer to a <a class="reference internal" href="#structtsk__population__t"><span class="std std-ref">tsk_population_t</span></a> struct that is updated to reflect the values in the specified row. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_population_table_set_metadata_schema">
<span class="target" id="group___p_o_p_u_l_a_t_i_o_n___t_a_b_l_e___a_p_i___g_r_o_u_p_1gaec2fbbc8abbe76a66110f31bf0e951e6"></span>int <code class="sig-name descname">tsk_population_table_set_metadata_schema</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_population_table_t" title="tsk_population_table_t">tsk_population_table_t</a> *<em>self</em>, <em class="property">const</em> char *<em>metadata_schema</em>, <a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <em>metadata_schema_length</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_population_table_set_metadata_schema" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Set the metadata schema. </p>
<p><p><p>Copies the metadata schema string to this table, replacing any existing.</p>
</p>
 <dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return 0 on success or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__population__table__t"><span class="std std-ref">tsk_population_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">metadata_schema</span></code>: A pointer to a char array </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">metadata_schema_length</span></code>: The size of the metadata schema in bytes. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_population_table_print_state">
<span class="target" id="group___p_o_p_u_l_a_t_i_o_n___t_a_b_l_e___a_p_i___g_r_o_u_p_1gaee39efba7ce5980dffd699e02381017d"></span>void <code class="sig-name descname">tsk_population_table_print_state</code><span class="sig-paren">(</span><em class="property">const</em> <a class="reference internal" href="#c.tsk_population_table_t" title="tsk_population_table_t">tsk_population_table_t</a> *<em>self</em>, FILE *<em>out</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_population_table_print_state" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Print out the state of this table to the specified stream. </p>
<p>This method is intended for debugging purposes and should not be used in production code. The format of the output should <strong>not</strong> be depended on and may change arbitrarily between versions.</p>
<p><dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__population__table__t"><span class="std std-ref">tsk_population_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">out</span></code>: The stream to write the summary to. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="section" id="provenances">
<h3>Provenances<a class="headerlink" href="#provenances" title="Permalink to this headline">¶</a></h3>
<dl class="c struct">
<dt id="c.tsk_provenance_t">
<span class="target" id="structtsk__provenance__t"></span><em class="property">struct </em><code class="sig-name descname">tsk_provenance_t</code><a class="headerlink" href="#c.tsk_provenance_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>A single provenance defined by a row in the provenance table. </p>
<p><p><p>See the <a class="reference internal" href="data-model.html#sec-data-model-definitions"><span class="std std-ref">data model</span></a> section for the definition of
a provenance object and its properties. See the <a class="reference internal" href="provenance.html#sec-provenance"><span class="std std-ref">Provenance</span></a> section
for more information on how provenance records should be structured.</p>
</p>
 </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Members</p>
<dl class="c var">
<dt id="c.tsk_provenance_t.id">
<span class="target" id="structtsk__provenance__t_1a098a09783c1c67c9fe7474239a0187bb"></span><a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> <code class="sig-name descname">id</code><a class="headerlink" href="#c.tsk_provenance_t.id" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Non-negative ID value corresponding to table row. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_provenance_t.timestamp">
<span class="target" id="structtsk__provenance__t_1a93415088ede748a8e674a0034c98226c"></span><em class="property">const</em> char *<code class="sig-name descname">timestamp</code><a class="headerlink" href="#c.tsk_provenance_t.timestamp" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The timestamp. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_provenance_t.timestamp_length">
<span class="target" id="structtsk__provenance__t_1abf05381ceeac287190b7f619459b3d92"></span><a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <code class="sig-name descname">timestamp_length</code><a class="headerlink" href="#c.tsk_provenance_t.timestamp_length" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The timestamp length in bytes. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_provenance_t.record">
<span class="target" id="structtsk__provenance__t_1a2e878c32422bd2fe3717769dc0600694"></span><em class="property">const</em> char *<code class="sig-name descname">record</code><a class="headerlink" href="#c.tsk_provenance_t.record" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The record. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_provenance_t.record_length">
<span class="target" id="structtsk__provenance__t_1ad19ce499587af4198c28e6d9a08799d2"></span><a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <code class="sig-name descname">record_length</code><a class="headerlink" href="#c.tsk_provenance_t.record_length" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The record length in bytes. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="c struct">
<dt id="c.tsk_provenance_table_t">
<span class="target" id="structtsk__provenance__table__t"></span><em class="property">struct </em><code class="sig-name descname">tsk_provenance_table_t</code><a class="headerlink" href="#c.tsk_provenance_table_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The provenance table. </p>
<p><p><p>See the provenance <a class="reference internal" href="data-model.html#sec-provenance-table-definition"><span class="std std-ref">table definition</span></a> for
details of the columns in this table.</p>
</p>
 </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Members</p>
<dl class="c var">
<dt id="c.tsk_provenance_table_t.num_rows">
<span class="target" id="structtsk__provenance__table__t_1a9a204d42ae303fd917987ad0c580ab59"></span><a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <code class="sig-name descname">num_rows</code><a class="headerlink" href="#c.tsk_provenance_table_t.num_rows" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The number of rows in this table. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_provenance_table_t.timestamp_length">
<span class="target" id="structtsk__provenance__table__t_1abf05381ceeac287190b7f619459b3d92"></span><a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <code class="sig-name descname">timestamp_length</code><a class="headerlink" href="#c.tsk_provenance_table_t.timestamp_length" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The total length of the timestamp column. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_provenance_table_t.record_length">
<span class="target" id="structtsk__provenance__table__t_1ad19ce499587af4198c28e6d9a08799d2"></span><a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <code class="sig-name descname">record_length</code><a class="headerlink" href="#c.tsk_provenance_table_t.record_length" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The total length of the record column. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_provenance_table_t.timestamp">
<span class="target" id="structtsk__provenance__table__t_1a2f26eae919bf9f5656b4250df8743e28"></span>char *<code class="sig-name descname">timestamp</code><a class="headerlink" href="#c.tsk_provenance_table_t.timestamp" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The timestamp column. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_provenance_table_t.timestamp_offset">
<span class="target" id="structtsk__provenance__table__t_1a331b222440b0e0089521b09df7136f19"></span><a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> *<code class="sig-name descname">timestamp_offset</code><a class="headerlink" href="#c.tsk_provenance_table_t.timestamp_offset" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The timestamp_offset column. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_provenance_table_t.record">
<span class="target" id="structtsk__provenance__table__t_1a4dc403c4cf8abce2f2c972f8304c1edd"></span>char *<code class="sig-name descname">record</code><a class="headerlink" href="#c.tsk_provenance_table_t.record" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The record column. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_provenance_table_t.record_offset">
<span class="target" id="structtsk__provenance__table__t_1ade28a0eba93e209bcea2eea4b9cd145f"></span><a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> *<code class="sig-name descname">record_offset</code><a class="headerlink" href="#c.tsk_provenance_table_t.record_offset" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The record_offset column. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_provenance_table_init">
<span class="target" id="group___p_r_o_v_e_n_a_n_c_e___t_a_b_l_e___a_p_i___g_r_o_u_p_1gacb30f6a667f5703e4fb3a4bc15435710"></span>int <code class="sig-name descname">tsk_provenance_table_init</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_provenance_table_t" title="tsk_provenance_table_t">tsk_provenance_table_t</a> *<em>self</em>, <a class="reference internal" href="#c.tsk_flags_t" title="tsk_flags_t">tsk_flags_t</a> <em>options</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_provenance_table_init" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Initialises the table by allocating the internal memory. </p>
<p><p><p>This must be called before any operations are performed on the table.
See the <a class="reference internal" href="#sec-c-api-overview-structure"><span class="std std-ref">API structure</span></a> for details on how objects
are initialised and freed.</p>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return 0 on success or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to an uninitialised <a class="reference internal" href="#structtsk__provenance__table__t"><span class="std std-ref">tsk_provenance_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">options</span></code>: Allocation time options. Currently unused; should be set to zero to ensure compatibility with later versions of tskit. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_provenance_table_free">
<span class="target" id="group___p_r_o_v_e_n_a_n_c_e___t_a_b_l_e___a_p_i___g_r_o_u_p_1gaae2752601bef22155a116ba4b1783622"></span>int <code class="sig-name descname">tsk_provenance_table_free</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_provenance_table_t" title="tsk_provenance_table_t">tsk_provenance_table_t</a> *<em>self</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_provenance_table_free" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Free the internal memory for the specified table. </p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Always returns 0. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to an initialised <a class="reference internal" href="#structtsk__provenance__table__t"><span class="std std-ref">tsk_provenance_table_t</span></a> object. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_provenance_table_add_row">
<span class="target" id="group___p_r_o_v_e_n_a_n_c_e___t_a_b_l_e___a_p_i___g_r_o_u_p_1ga1bcc15e57632a6cfa778b7e5f3c91f72"></span><a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> <code class="sig-name descname">tsk_provenance_table_add_row</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_provenance_table_t" title="tsk_provenance_table_t">tsk_provenance_table_t</a> *<em>self</em>, <em class="property">const</em> char *<em>timestamp</em>, <a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <em>timestamp_length</em>, <em class="property">const</em> char *<em>record</em>, <a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <em>record_length</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_provenance_table_add_row" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Adds a row to this provenance table. </p>
<p><p><p>Add a new provenance with the specified <code class="docutils literal notranslate"><span class="pre">timestamp</span></code> and <code class="docutils literal notranslate"><span class="pre">record</span></code> to the table.
Copies of the <code class="docutils literal notranslate"><span class="pre">timestamp</span></code> and <code class="docutils literal notranslate"><span class="pre">record</span></code> are immediately taken.
See the <a class="reference internal" href="data-model.html#sec-provenance-table-definition"><span class="std std-ref">table definition</span></a>
for details of the columns in this table.</p>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return the ID of the newly added provenance on success, or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__provenance__table__t"><span class="std std-ref">tsk_provenance_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">timestamp</span></code>: The timestamp to be associated with the new provenance. This is a pointer to arbitrary memory. Can be <code class="docutils literal notranslate"><span class="pre">NULL</span></code> if <code class="docutils literal notranslate"><span class="pre">timestamp_length</span></code> is 0. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">timestamp_length</span></code>: The size of the timestamp array in bytes. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">record</span></code>: The record to be associated with the new provenance. This is a pointer to arbitrary memory. Can be <code class="docutils literal notranslate"><span class="pre">NULL</span></code> if <code class="docutils literal notranslate"><span class="pre">record_length</span></code> is 0. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">record_length</span></code>: The size of the record array in bytes. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_provenance_table_clear">
<span class="target" id="group___p_r_o_v_e_n_a_n_c_e___t_a_b_l_e___a_p_i___g_r_o_u_p_1ga8be37ce453361594d48ebfdd28d3a1d8"></span>int <code class="sig-name descname">tsk_provenance_table_clear</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_provenance_table_t" title="tsk_provenance_table_t">tsk_provenance_table_t</a> *<em>self</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_provenance_table_clear" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Clears this table, setting the number of rows to zero. </p>
<p><p><p>No memory is freed as a result of this operation; please use
<a class="reference internal" href="#c.tsk_provenance_table_free" title="tsk_provenance_table_free"><code class="xref c c-func docutils literal notranslate"><span class="pre">tsk_provenance_table_free()</span></code></a> to free the table’s internal resources.</p>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return 0 on success or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__provenance__table__t"><span class="std std-ref">tsk_provenance_table_t</span></a> object. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_provenance_table_truncate">
<span class="target" id="group___p_r_o_v_e_n_a_n_c_e___t_a_b_l_e___a_p_i___g_r_o_u_p_1gab6b094540d626f9ff4f3697c6ea57c19"></span>int <code class="sig-name descname">tsk_provenance_table_truncate</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_provenance_table_t" title="tsk_provenance_table_t">tsk_provenance_table_t</a> *<em>self</em>, <a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <em>num_rows</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_provenance_table_truncate" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Truncates this table so that only the first num_rows are retained. </p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return 0 on success or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__provenance__table__t"><span class="std std-ref">tsk_provenance_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">num_rows</span></code>: The number of rows to retain in the table. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_provenance_table_equals">
<span class="target" id="group___p_r_o_v_e_n_a_n_c_e___t_a_b_l_e___a_p_i___g_r_o_u_p_1gaadb808274f22704319f1b29c23358854"></span>bool <code class="sig-name descname">tsk_provenance_table_equals</code><span class="sig-paren">(</span><em class="property">const</em> <a class="reference internal" href="#c.tsk_provenance_table_t" title="tsk_provenance_table_t">tsk_provenance_table_t</a> *<em>self</em>, <em class="property">const</em> <a class="reference internal" href="#c.tsk_provenance_table_t" title="tsk_provenance_table_t">tsk_provenance_table_t</a> *<em>other</em>, <a class="reference internal" href="#c.tsk_flags_t" title="tsk_flags_t">tsk_flags_t</a> <em>options</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_provenance_table_equals" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Returns true if the data in the specified table is identical to the data in this table. </p>
<p><p><p><strong>Options</strong></p>
<p>Options to control the comparison can be specified by providing one or
more of the following bitwise flags. By default (options=0) tables are
considered equal if they are byte-wise identical in all columns.</p>
<dl class="simple">
<dt>TSK_CMP_IGNORE_TIMESTAMPS</dt><dd><p>Do not include the timestamp column when comparing provenance
tables.</p>
</dd>
</dl>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return true if the specified table is equal to this table. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__provenance__table__t"><span class="std std-ref">tsk_provenance_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">other</span></code>: A pointer to a <a class="reference internal" href="#structtsk__provenance__table__t"><span class="std std-ref">tsk_provenance_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">options</span></code>: Bitwise comparison options. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_provenance_table_copy">
<span class="target" id="group___p_r_o_v_e_n_a_n_c_e___t_a_b_l_e___a_p_i___g_r_o_u_p_1ga9d358ddade2400e684d30a3bc4f1334c"></span>int <code class="sig-name descname">tsk_provenance_table_copy</code><span class="sig-paren">(</span><em class="property">const</em> <a class="reference internal" href="#c.tsk_provenance_table_t" title="tsk_provenance_table_t">tsk_provenance_table_t</a> *<em>self</em>, <a class="reference internal" href="#c.tsk_provenance_table_t" title="tsk_provenance_table_t">tsk_provenance_table_t</a> *<em>dest</em>, <a class="reference internal" href="#c.tsk_flags_t" title="tsk_flags_t">tsk_flags_t</a> <em>options</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_provenance_table_copy" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Copies the state of this table into the specified destination. </p>
<p><p><p>By default the method initialises the specified destination table. If the
destination is already initialised, the <a class="reference internal" href="#c.TSK_NO_INIT" title="TSK_NO_INIT"><code class="xref c c-macro docutils literal notranslate"><span class="pre">TSK_NO_INIT</span></code></a> option should
be supplied to avoid leaking memory.</p>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return 0 on success or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__provenance__table__t"><span class="std std-ref">tsk_provenance_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dest</span></code>: A pointer to a <a class="reference internal" href="#structtsk__provenance__table__t"><span class="std std-ref">tsk_provenance_table_t</span></a> object. If the TSK_NO_INIT option is specified, this must be an initialised provenance table. If not, it must be an uninitialised provenance table. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">options</span></code>: Bitwise option flags. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_provenance_table_get_row">
<span class="target" id="group___p_r_o_v_e_n_a_n_c_e___t_a_b_l_e___a_p_i___g_r_o_u_p_1gab72d0f8e4db6f3c37c513125af8247eb"></span>int <code class="sig-name descname">tsk_provenance_table_get_row</code><span class="sig-paren">(</span><em class="property">const</em> <a class="reference internal" href="#c.tsk_provenance_table_t" title="tsk_provenance_table_t">tsk_provenance_table_t</a> *<em>self</em>, <a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> <em>index</em>, <a class="reference internal" href="#c.tsk_provenance_t" title="tsk_provenance_t">tsk_provenance_t</a> *<em>row</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_provenance_table_get_row" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Get the row at the specified index. </p>
<p><p><p>Updates the specified provenance struct to reflect the values in the specified row.
Pointers to memory within this struct are handled by the table and should <strong>not</strong>
be freed by client code. These pointers are guaranteed to be valid until the
next operation that modifies the table (e.g., by adding a new row), but not afterwards.</p>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return 0 on success or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__provenance__table__t"><span class="std std-ref">tsk_provenance_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">index</span></code>: The requested table row. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">row</span></code>: A pointer to a <a class="reference internal" href="#structtsk__provenance__t"><span class="std std-ref">tsk_provenance_t</span></a> struct that is updated to reflect the values in the specified row. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_provenance_table_print_state">
<span class="target" id="group___p_r_o_v_e_n_a_n_c_e___t_a_b_l_e___a_p_i___g_r_o_u_p_1ga82802daf957621a62ec9f5c65896fc60"></span>void <code class="sig-name descname">tsk_provenance_table_print_state</code><span class="sig-paren">(</span><em class="property">const</em> <a class="reference internal" href="#c.tsk_provenance_table_t" title="tsk_provenance_table_t">tsk_provenance_table_t</a> *<em>self</em>, FILE *<em>out</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_provenance_table_print_state" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Print out the state of this table to the specified stream. </p>
<p>This method is intended for debugging purposes and should not be used in production code. The format of the output should <strong>not</strong> be depended on and may change arbitrarily between versions.</p>
<p><dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a <a class="reference internal" href="#structtsk__provenance__table__t"><span class="std std-ref">tsk_provenance_table_t</span></a> object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">out</span></code>: The stream to write the summary to. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
</div>
<div class="section" id="table-indexes">
<span id="sec-c-api-table-indexes"></span><h2>Table indexes<a class="headerlink" href="#table-indexes" title="Permalink to this headline">¶</a></h2>
<p>Along with the tree sequence <a class="reference internal" href="data-model.html#sec-valid-tree-sequence-requirements"><span class="std std-ref">ordering requirements</span></a>, the <a class="reference internal" href="data-model.html#sec-table-indexes"><span class="std std-ref">Table indexes</span></a>
allow us to take a table collection and efficiently operate
on the trees defined within it. This section defines the rules
for safely operating on table indexes and their life-cycle.</p>
<p>The edge index used for tree generation consists of two arrays,
each holding <code class="docutils literal notranslate"><span class="pre">N</span></code> edge IDs (where <code class="docutils literal notranslate"><span class="pre">N</span></code> is the size of the edge
table). When the index is computed using
<a class="reference internal" href="#c.tsk_table_collection_build_index" title="tsk_table_collection_build_index"><code class="xref c c-func docutils literal notranslate"><span class="pre">tsk_table_collection_build_index()</span></code></a>, we store the current size
of the edge table along with the two arrays of edge IDs. The
function <a class="reference internal" href="#c.tsk_table_collection_has_index" title="tsk_table_collection_has_index"><code class="xref c c-func docutils literal notranslate"><span class="pre">tsk_table_collection_has_index()</span></code></a> then returns true
iff (a) both of these arrays are not NULL and (b) the stored
number of edges is the same as the current size of the edge table.</p>
<p>Updating the edge table does not automatically invalidate the indexes.
Thus, if we call <a class="reference internal" href="#c.tsk_edge_table_clear" title="tsk_edge_table_clear"><code class="xref c c-func docutils literal notranslate"><span class="pre">tsk_edge_table_clear()</span></code></a> on an edge table
which has an index, this index will still exist. However, it will
not be considered a valid index by
<a class="reference internal" href="#c.tsk_table_collection_has_index" title="tsk_table_collection_has_index"><code class="xref c c-func docutils literal notranslate"><span class="pre">tsk_table_collection_has_index()</span></code></a> because of the size mismatch.
Similarly for functions that increase the size of the table.
Note that it is possible then to have
<a class="reference internal" href="#c.tsk_table_collection_has_index" title="tsk_table_collection_has_index"><code class="xref c c-func docutils literal notranslate"><span class="pre">tsk_table_collection_has_index()</span></code></a> return true, but the index
is not actually valid, if, for example, the user has manipulated the
node and edge tables to describe a different topology, which happens
to have the same number of edges. The behaviour of methods that
use the indexes will be undefined in this case.</p>
<p>Thus, if you are manipulating an existing table collection that may
be indexed, it is always recommended to call
<a class="reference internal" href="#c.tsk_table_collection_drop_index" title="tsk_table_collection_drop_index"><code class="xref c c-func docutils literal notranslate"><span class="pre">tsk_table_collection_drop_index()</span></code></a> first.</p>
</div>
<div class="section" id="tree-sequences">
<span id="sec-c-api-tree-sequences"></span><h2>Tree sequences<a class="headerlink" href="#tree-sequences" title="Permalink to this headline">¶</a></h2>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This part of the API is more preliminary and may be subject to change.</p>
</div>
<dl class="c struct">
<dt id="c.tsk_treeseq_t">
<span class="target" id="structtsk__treeseq__t"></span><em class="property">struct </em><code class="sig-name descname">tsk_treeseq_t</code><a class="headerlink" href="#c.tsk_treeseq_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The tree sequence object. </p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_treeseq_init">
<span class="target" id="group___t_r_e_e_s_e_q___a_p_i___g_r_o_u_p_1ga2702faa11d6475ffeab4eb7d2e449414"></span>int <code class="sig-name descname">tsk_treeseq_init</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_treeseq_t" title="tsk_treeseq_t">tsk_treeseq_t</a> *<em>self</em>, <em class="property">const</em> <a class="reference internal" href="#c.tsk_table_collection_t" title="tsk_table_collection_t">tsk_table_collection_t</a> *<em>tables</em>, <a class="reference internal" href="#c.tsk_flags_t" title="tsk_flags_t">tsk_flags_t</a> <em>options</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_treeseq_init" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c function">
<dt id="c.tsk_treeseq_load">
<span class="target" id="group___t_r_e_e_s_e_q___a_p_i___g_r_o_u_p_1ga0f21fed1ef9b98429f4e6e6286cb8187"></span>int <code class="sig-name descname">tsk_treeseq_load</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_treeseq_t" title="tsk_treeseq_t">tsk_treeseq_t</a> *<em>self</em>, <em class="property">const</em> char *<em>filename</em>, <a class="reference internal" href="#c.tsk_flags_t" title="tsk_flags_t">tsk_flags_t</a> <em>options</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_treeseq_load" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c function">
<dt id="c.tsk_treeseq_loadf">
<span class="target" id="group___t_r_e_e_s_e_q___a_p_i___g_r_o_u_p_1gad393f5920b5fc7b5c1e2b3a2aa3212cf"></span>int <code class="sig-name descname">tsk_treeseq_loadf</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_treeseq_t" title="tsk_treeseq_t">tsk_treeseq_t</a> *<em>self</em>, FILE *<em>file</em>, <a class="reference internal" href="#c.tsk_flags_t" title="tsk_flags_t">tsk_flags_t</a> <em>options</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_treeseq_loadf" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c function">
<dt id="c.tsk_treeseq_dump">
<span class="target" id="group___t_r_e_e_s_e_q___a_p_i___g_r_o_u_p_1gaa45d312f78dd562d8988ad792dece208"></span>int <code class="sig-name descname">tsk_treeseq_dump</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_treeseq_t" title="tsk_treeseq_t">tsk_treeseq_t</a> *<em>self</em>, <em class="property">const</em> char *<em>filename</em>, <a class="reference internal" href="#c.tsk_flags_t" title="tsk_flags_t">tsk_flags_t</a> <em>options</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_treeseq_dump" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c function">
<dt id="c.tsk_treeseq_dumpf">
<span class="target" id="group___t_r_e_e_s_e_q___a_p_i___g_r_o_u_p_1ga58f52bdab9f123f42ce944da5c73a233"></span>int <code class="sig-name descname">tsk_treeseq_dumpf</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_treeseq_t" title="tsk_treeseq_t">tsk_treeseq_t</a> *<em>self</em>, FILE *<em>file</em>, <a class="reference internal" href="#c.tsk_flags_t" title="tsk_flags_t">tsk_flags_t</a> <em>options</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_treeseq_dumpf" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c function">
<dt id="c.tsk_treeseq_copy_tables">
<span class="target" id="group___t_r_e_e_s_e_q___a_p_i___g_r_o_u_p_1gab51142c1466339407b5c759337af1261"></span>int <code class="sig-name descname">tsk_treeseq_copy_tables</code><span class="sig-paren">(</span><em class="property">const</em> <a class="reference internal" href="#c.tsk_treeseq_t" title="tsk_treeseq_t">tsk_treeseq_t</a> *<em>self</em>, <a class="reference internal" href="#c.tsk_table_collection_t" title="tsk_table_collection_t">tsk_table_collection_t</a> *<em>tables</em>, <a class="reference internal" href="#c.tsk_flags_t" title="tsk_flags_t">tsk_flags_t</a> <em>options</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_treeseq_copy_tables" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c function">
<dt id="c.tsk_treeseq_free">
<span class="target" id="group___t_r_e_e_s_e_q___a_p_i___g_r_o_u_p_1ga394bc462e51fccc90a6fd599065e16c4"></span>int <code class="sig-name descname">tsk_treeseq_free</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_treeseq_t" title="tsk_treeseq_t">tsk_treeseq_t</a> *<em>self</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_treeseq_free" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c function">
<dt id="c.tsk_treeseq_print_state">
<span class="target" id="group___t_r_e_e_s_e_q___a_p_i___g_r_o_u_p_1gab94d9da672de8d05e167d71c86abeec1"></span>void <code class="sig-name descname">tsk_treeseq_print_state</code><span class="sig-paren">(</span><em class="property">const</em> <a class="reference internal" href="#c.tsk_treeseq_t" title="tsk_treeseq_t">tsk_treeseq_t</a> *<em>self</em>, FILE *<em>out</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_treeseq_print_state" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

</div>
<div class="section" id="trees">
<h2>Trees<a class="headerlink" href="#trees" title="Permalink to this headline">¶</a></h2>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This part of the API is more preliminary and may be subject to change.</p>
</div>
<dl class="c struct">
<dt id="c.tsk_tree_t">
<span class="target" id="structtsk__tree__t"></span><em class="property">struct </em><code class="sig-name descname">tsk_tree_t</code><a class="headerlink" href="#c.tsk_tree_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>A single tree in a tree sequence. </p>
<p><p><p>A <code class="docutils literal notranslate"><span class="pre">tsk_tree_t</span></code> object has two basic functions:</p>
<ol class="arabic simple">
<li><p>Represent the state of a single tree in a tree sequence;</p></li>
<li><p>Provide methods to transform this state into different trees in the sequence.</p></li>
</ol>
<p>The state of a single tree in the tree sequence is represented using the
quintuply linked encoding: please see the
<a class="reference internal" href="data-model.html#sec-data-model-tree-structure"><span class="std std-ref">data model</span></a> section for details on
how this works. The left-to-right ordering of nodes in this encoding
is arbitrary, and may change depending on the order in which trees are
accessed within the sequence. Please see the
<a class="reference internal" href="#sec-c-api-examples-tree-traversals"><span class="std std-ref">Tree traversals</span></a> examples for recommended
usage.</p>
<p>On initialisation, a tree is in a “null” state: each sample is a
root and there are no edges. We must call one of the ‘seeking’ methods
to make the state of the tree object correspond to a particular tree
in the sequence. Please see the
<a class="reference internal" href="#sec-c-api-examples-tree-iteration"><span class="std std-ref">Tree iteration</span></a> examples for recommended
usage.</p>
</p>
 </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Members</p>
<dl class="c var">
<dt id="c.tsk_tree_t.tree_sequence">
<span class="target" id="structtsk__tree__t_1a251d481df680bad0d57e696681cb400a"></span><em class="property">const</em> <a class="reference internal" href="#c.tsk_treeseq_t" title="tsk_treeseq_t">tsk_treeseq_t</a> *<code class="sig-name descname">tree_sequence</code><a class="headerlink" href="#c.tsk_tree_t.tree_sequence" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The parent tree sequence. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_tree_t.left_root">
<span class="target" id="structtsk__tree__t_1a01e1b8a447c109691f86ef15fb559a95"></span><a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> <code class="sig-name descname">left_root</code><a class="headerlink" href="#c.tsk_tree_t.left_root" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The leftmost root in the tree. Roots are siblings, and other roots can be found using right_sib. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_tree_t.parent">
<span class="target" id="structtsk__tree__t_1a46da4afff95627d99f17ba698625383b"></span><a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> *<code class="sig-name descname">parent</code><a class="headerlink" href="#c.tsk_tree_t.parent" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The parent of node u is parent[u]. Equal to TSK_NULL if node u is a root or is not a node in the current tree. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_tree_t.left_child">
<span class="target" id="structtsk__tree__t_1a4e73edd2f3c0098809ff29b2f8b25fab"></span><a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> *<code class="sig-name descname">left_child</code><a class="headerlink" href="#c.tsk_tree_t.left_child" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The leftmost child of node u is left_child[u]. Equal to TSK_NULL if node u is a leaf or is not a node in the current tree. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_tree_t.right_child">
<span class="target" id="structtsk__tree__t_1a4f67f15f9a4aeb95e2b0fb6becb24541"></span><a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> *<code class="sig-name descname">right_child</code><a class="headerlink" href="#c.tsk_tree_t.right_child" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The rightmost child of node u is right_child[u]. Equal to TSK_NULL if node u is a leaf or is not a node in the current tree. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_tree_t.left_sib">
<span class="target" id="structtsk__tree__t_1aea3a2306461842fa6684d0b39b4a611e"></span><a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> *<code class="sig-name descname">left_sib</code><a class="headerlink" href="#c.tsk_tree_t.left_sib" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The sibling to the left of node u is left_sib[u]. Equal to TSK_NULL if node u has no siblings to its left. </p>
</dd></dl>

<dl class="c var">
<dt id="c.tsk_tree_t.right_sib">
<span class="target" id="structtsk__tree__t_1a583f0d4f0339db2fca190287c89fc4ec"></span><a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> *<code class="sig-name descname">right_sib</code><a class="headerlink" href="#c.tsk_tree_t.right_sib" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The sibling to the right of node u is right_sib[u]. Equal to TSK_NULL if node u has no siblings to its right. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_tree_init">
<span class="target" id="group___t_r_e_e___a_p_i___g_r_o_u_p_1ga389f1da76d28c98fd7043d796ba9f20c"></span>int <code class="sig-name descname">tsk_tree_init</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_tree_t" title="tsk_tree_t">tsk_tree_t</a> *<em>self</em>, <em class="property">const</em> <a class="reference internal" href="#c.tsk_treeseq_t" title="tsk_treeseq_t">tsk_treeseq_t</a> *<em>tree_sequence</em>, <a class="reference internal" href="#c.tsk_flags_t" title="tsk_flags_t">tsk_flags_t</a> <em>options</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_tree_init" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c function">
<dt id="c.tsk_tree_free">
<span class="target" id="group___t_r_e_e___a_p_i___g_r_o_u_p_1ga14193fa5e4fda6368b01401a668bb191"></span>int <code class="sig-name descname">tsk_tree_free</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_tree_t" title="tsk_tree_t">tsk_tree_t</a> *<em>self</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_tree_free" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c function">
<dt id="c.tsk_tree_get_index">
<span class="target" id="group___t_r_e_e___a_p_i___g_r_o_u_p_1ga0a108b43c4345797e84b2c885920ad0d"></span><a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> <code class="sig-name descname">tsk_tree_get_index</code><span class="sig-paren">(</span><em class="property">const</em> <a class="reference internal" href="#c.tsk_tree_t" title="tsk_tree_t">tsk_tree_t</a> *<em>self</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_tree_get_index" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c function">
<dt id="c.tsk_tree_get_num_roots">
<span class="target" id="group___t_r_e_e___a_p_i___g_r_o_u_p_1ga0d916ba54955223a427edc66c0b002b2"></span><a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> <code class="sig-name descname">tsk_tree_get_num_roots</code><span class="sig-paren">(</span><em class="property">const</em> <a class="reference internal" href="#c.tsk_tree_t" title="tsk_tree_t">tsk_tree_t</a> *<em>self</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_tree_get_num_roots" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c function">
<dt id="c.tsk_tree_first">
<span class="target" id="group___t_r_e_e___a_p_i___g_r_o_u_p_1ga4cea7b312cc66ce4ffca196e9529d299"></span>int <code class="sig-name descname">tsk_tree_first</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_tree_t" title="tsk_tree_t">tsk_tree_t</a> *<em>self</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_tree_first" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c function">
<dt id="c.tsk_tree_last">
<span class="target" id="group___t_r_e_e___a_p_i___g_r_o_u_p_1ga11db51cf63331fa0511c753d1e97b6d0"></span>int <code class="sig-name descname">tsk_tree_last</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_tree_t" title="tsk_tree_t">tsk_tree_t</a> *<em>self</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_tree_last" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c function">
<dt id="c.tsk_tree_next">
<span class="target" id="group___t_r_e_e___a_p_i___g_r_o_u_p_1gad6ddc60657369251437a18ca85a969a9"></span>int <code class="sig-name descname">tsk_tree_next</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_tree_t" title="tsk_tree_t">tsk_tree_t</a> *<em>self</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_tree_next" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c function">
<dt id="c.tsk_tree_prev">
<span class="target" id="group___t_r_e_e___a_p_i___g_r_o_u_p_1ga5bfd6bd7dd1aca258fcc0d636f60f58e"></span>int <code class="sig-name descname">tsk_tree_prev</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_tree_t" title="tsk_tree_t">tsk_tree_t</a> *<em>self</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_tree_prev" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c function">
<dt id="c.tsk_tree_clear">
<span class="target" id="group___t_r_e_e___a_p_i___g_r_o_u_p_1ga76c78f0831f23002866813a6e170f56a"></span>int <code class="sig-name descname">tsk_tree_clear</code><span class="sig-paren">(</span><a class="reference internal" href="#c.tsk_tree_t" title="tsk_tree_t">tsk_tree_t</a> *<em>self</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_tree_clear" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c function">
<dt id="c.tsk_tree_print_state">
<span class="target" id="group___t_r_e_e___a_p_i___g_r_o_u_p_1ga780f2d0471fc0cba8057096fd169218a"></span>void <code class="sig-name descname">tsk_tree_print_state</code><span class="sig-paren">(</span><em class="property">const</em> <a class="reference internal" href="#c.tsk_tree_t" title="tsk_tree_t">tsk_tree_t</a> *<em>self</em>, FILE *<em>out</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_tree_print_state" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

</div>
<div class="section" id="low-level-sorting">
<span id="sec-c-api-low-level-sorting"></span><h2>Low-level sorting<a class="headerlink" href="#low-level-sorting" title="Permalink to this headline">¶</a></h2>
<p>In some highly performance sensitive cases it can be useful to
have more control over the process of sorting tables. This low-level
API allows a user to provide their own edge sorting function.
This can be useful, for example, to use parallel sorting algorithms,
or to take advantage of the more efficient sorting procedures
available in C++. It is the user’s responsibility to ensure that the
edge sorting requirements are fulfilled by this function.</p>
<div class="admonition-todo admonition" id="id2">
<p class="admonition-title">Todo</p>
<p>Create an idiomatic C++11 example where we load a table collection
file from argv[1], and sort the edges  using std::sort, based
on the example in tests/test_minimal_cpp.cpp. We can include
this in the examples below, and link to it here.</p>
</div>
<dl class="c struct">
<dt id="c._tsk_table_sorter_t">
<span class="target" id="struct__tsk__table__sorter__t"></span><em class="property">struct </em><code class="sig-name descname">_tsk_table_sorter_t</code><a class="headerlink" href="#c._tsk_table_sorter_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Low-level table sorting method. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Members</p>
<dl class="c var">
<dt id="c._tsk_table_sorter_t.tables">
<span class="target" id="struct__tsk__table__sorter__t_1a7f5f04d836d6cafb7c24ff7df5fb54d9"></span><a class="reference internal" href="#c.tsk_table_collection_t" title="tsk_table_collection_t">tsk_table_collection_t</a> *<code class="sig-name descname">tables</code><a class="headerlink" href="#c._tsk_table_sorter_t.tables" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The input tables that are being sorted. </p>
</dd></dl>

<dl class="c var">
<dt id="c._tsk_table_sorter_t.sort_edges">
<span class="target" id="struct__tsk__table__sorter__t_1a79880a1028fbc8d6b5346c60b0127e4e"></span>int (*<code class="sig-name descname">sort_edges</code>)<span class="sig-paren">(</span><em class="property">struct</em> <a class="reference internal" href="#c._tsk_table_sorter_t" title="_tsk_table_sorter_t">_tsk_table_sorter_t</a> *self, <a class="reference internal" href="#c.tsk_size_t" title="tsk_size_t">tsk_size_t</a> start<span class="sig-paren">)</span><a class="headerlink" href="#c._tsk_table_sorter_t.sort_edges" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The edge sorting function. If set to NULL, edges are not sorted. </p>
</dd></dl>

<dl class="c var">
<dt id="c._tsk_table_sorter_t.user_data">
<span class="target" id="struct__tsk__table__sorter__t_1a0f53d287ac7c064d1a49d4bd93ca1cb9"></span>void *<code class="sig-name descname">user_data</code><a class="headerlink" href="#c._tsk_table_sorter_t.user_data" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>An opaque pointer for use by client code. </p>
</dd></dl>

<dl class="c var">
<dt id="c._tsk_table_sorter_t.site_id_map">
<span class="target" id="struct__tsk__table__sorter__t_1a3217405449e28b370cef18d2f5f508ca"></span><a class="reference internal" href="#c.tsk_id_t" title="tsk_id_t">tsk_id_t</a> *<code class="sig-name descname">site_id_map</code><a class="headerlink" href="#c._tsk_table_sorter_t.site_id_map" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Mapping from input site IDs to output site IDs. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_table_sorter_init">
<span class="target" id="group___t_a_b_l_e___s_o_r_t_e_r___a_p_i___g_r_o_u_p_1ga0080b5e0ef3e2a96fe2cb271bb136fc8"></span>int <code class="sig-name descname">tsk_table_sorter_init</code><span class="sig-paren">(</span><em class="property">struct</em> <a class="reference internal" href="#c._tsk_table_sorter_t" title="_tsk_table_sorter_t">_tsk_table_sorter_t</a> *<em>self</em>, <a class="reference internal" href="#c.tsk_table_collection_t" title="tsk_table_collection_t">tsk_table_collection_t</a> *<em>tables</em>, <a class="reference internal" href="#c.tsk_flags_t" title="tsk_flags_t">tsk_flags_t</a> <em>options</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_table_sorter_init" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Initialises the memory for the sorter object. </p>
<p><p><p>This must be called before any operations are performed on the
table sorter and initialises all fields. The <code class="docutils literal notranslate"><span class="pre">edge_sort</span></code> function
is set to the default method using qsort. The <code class="docutils literal notranslate"><span class="pre">user_data</span></code>
field is set to NULL.
This method supports the same options as
<a class="reference internal" href="#c.tsk_table_collection_sort" title="tsk_table_collection_sort"><code class="xref c c-func docutils literal notranslate"><span class="pre">tsk_table_collection_sort()</span></code></a>.</p>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return 0 on success or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to an uninitialised tsk_table_sorter_t object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tables</span></code>: The table collection to sort. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">options</span></code>: Sorting options. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_table_sorter_run">
<span class="target" id="group___t_a_b_l_e___s_o_r_t_e_r___a_p_i___g_r_o_u_p_1gaa76e4ac03b99f1fc23ad95d33727a20c"></span>int <code class="sig-name descname">tsk_table_sorter_run</code><span class="sig-paren">(</span><em class="property">struct</em> <a class="reference internal" href="#c._tsk_table_sorter_t" title="_tsk_table_sorter_t">_tsk_table_sorter_t</a> *<em>self</em>, <em class="property">const</em> <a class="reference internal" href="#c.tsk_bookmark_t" title="tsk_bookmark_t">tsk_bookmark_t</a> *<em>start</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_table_sorter_run" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Runs the sort using the configured functions. </p>
<p><p><p>Runs the sorting process:</p>
<ol class="arabic simple">
<li><p>Drop the table indexes.</p></li>
<li><p>If the <code class="docutils literal notranslate"><span class="pre">sort_edges</span></code> function pointer is not NULL, run it. The
first parameter to the called function will be a pointer to this
table_sorter_t object. The second parameter will be the value
<code class="docutils literal notranslate"><span class="pre">start.edges</span></code>. This specifies the offset at which sorting should
start in the edge table. This offset is guaranteed to be within the
bounds of the edge table.</p></li>
<li><p>Sort the site table, building the mapping between site IDs in the
current and sorted tables.</p></li>
<li><p>Sort the mutation table.</p></li>
</ol>
<p>If an error occurs during the execution of a user-supplied
sorting function a non-zero value must be returned. This value
will then be returned by <code class="docutils literal notranslate"><span class="pre">tsk_table_sorter_run</span></code>. The error
return value should be chosen to avoid conflicts with tskit error
codes.</p>
<p>See <a class="reference internal" href="#c.tsk_table_collection_sort" title="tsk_table_collection_sort"><code class="xref c c-func docutils literal notranslate"><span class="pre">tsk_table_collection_sort()</span></code></a> for details on the <code class="docutils literal notranslate"><span class="pre">start</span></code> parameter.</p>
</p>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Return 0 on success or a negative value on failure. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to a tsk_table_sorter_t object. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">start</span></code>: The position in the tables at which sorting starts. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.tsk_table_sorter_free">
<span class="target" id="group___t_a_b_l_e___s_o_r_t_e_r___a_p_i___g_r_o_u_p_1ga37f3b9ac24535e967ec07872053627e6"></span>int <code class="sig-name descname">tsk_table_sorter_free</code><span class="sig-paren">(</span><em class="property">struct</em> <a class="reference internal" href="#c._tsk_table_sorter_t" title="_tsk_table_sorter_t">_tsk_table_sorter_t</a> *<em>self</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_table_sorter_free" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Free the internal memory for the specified table sorter. </p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>Always returns 0. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code>: A pointer to an initialised tsk_table_sorter_t object. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="section" id="miscellaneous-functions">
<h2>Miscellaneous functions<a class="headerlink" href="#miscellaneous-functions" title="Permalink to this headline">¶</a></h2>
<dl class="c function">
<dt id="c.tsk_strerror">
<span class="target" id="core_8h_1abb1f859ecf217d1d529ad080c477c527"></span><em class="property">const</em> char *<code class="sig-name descname">tsk_strerror</code><span class="sig-paren">(</span>int <em>err</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tsk_strerror" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Return a description of the specified error. </p>
<p>The memory for the returned string is handled by the library and should not be freed by client code.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>A description of the error. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">err</span></code>: A tskit error code. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="section" id="constants">
<h2>Constants<a class="headerlink" href="#constants" title="Permalink to this headline">¶</a></h2>
<div class="section" id="api-version">
<h3>API Version<a class="headerlink" href="#api-version" title="Permalink to this headline">¶</a></h3>
<dl class="c macro">
<dt id="c.TSK_VERSION_MAJOR">
<span class="target" id="group___a_p_i___v_e_r_s_i_o_n___g_r_o_u_p_1gac9c5ebf4e4a81acdcc0efcd04895837e"></span><code class="sig-name descname">TSK_VERSION_MAJOR</code> 0<a class="headerlink" href="#c.TSK_VERSION_MAJOR" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The library major version. Incremented when breaking changes to the API or ABI are introduced. This includes any changes to the signatures of functions and the sizes and types of externally visible structs. </p>
</dd></dl>

<dl class="c macro">
<dt id="c.TSK_VERSION_MINOR">
<span class="target" id="group___a_p_i___v_e_r_s_i_o_n___g_r_o_u_p_1gae8c8dbba234b6a87c37d87a663cbf865"></span><code class="sig-name descname">TSK_VERSION_MINOR</code> 99<a class="headerlink" href="#c.TSK_VERSION_MINOR" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The library major version. Incremented when non-breaking backward-compatible changes to the API or ABI are introduced, i.e., the addition of a new function. </p>
</dd></dl>

<dl class="c macro">
<dt id="c.TSK_VERSION_PATCH">
<span class="target" id="group___a_p_i___v_e_r_s_i_o_n___g_r_o_u_p_1ga31b513d413786b7235c89a0b131505b1"></span><code class="sig-name descname">TSK_VERSION_PATCH</code> 8<a class="headerlink" href="#c.TSK_VERSION_PATCH" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The library patch version. Incremented when any changes not relevant to the to the API or ABI are introduced, i.e., internal refactors of bugfixes. </p>
</dd></dl>

</div>
<div class="section" id="generic-errors">
<span id="sec-c-api-error-codes"></span><h3>Generic Errors<a class="headerlink" href="#generic-errors" title="Permalink to this headline">¶</a></h3>
<dl class="c macro">
<dt id="c.TSK_ERR_GENERIC">
<span class="target" id="group___g_e_n_e_r_a_l___e_r_r_o_r___g_r_o_u_p_1ga4218de76dd54ea450491d4b77f0f7560"></span><code class="sig-name descname">TSK_ERR_GENERIC</code> -1<a class="headerlink" href="#c.TSK_ERR_GENERIC" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Generic error thrown when no other message can be generated. </p>
</dd></dl>

<dl class="c macro">
<dt id="c.TSK_ERR_NO_MEMORY">
<span class="target" id="group___g_e_n_e_r_a_l___e_r_r_o_r___g_r_o_u_p_1gaed1ff903888bae689a733f98a1d50e0e"></span><code class="sig-name descname">TSK_ERR_NO_MEMORY</code> -2<a class="headerlink" href="#c.TSK_ERR_NO_MEMORY" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Memory could not be allocated. </p>
</dd></dl>

<dl class="c macro">
<dt id="c.TSK_ERR_IO">
<span class="target" id="group___g_e_n_e_r_a_l___e_r_r_o_r___g_r_o_u_p_1gaa21fc9cb235a80e889810aebe164409b"></span><code class="sig-name descname">TSK_ERR_IO</code> -3<a class="headerlink" href="#c.TSK_ERR_IO" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>An IO error occured. </p>
</dd></dl>

<dl class="c macro">
<dt id="c.TSK_ERR_BAD_PARAM_VALUE">
<span class="target" id="group___g_e_n_e_r_a_l___e_r_r_o_r___g_r_o_u_p_1ga8d108648302b0fb4100a771322e8b38e"></span><code class="sig-name descname">TSK_ERR_BAD_PARAM_VALUE</code> -4<a class="headerlink" href="#c.TSK_ERR_BAD_PARAM_VALUE" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c macro">
<dt id="c.TSK_ERR_BUFFER_OVERFLOW">
<span class="target" id="group___g_e_n_e_r_a_l___e_r_r_o_r___g_r_o_u_p_1gad9728476aa3292f83644b218d4e29314"></span><code class="sig-name descname">TSK_ERR_BUFFER_OVERFLOW</code> -5<a class="headerlink" href="#c.TSK_ERR_BUFFER_OVERFLOW" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c macro">
<dt id="c.TSK_ERR_UNSUPPORTED_OPERATION">
<span class="target" id="group___g_e_n_e_r_a_l___e_r_r_o_r___g_r_o_u_p_1gab0ecb24690b1771074a4f9f675efcbc0"></span><code class="sig-name descname">TSK_ERR_UNSUPPORTED_OPERATION</code> -6<a class="headerlink" href="#c.TSK_ERR_UNSUPPORTED_OPERATION" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c macro">
<dt id="c.TSK_ERR_GENERATE_UUID">
<span class="target" id="group___g_e_n_e_r_a_l___e_r_r_o_r___g_r_o_u_p_1gaba956af06c25cb6a87f66334c5e7e49e"></span><code class="sig-name descname">TSK_ERR_GENERATE_UUID</code> -7<a class="headerlink" href="#c.TSK_ERR_GENERATE_UUID" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c macro">
<dt id="c.TSK_ERR_EOF">
<span class="target" id="group___g_e_n_e_r_a_l___e_r_r_o_r___g_r_o_u_p_1ga9eb77ba04c5ce2667aa4dc7a2cde8782"></span><code class="sig-name descname">TSK_ERR_EOF</code> -8<a class="headerlink" href="#c.TSK_ERR_EOF" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The file stream ended after reading zero bytes. </p>
</dd></dl>

</div>
<div class="section" id="file-format-errors">
<h3>File format errors<a class="headerlink" href="#file-format-errors" title="Permalink to this headline">¶</a></h3>
<dl class="c macro">
<dt id="c.TSK_ERR_FILE_FORMAT">
<span class="target" id="group___f_i_l_e___f_o_r_m_a_t___e_r_r_o_r___g_r_o_u_p_1ga1aadb65c19eaa70e590096a65bd715c7"></span><code class="sig-name descname">TSK_ERR_FILE_FORMAT</code> -100<a class="headerlink" href="#c.TSK_ERR_FILE_FORMAT" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>A file could not be read because it is in the wrong format </p>
</dd></dl>

<dl class="c macro">
<dt id="c.TSK_ERR_FILE_VERSION_TOO_OLD">
<span class="target" id="group___f_i_l_e___f_o_r_m_a_t___e_r_r_o_r___g_r_o_u_p_1gaa852249512d6dbd7070d82a8219455ae"></span><code class="sig-name descname">TSK_ERR_FILE_VERSION_TOO_OLD</code> -101<a class="headerlink" href="#c.TSK_ERR_FILE_VERSION_TOO_OLD" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The file is in tskit format, but the version is too old for the library to read. The file should be upgraded to the latest version using the <code class="docutils literal notranslate"><span class="pre">tskit</span> <span class="pre">upgrade</span></code> command line utility. </p>
</dd></dl>

<dl class="c macro">
<dt id="c.TSK_ERR_FILE_VERSION_TOO_NEW">
<span class="target" id="group___f_i_l_e___f_o_r_m_a_t___e_r_r_o_r___g_r_o_u_p_1ga5c1ffddfd2a4f080849e1ee7058a6a4e"></span><code class="sig-name descname">TSK_ERR_FILE_VERSION_TOO_NEW</code> -102<a class="headerlink" href="#c.TSK_ERR_FILE_VERSION_TOO_NEW" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The file is in tskit format, but the version is too new for the library to read. To read the file you must upgrade the version of tskit. </p>
</dd></dl>

<div class="admonition-todo admonition" id="id3">
<p class="admonition-title">Todo</p>
<p>Add in groups for rest of the error types and document.</p>
</div>
</div>
</div>
<div class="section" id="examples">
<span id="sec-c-api-examples"></span><h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<div class="section" id="basic-forwards-simulator">
<h3>Basic forwards simulator<a class="headerlink" href="#basic-forwards-simulator" title="Permalink to this headline">¶</a></h3>
<p>This is an example of using the tables API to define a simple
haploid Wright-Fisher simulator. Because this simple example
repeatedly sorts the edge data, it is quite inefficient and
should not be used as the basis of a large-scale simulator.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This example uses the C function <code class="docutils literal notranslate"><span class="pre">rand</span></code> and constant
<code class="docutils literal notranslate"><span class="pre">RAND_MAX</span></code> for random number generation.  These methods
are used for example purposes only and a high-quality
random number library should be preferred for code
used for research.  Examples include, but are not
limited to:</p>
<ol class="arabic simple">
<li><p>The <a class="reference external" href="https://www.gnu.org/software/gsl">GNU Scientific Library</a>,
which is licensed under the GNU General Public License, version
3 (<a class="reference external" href="https://www.gnu.org/licenses/gpl-3.0.en.html">GPL3+</a>.</p></li>
<li><p>For C++ projects using C++11 or later,
the built-in <a class="reference external" href="https://en.cppreference.com/w/cpp/numeric/random">random</a>
number library.</p></li>
<li><p>The <a class="reference external" href="https://numpy.org/devdocs/reference/random/c-api.html">numpy C API</a>
may be useful for those writing Python extension modules in C/C++.</p></li>
</ol>
</div>
<div class="admonition-todo admonition" id="id4">
<p class="admonition-title">Todo</p>
<p>Give a pointer to an example that caches and flushes edge data efficiently.
Probably using the C++ API?</p>
</div>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;stdlib.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;assert.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;err.h&gt;</span><span class="cp"></span>

<span class="cp">#include</span> <span class="cpf">&lt;tskit/tables.h&gt;</span><span class="cp"></span>

<span class="cp">#define check_tsk_error(val)                                                            \</span>
<span class="cp">    if (val &lt; 0) {                                                                      \</span>
<span class="cp">        errx(EXIT_FAILURE, &quot;line %d: %s&quot;, __LINE__, tsk_strerror(val));                 \</span>
<span class="cp">    }</span>

<span class="kt">void</span>
<span class="nf">simulate</span><span class="p">(</span>
    <span class="n">tsk_table_collection_t</span> <span class="o">*</span><span class="n">tables</span><span class="p">,</span> <span class="kt">int</span> <span class="n">N</span><span class="p">,</span> <span class="kt">int</span> <span class="n">T</span><span class="p">,</span> <span class="kt">int</span> <span class="n">simplify_interval</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">tsk_id_t</span> <span class="o">*</span><span class="n">buffer</span><span class="p">,</span> <span class="o">*</span><span class="n">parents</span><span class="p">,</span> <span class="o">*</span><span class="n">children</span><span class="p">,</span> <span class="n">child</span><span class="p">,</span> <span class="n">left_parent</span><span class="p">,</span> <span class="n">right_parent</span><span class="p">;</span>
    <span class="kt">double</span> <span class="n">breakpoint</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">ret</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">b</span><span class="p">;</span>

    <span class="n">assert</span><span class="p">(</span><span class="n">simplify_interval</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">);</span> <span class="c1">// leads to division by zero</span>
    <span class="n">buffer</span> <span class="o">=</span> <span class="n">malloc</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">N</span> <span class="o">*</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">tsk_id_t</span><span class="p">));</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">buffer</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">errx</span><span class="p">(</span><span class="n">EXIT_FAILURE</span><span class="p">,</span> <span class="s">&quot;Out of memory&quot;</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="n">tables</span><span class="o">-&gt;</span><span class="n">sequence_length</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">;</span>
    <span class="n">parents</span> <span class="o">=</span> <span class="n">buffer</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">N</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">parents</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
            <span class="o">=</span> <span class="n">tsk_node_table_add_row</span><span class="p">(</span><span class="o">&amp;</span><span class="n">tables</span><span class="o">-&gt;</span><span class="n">nodes</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">T</span><span class="p">,</span> <span class="n">TSK_NULL</span><span class="p">,</span> <span class="n">TSK_NULL</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
        <span class="n">check_tsk_error</span><span class="p">(</span><span class="n">parents</span><span class="p">[</span><span class="n">j</span><span class="p">]);</span>
    <span class="p">}</span>
    <span class="n">b</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">t</span> <span class="o">=</span> <span class="n">T</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="n">t</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">t</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
        <span class="cm">/* Alternate between using the first and last N values in the buffer */</span>
        <span class="n">parents</span> <span class="o">=</span> <span class="n">buffer</span> <span class="o">+</span> <span class="p">(</span><span class="n">b</span> <span class="o">*</span> <span class="n">N</span><span class="p">);</span>
        <span class="n">b</span> <span class="o">=</span> <span class="p">(</span><span class="n">b</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="mi">2</span><span class="p">;</span>
        <span class="n">children</span> <span class="o">=</span> <span class="n">buffer</span> <span class="o">+</span> <span class="p">(</span><span class="n">b</span> <span class="o">*</span> <span class="n">N</span><span class="p">);</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">N</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">child</span> <span class="o">=</span> <span class="n">tsk_node_table_add_row</span><span class="p">(</span>
                <span class="o">&amp;</span><span class="n">tables</span><span class="o">-&gt;</span><span class="n">nodes</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">TSK_NULL</span><span class="p">,</span> <span class="n">TSK_NULL</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
            <span class="n">check_tsk_error</span><span class="p">(</span><span class="n">child</span><span class="p">);</span>
            <span class="cm">/* NOTE: the use of rand() is discouraged for</span>
<span class="cm">             * research code and proper random number generator</span>
<span class="cm">             * libraries should be preferred.</span>
<span class="cm">             */</span>
            <span class="n">left_parent</span> <span class="o">=</span> <span class="n">parents</span><span class="p">[(</span><span class="kt">size_t</span><span class="p">)((</span><span class="n">rand</span><span class="p">()</span><span class="o">/</span><span class="p">(</span><span class="mf">1.</span><span class="o">+</span><span class="n">RAND_MAX</span><span class="p">))</span><span class="o">*</span><span class="n">N</span><span class="p">)];</span>
            <span class="n">right_parent</span> <span class="o">=</span> <span class="n">parents</span><span class="p">[(</span><span class="kt">size_t</span><span class="p">)((</span><span class="n">rand</span><span class="p">()</span><span class="o">/</span><span class="p">(</span><span class="mf">1.</span><span class="o">+</span><span class="n">RAND_MAX</span><span class="p">))</span><span class="o">*</span><span class="n">N</span><span class="p">)];</span>
            <span class="k">do</span> <span class="p">{</span>
                <span class="n">breakpoint</span> <span class="o">=</span> <span class="n">rand</span><span class="p">()</span><span class="o">/</span><span class="p">(</span><span class="mf">1.</span><span class="o">+</span><span class="n">RAND_MAX</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="n">breakpoint</span> <span class="o">==</span> <span class="mi">0</span><span class="p">);</span> <span class="cm">/* tiny proba of breakpoint being 0 */</span>
            <span class="n">ret</span> <span class="o">=</span> <span class="n">tsk_edge_table_add_row</span><span class="p">(</span>
                <span class="o">&amp;</span><span class="n">tables</span><span class="o">-&gt;</span><span class="n">edges</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">breakpoint</span><span class="p">,</span> <span class="n">left_parent</span><span class="p">,</span> <span class="n">child</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
            <span class="n">check_tsk_error</span><span class="p">(</span><span class="n">ret</span><span class="p">);</span>
            <span class="n">ret</span> <span class="o">=</span> <span class="n">tsk_edge_table_add_row</span><span class="p">(</span>
                <span class="o">&amp;</span><span class="n">tables</span><span class="o">-&gt;</span><span class="n">edges</span><span class="p">,</span> <span class="n">breakpoint</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">right_parent</span><span class="p">,</span> <span class="n">child</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
            <span class="n">check_tsk_error</span><span class="p">(</span><span class="n">ret</span><span class="p">);</span>
            <span class="n">children</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">child</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">t</span> <span class="o">%</span> <span class="n">simplify_interval</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">printf</span><span class="p">(</span><span class="s">&quot;Simplify at generation %d: (%d nodes %d edges)&quot;</span><span class="p">,</span>
                <span class="n">t</span><span class="p">,</span>
                <span class="n">tables</span><span class="o">-&gt;</span><span class="n">nodes</span><span class="p">.</span><span class="n">num_rows</span><span class="p">,</span>
                <span class="n">tables</span><span class="o">-&gt;</span><span class="n">edges</span><span class="p">.</span><span class="n">num_rows</span><span class="p">);</span>
            <span class="cm">/* Note: Edges must be sorted for simplify to work, and we use a brute force</span>
<span class="cm">             * approach of sorting each time here for simplicity. This is inefficient. */</span>
            <span class="n">ret</span> <span class="o">=</span> <span class="n">tsk_table_collection_sort</span><span class="p">(</span><span class="n">tables</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
            <span class="n">check_tsk_error</span><span class="p">(</span><span class="n">ret</span><span class="p">);</span>
            <span class="n">ret</span> <span class="o">=</span> <span class="n">tsk_table_collection_simplify</span><span class="p">(</span><span class="n">tables</span><span class="p">,</span> <span class="n">children</span><span class="p">,</span> <span class="n">N</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
            <span class="n">check_tsk_error</span><span class="p">(</span><span class="n">ret</span><span class="p">);</span>
            <span class="n">printf</span><span class="p">(</span><span class="s">&quot; -&gt; (%d nodes %d edges)</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
                <span class="n">tables</span><span class="o">-&gt;</span><span class="n">nodes</span><span class="p">.</span><span class="n">num_rows</span><span class="p">,</span>
                <span class="n">tables</span><span class="o">-&gt;</span><span class="n">edges</span><span class="p">.</span><span class="n">num_rows</span><span class="p">);</span>
            <span class="k">for</span> <span class="p">(</span><span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">N</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">children</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">j</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="n">free</span><span class="p">(</span><span class="n">buffer</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">int</span>
<span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">**</span><span class="n">argv</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">ret</span><span class="p">;</span>
    <span class="n">tsk_table_collection_t</span> <span class="n">tables</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">argc</span> <span class="o">!=</span> <span class="mi">6</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">errx</span><span class="p">(</span><span class="n">EXIT_FAILURE</span><span class="p">,</span> <span class="s">&quot;usage: N T simplify-interval output-file seed&quot;</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">tsk_table_collection_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">tables</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="n">check_tsk_error</span><span class="p">(</span><span class="n">ret</span><span class="p">);</span>
    <span class="n">srand</span><span class="p">((</span><span class="kt">unsigned</span><span class="p">)</span><span class="n">atoi</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">5</span><span class="p">]));</span>
    <span class="n">simulate</span><span class="p">(</span><span class="o">&amp;</span><span class="n">tables</span><span class="p">,</span> <span class="n">atoi</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="n">atoi</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">]),</span> <span class="n">atoi</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">3</span><span class="p">]));</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">tsk_table_collection_dump</span><span class="p">(</span><span class="o">&amp;</span><span class="n">tables</span><span class="p">,</span> <span class="n">argv</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="mi">0</span><span class="p">);</span>
    <span class="n">check_tsk_error</span><span class="p">(</span><span class="n">ret</span><span class="p">);</span>

    <span class="n">tsk_table_collection_free</span><span class="p">(</span><span class="o">&amp;</span><span class="n">tables</span><span class="p">);</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="tree-iteration">
<span id="sec-c-api-examples-tree-iteration"></span><h3>Tree iteration<a class="headerlink" href="#tree-iteration" title="Permalink to this headline">¶</a></h3>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;stdlib.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;err.h&gt;</span><span class="cp"></span>

<span class="cp">#include</span> <span class="cpf">&lt;tskit.h&gt;</span><span class="cp"></span>

<span class="cp">#define check_tsk_error(val)                                                            \</span>
<span class="cp">    if (val &lt; 0) {                                                                      \</span>
<span class="cp">        errx(EXIT_FAILURE, &quot;line %d: %s&quot;, __LINE__, tsk_strerror(val));                 \</span>
<span class="cp">    }</span>

<span class="kt">int</span>
<span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">**</span><span class="n">argv</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">ret</span><span class="p">,</span> <span class="n">iter</span><span class="p">;</span>
    <span class="n">tsk_treeseq_t</span> <span class="n">ts</span><span class="p">;</span>
    <span class="n">tsk_tree_t</span> <span class="n">tree</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">argc</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">errx</span><span class="p">(</span><span class="n">EXIT_FAILURE</span><span class="p">,</span> <span class="s">&quot;usage: &lt;tree sequence file&gt;&quot;</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">tsk_treeseq_load</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ts</span><span class="p">,</span> <span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">0</span><span class="p">);</span>
    <span class="n">check_tsk_error</span><span class="p">(</span><span class="n">ret</span><span class="p">);</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">tsk_tree_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">tree</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">ts</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="n">check_tsk_error</span><span class="p">(</span><span class="n">ret</span><span class="p">);</span>

    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;Iterate forwards</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">iter</span> <span class="o">=</span> <span class="n">tsk_tree_first</span><span class="p">(</span><span class="o">&amp;</span><span class="n">tree</span><span class="p">);</span> <span class="n">iter</span> <span class="o">==</span> <span class="mi">1</span><span class="p">;</span> <span class="n">iter</span> <span class="o">=</span> <span class="n">tsk_tree_next</span><span class="p">(</span><span class="o">&amp;</span><span class="n">tree</span><span class="p">))</span> <span class="p">{</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\t</span><span class="s">tree %d has %d roots</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
            <span class="n">tsk_tree_get_index</span><span class="p">(</span><span class="o">&amp;</span><span class="n">tree</span><span class="p">),</span>
            <span class="n">tsk_tree_get_num_roots</span><span class="p">(</span><span class="o">&amp;</span><span class="n">tree</span><span class="p">));</span>
    <span class="p">}</span>
    <span class="n">check_tsk_error</span><span class="p">(</span><span class="n">iter</span><span class="p">);</span>

    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;Iterate backwards</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">iter</span> <span class="o">=</span> <span class="n">tsk_tree_last</span><span class="p">(</span><span class="o">&amp;</span><span class="n">tree</span><span class="p">);</span> <span class="n">iter</span> <span class="o">==</span> <span class="mi">1</span><span class="p">;</span> <span class="n">iter</span> <span class="o">=</span> <span class="n">tsk_tree_prev</span><span class="p">(</span><span class="o">&amp;</span><span class="n">tree</span><span class="p">))</span> <span class="p">{</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\t</span><span class="s">tree %d has %d roots</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
            <span class="n">tsk_tree_get_index</span><span class="p">(</span><span class="o">&amp;</span><span class="n">tree</span><span class="p">),</span>
            <span class="n">tsk_tree_get_num_roots</span><span class="p">(</span><span class="o">&amp;</span><span class="n">tree</span><span class="p">));</span>
    <span class="p">}</span>
    <span class="n">check_tsk_error</span><span class="p">(</span><span class="n">iter</span><span class="p">);</span>

    <span class="n">tsk_tree_free</span><span class="p">(</span><span class="o">&amp;</span><span class="n">tree</span><span class="p">);</span>
    <span class="n">tsk_treeseq_free</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ts</span><span class="p">);</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="tree-traversals">
<span id="sec-c-api-examples-tree-traversals"></span><h3>Tree traversals<a class="headerlink" href="#tree-traversals" title="Permalink to this headline">¶</a></h3>
<p>In this example we load a tree sequence file, and then traverse the first
tree in three different ways:</p>
<ol class="arabic simple">
<li><p>We first traverse the tree in preorder using recursion. This is a very
common way of navigating around trees and can be very convenient for
some applications. For example, here we compute the depth of each node
(i.e., it’s distance from the root) and use this when printing out the
nodes as we visit them.</p></li>
<li><p>Then we traverse the tree in preorder using an iterative approach. This
is a little more efficient than using recursion, and is sometimes
more convenient than structuring the calculation recursively. Note that
we allocate a stack here with space to hold the total number of nodes
in the tree sequence. This is safe, but it likely to be a massive
over estimate. However, this makes very little difference in practise
even for tree sequences with millions of nodes since it’s likely
only the first page (usually 4K) will be written to and the
rest of the stack will never therefore be mapped to physical memory.</p></li>
<li><p>In the third example we iterate upwards from the samples rather than
downwards from the root.</p></li>
</ol>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;stdlib.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;err.h&gt;</span><span class="cp"></span>

<span class="cp">#include</span> <span class="cpf">&lt;tskit.h&gt;</span><span class="cp"></span>

<span class="cp">#define check_tsk_error(val)                                                            \</span>
<span class="cp">    if (val &lt; 0) {                                                                      \</span>
<span class="cp">        errx(EXIT_FAILURE, &quot;line %d: %s&quot;, __LINE__, tsk_strerror(val));                 \</span>
<span class="cp">    }</span>

<span class="k">static</span> <span class="kt">void</span>
<span class="n">_traverse</span><span class="p">(</span><span class="n">tsk_tree_t</span> <span class="o">*</span><span class="n">tree</span><span class="p">,</span> <span class="n">tsk_id_t</span> <span class="n">u</span><span class="p">,</span> <span class="kt">int</span> <span class="n">depth</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">tsk_id_t</span> <span class="n">v</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">j</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span><span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">depth</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">&quot;    &quot;</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;Visit recursive %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">u</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">v</span> <span class="o">=</span> <span class="n">tree</span><span class="o">-&gt;</span><span class="n">left_child</span><span class="p">[</span><span class="n">u</span><span class="p">];</span> <span class="n">v</span> <span class="o">!=</span> <span class="n">TSK_NULL</span><span class="p">;</span> <span class="n">v</span> <span class="o">=</span> <span class="n">tree</span><span class="o">-&gt;</span><span class="n">right_sib</span><span class="p">[</span><span class="n">v</span><span class="p">])</span> <span class="p">{</span>
        <span class="n">_traverse</span><span class="p">(</span><span class="n">tree</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">depth</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span>
<span class="n">traverse_recursive</span><span class="p">(</span><span class="n">tsk_tree_t</span> <span class="o">*</span><span class="n">tree</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">tsk_id_t</span> <span class="n">root</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span><span class="n">root</span> <span class="o">=</span> <span class="n">tree</span><span class="o">-&gt;</span><span class="n">left_root</span><span class="p">;</span> <span class="n">root</span> <span class="o">!=</span> <span class="n">TSK_NULL</span><span class="p">;</span> <span class="n">root</span> <span class="o">=</span> <span class="n">tree</span><span class="o">-&gt;</span><span class="n">right_sib</span><span class="p">[</span><span class="n">root</span><span class="p">])</span> <span class="p">{</span>
        <span class="n">_traverse</span><span class="p">(</span><span class="n">tree</span><span class="p">,</span> <span class="n">root</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span>
<span class="n">traverse_stack</span><span class="p">(</span><span class="n">tsk_tree_t</span> <span class="o">*</span><span class="n">tree</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">stack_top</span><span class="p">;</span>
    <span class="n">tsk_id_t</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">root</span><span class="p">;</span>
    <span class="n">tsk_id_t</span> <span class="o">*</span><span class="n">stack</span>
        <span class="o">=</span> <span class="n">malloc</span><span class="p">(</span><span class="n">tsk_treeseq_get_num_nodes</span><span class="p">(</span><span class="n">tree</span><span class="o">-&gt;</span><span class="n">tree_sequence</span><span class="p">)</span> <span class="o">*</span> <span class="k">sizeof</span><span class="p">(</span><span class="o">*</span><span class="n">stack</span><span class="p">));</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">stack</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">errx</span><span class="p">(</span><span class="n">EXIT_FAILURE</span><span class="p">,</span> <span class="s">&quot;Out of memory&quot;</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">root</span> <span class="o">=</span> <span class="n">tree</span><span class="o">-&gt;</span><span class="n">left_root</span><span class="p">;</span> <span class="n">root</span> <span class="o">!=</span> <span class="n">TSK_NULL</span><span class="p">;</span> <span class="n">root</span> <span class="o">=</span> <span class="n">tree</span><span class="o">-&gt;</span><span class="n">right_sib</span><span class="p">[</span><span class="n">root</span><span class="p">])</span> <span class="p">{</span>
        <span class="n">stack_top</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="n">stack</span><span class="p">[</span><span class="n">stack_top</span><span class="p">]</span> <span class="o">=</span> <span class="n">root</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">(</span><span class="n">stack_top</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">u</span> <span class="o">=</span> <span class="n">stack</span><span class="p">[</span><span class="n">stack_top</span><span class="p">];</span>
            <span class="n">stack_top</span><span class="o">--</span><span class="p">;</span>
            <span class="n">printf</span><span class="p">(</span><span class="s">&quot;Visit stack %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">u</span><span class="p">);</span>
            <span class="cm">/* Put nodes on the stack right-to-left, so we visit in left-to-right */</span>
            <span class="k">for</span> <span class="p">(</span><span class="n">v</span> <span class="o">=</span> <span class="n">tree</span><span class="o">-&gt;</span><span class="n">right_child</span><span class="p">[</span><span class="n">u</span><span class="p">];</span> <span class="n">v</span> <span class="o">!=</span> <span class="n">TSK_NULL</span><span class="p">;</span> <span class="n">v</span> <span class="o">=</span> <span class="n">tree</span><span class="o">-&gt;</span><span class="n">left_sib</span><span class="p">[</span><span class="n">v</span><span class="p">])</span> <span class="p">{</span>
                <span class="n">stack_top</span><span class="o">++</span><span class="p">;</span>
                <span class="n">stack</span><span class="p">[</span><span class="n">stack_top</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="n">free</span><span class="p">(</span><span class="n">stack</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span>
<span class="n">traverse_upwards</span><span class="p">(</span><span class="n">tsk_tree_t</span> <span class="o">*</span><span class="n">tree</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">const</span> <span class="n">tsk_id_t</span> <span class="o">*</span><span class="n">samples</span> <span class="o">=</span> <span class="n">tsk_treeseq_get_samples</span><span class="p">(</span><span class="n">tree</span><span class="o">-&gt;</span><span class="n">tree_sequence</span><span class="p">);</span>
    <span class="n">tsk_size_t</span> <span class="n">num_samples</span> <span class="o">=</span> <span class="n">tsk_treeseq_get_num_samples</span><span class="p">(</span><span class="n">tree</span><span class="o">-&gt;</span><span class="n">tree_sequence</span><span class="p">);</span>
    <span class="n">tsk_size_t</span> <span class="n">j</span><span class="p">;</span>
    <span class="n">tsk_id_t</span> <span class="n">u</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span><span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">num_samples</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">u</span> <span class="o">=</span> <span class="n">samples</span><span class="p">[</span><span class="n">j</span><span class="p">];</span>
        <span class="k">while</span> <span class="p">(</span><span class="n">u</span> <span class="o">!=</span> <span class="n">TSK_NULL</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">printf</span><span class="p">(</span><span class="s">&quot;Visit upwards: %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">u</span><span class="p">);</span>
            <span class="n">u</span> <span class="o">=</span> <span class="n">tree</span><span class="o">-&gt;</span><span class="n">parent</span><span class="p">[</span><span class="n">u</span><span class="p">];</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kt">int</span>
<span class="n">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">**</span><span class="n">argv</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">ret</span><span class="p">;</span>
    <span class="n">tsk_treeseq_t</span> <span class="n">ts</span><span class="p">;</span>
    <span class="n">tsk_tree_t</span> <span class="n">tree</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">argc</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">errx</span><span class="p">(</span><span class="n">EXIT_FAILURE</span><span class="p">,</span> <span class="s">&quot;usage: &lt;tree sequence file&gt;&quot;</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">tsk_treeseq_load</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ts</span><span class="p">,</span> <span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">0</span><span class="p">);</span>
    <span class="n">check_tsk_error</span><span class="p">(</span><span class="n">ret</span><span class="p">);</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">tsk_tree_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">tree</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">ts</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="n">check_tsk_error</span><span class="p">(</span><span class="n">ret</span><span class="p">);</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">tsk_tree_first</span><span class="p">(</span><span class="o">&amp;</span><span class="n">tree</span><span class="p">);</span>
    <span class="n">check_tsk_error</span><span class="p">(</span><span class="n">ret</span><span class="p">);</span>

    <span class="n">traverse_recursive</span><span class="p">(</span><span class="o">&amp;</span><span class="n">tree</span><span class="p">);</span>

    <span class="n">traverse_stack</span><span class="p">(</span><span class="o">&amp;</span><span class="n">tree</span><span class="p">);</span>

    <span class="n">traverse_upwards</span><span class="p">(</span><span class="o">&amp;</span><span class="n">tree</span><span class="p">);</span>

    <span class="n">tsk_tree_free</span><span class="p">(</span><span class="o">&amp;</span><span class="n">tree</span><span class="p">);</span>
    <span class="n">tsk_treeseq_free</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ts</span><span class="p">);</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="file-streaming">
<span id="sec-c-api-examples-file-streaming"></span><h3>File streaming<a class="headerlink" href="#file-streaming" title="Permalink to this headline">¶</a></h3>
<p>It is often useful to read tree sequence files from a stream rather than
from a fixed filename. This example shows how to do this using the
<a class="reference internal" href="#c.tsk_table_collection_loadf" title="tsk_table_collection_loadf"><code class="xref c c-func docutils literal notranslate"><span class="pre">tsk_table_collection_loadf()</span></code></a> and
<a class="reference internal" href="#c.tsk_table_collection_dumpf" title="tsk_table_collection_dumpf"><code class="xref c c-func docutils literal notranslate"><span class="pre">tsk_table_collection_dumpf()</span></code></a> functions. Here, we sequentially
load table collections from the <code class="docutils literal notranslate"><span class="pre">stdin</span></code> stream and write them
back out to <code class="docutils literal notranslate"><span class="pre">stdout</span></code> with their mutations removed.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;stdlib.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;tskit/tables.h&gt;</span><span class="cp"></span>

<span class="cp">#define check_tsk_error(val)                                                            \</span>
<span class="cp">    if (val &lt; 0) {                                                                      \</span>
<span class="cp">        fprintf(stderr, &quot;Error: line %d: %s\n&quot;, __LINE__, tsk_strerror(val));           \</span>
<span class="cp">        exit(EXIT_FAILURE);                                                             \</span>
<span class="cp">    }</span>

<span class="kt">int</span>
<span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">**</span><span class="n">argv</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">ret</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="n">tsk_table_collection_t</span> <span class="n">tables</span><span class="p">;</span>

    <span class="n">ret</span> <span class="o">=</span> <span class="n">tsk_table_collection_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">tables</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="n">check_tsk_error</span><span class="p">(</span><span class="n">ret</span><span class="p">);</span>

    <span class="k">while</span> <span class="p">(</span><span class="nb">true</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="n">tsk_table_collection_loadf</span><span class="p">(</span><span class="o">&amp;</span><span class="n">tables</span><span class="p">,</span> <span class="n">stdin</span><span class="p">,</span> <span class="n">TSK_NO_INIT</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">ret</span> <span class="o">==</span> <span class="n">TSK_ERR_EOF</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="n">check_tsk_error</span><span class="p">(</span><span class="n">ret</span><span class="p">);</span>
        <span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span> <span class="s">&quot;Tree sequence %d had %d mutations</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span>
            <span class="p">(</span><span class="kt">int</span><span class="p">)</span> <span class="n">tables</span><span class="p">.</span><span class="n">mutations</span><span class="p">.</span><span class="n">num_rows</span><span class="p">);</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="n">tsk_mutation_table_truncate</span><span class="p">(</span><span class="o">&amp;</span><span class="n">tables</span><span class="p">.</span><span class="n">mutations</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
        <span class="n">check_tsk_error</span><span class="p">(</span><span class="n">ret</span><span class="p">);</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="n">tsk_table_collection_dumpf</span><span class="p">(</span><span class="o">&amp;</span><span class="n">tables</span><span class="p">,</span> <span class="n">stdout</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
        <span class="n">check_tsk_error</span><span class="p">(</span><span class="n">ret</span><span class="p">);</span>
        <span class="n">j</span><span class="o">++</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">tsk_table_collection_free</span><span class="p">(</span><span class="o">&amp;</span><span class="n">tables</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">EXIT_SUCCESS</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Note that we use the value <a class="reference internal" href="#c.TSK_ERR_EOF" title="TSK_ERR_EOF"><code class="xref c c-macro docutils literal notranslate"><span class="pre">TSK_ERR_EOF</span></code></a> to detect when the stream
ends, as we don’t know how many tree sequences to expect on the input.
In this case, <a class="reference internal" href="#c.TSK_ERR_EOF" title="TSK_ERR_EOF"><code class="xref c c-macro docutils literal notranslate"><span class="pre">TSK_ERR_EOF</span></code></a> is not considered an error and we exit
normally.</p>
<p>Running this program on some tree sequence files we might get:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cat tmp1.trees tmp2.trees | ./build/streaming &gt; no_mutations.trees
Tree sequence 0 had 38 mutations
Tree sequence 1 had 132 mutations
</pre></div>
</div>
<p>Then, running this program again on the output of the previous command,
we see that we now have two tree sequences with their mutations removed
stored in the file <code class="docutils literal notranslate"><span class="pre">no_mutations.trees</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ./build/streaming &lt; no_mutations.trees &gt; /dev/null
Tree sequence 0 had 0 mutations
Tree sequence 1 had 0 mutations
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="cli.html" class="btn btn-neutral float-right" title="Command line interface" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="stats.html" class="btn btn-neutral float-left" title="Statistics" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2018-2020, Tskit developers

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>